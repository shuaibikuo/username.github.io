/* @du/callapp version: 0.5.7 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).$_callapp=n()}(this,(function(){"use strict";function e(e,n,t,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}function n(n){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=n.apply(t,r);function c(n){e(i,o,a,c,s,"next",n)}function s(n){e(i,o,a,c,s,"throw",n)}c(void 0)}))}}function t(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s={exports:{}},u={exports:{}};!function(e){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(u),function(e){var n=u.exports.default;function t(){e.exports=t=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},o=Object.prototype,a=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{l({},"")}catch(e){l=function(e,n,t){return e[n]=t}}function d(e,n,t,r){var o=n&&n.prototype instanceof h?n:h,a=Object.create(o.prototype),i=new S(r||[]);return a._invoke=function(e,n,t){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return E()}for(t.method=o,t.arg=a;;){var i=t.delegate;if(i){var c=x(i,t);if(c){if(c===f)continue;return c}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var s=p(e,n,t);if("normal"===s.type){if(r=t.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:t.done}}"throw"===s.type&&(r="completed",t.method="throw",t.arg=s.arg)}}}(e,t,i),a}function p(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}r.wrap=d;var f={};function h(){}function m(){}function v(){}var y={};l(y,c,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(P([])));_&&_!==o&&a.call(_,c)&&(y=_);var b=v.prototype=h.prototype=Object.create(y);function g(e){["next","throw","return"].forEach((function(n){l(e,n,(function(e){return this._invoke(n,e)}))}))}function k(e,t){function r(o,i,c,s){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function x(e,n){var t=e.iterator[n.method];if(void 0===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,x(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=p(t,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function T(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function O(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(e){if(e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var t=-1,r=function n(){for(;++t<e.length;)if(a.call(e,t))return n.value=e[t],n.done=!1,n;return n.value=void 0,n.done=!0,n};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=v,l(b,"constructor",v),l(v,"constructor",m),m.displayName=l(v,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===m||"GeneratorFunction"===(n.displayName||n.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},r.awrap=function(e){return{__await:e}},g(k.prototype),l(k.prototype,s,(function(){return this})),r.AsyncIterator=k,r.async=function(e,n,t,o,a){void 0===a&&(a=Promise);var i=new k(d(e,n,t,o),a);return r.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),l(b,u,"Generator"),l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var n=[];for(var t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=P,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=n,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),f},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),O(t),f}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;O(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:P(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),f}},r}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(s);var l=s.exports(),d=l;try{regeneratorRuntime=l}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=l:Function("r","regeneratorRuntime = r")(l)}var p={},f={},h=c&&c.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((r=r.apply(e,n||[])).next())}))},m=c&&c.__generator||function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function v(e){return new Promise((function(n){setTimeout((function(){n(!0)}),e)}))}Object.defineProperty(f,"__esModule",{value:!0}),f.sleep=f.getConfigCenter=void 0,f.getConfigCenter=function(e){return h(void 0,void 0,void 0,(function(){return m(this,(function(n){return[2,Promise.race([fetch("https://cdn-config.dewu.com/node-common/configCenter/"+e.project+"/"+e.key+".json").then((function(e){return e.text()})).then((function(n){var t;try{t=JSON.parse(JSON.parse(n).data)}catch(n){t=e.defaultValue}return t})),v(1500).then((function(){return e.defaultValue}))])]}))}))},f.sleep=v;var y=c&&c.__assign||function(){return y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},y.apply(this,arguments)},w=c&&c.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((r=r.apply(e,n||[])).next())}))},_=c&&c.__generator||function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},b=c&&c.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t};Object.defineProperty(p,"__esModule",{value:!0});var g=f,k=[];function x(e,n){var t=!0,r="";try{Object.keys(e||{}).forEach((function(o){var a,i=null===(a=n.params)||void 0===a?void 0:a.find((function(e){return e.key===o}));!i||"1"!==i.required||e[o]&&"null"!==e[o]&&"undefined"!==e[o]&&"NaN"!==e[o]||(r=o,t=!1),i&&["int","long"].includes(i.type.toLowerCase())&&isNaN(Number(e[o]))&&(r=o,t=!1),i&&["string"].includes(i.type.toLowerCase())&&e[o]!==e[o].trim()&&(r=o,t=!1)}))}catch(e){t=!1}return{valid:t,errKey:r}}function T(e){return!(k.length>0)||k.find((function(n){return e.includes(n.path)}))}function O(e){var n={},t=e.split("?")[1];if(t)for(var r,o=t.split("&"),a=void 0,i=void 0,c=0,s=o.length;c<s;c++)r=(a=o[c].split("="))[0],i=a[1],n[r]=i;return n}function S(e){var n=[],t=E(e).searchParams,r=e.includes("web/BrowserPage"),o=t.loadUrl;if(!o)return n;var a=decodeURIComponent(o),i=encodeURIComponent(a);decodeURIComponent(i)!==a&&n.push({errorType:"loadUrlError",errData:"loadUrl不是正确的转译地址"}),r&&/\/nezha-plus\/detail\//.test(a)&&(/\/nezha-plus\/detail\/[a-z0-9]{24}/i.test(a)||n.push({errorType:"loadUrlError",errData:"会场loadUrl的url链接有误，可能存在空格或者特殊符号"})),r&&/&/.test(a)&&!/\?/.test(a)&&n.push({errorType:"loadUrlError",errData:"loadUrl 的url参数拼接错误，可能存在空格或者特殊符号，应该使用问号代替&"});return r&&a&&!/^((http|https):\/\/)+([\w\-])+\.*/.test(a)&&n.push({errorType:"loadUrlError",errData:"loadUrl的url链接有误，可能存在空格或者特殊符号"}),n}function P(e){var n=E(e),t=n.protocol,r=n.hostname;return"dewuapp:"===t||"https:"===t&&("m.poizon.com"===r||"m.dewu.com"===r)}function E(e){var n=new URL(e),t=n.protocol,r=n.href,o=new URL(e.replace(/^\w+:/,"https:"));return{href:r,protocol:t,hostname:o.hostname,pathname:o.pathname,searchParams:O(e)}}!function(){w(this,void 0,void 0,(function(){var e;return _(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),k.length?[3,2]:[4,g.getConfigCenter({project:"call-app",key:"routerList",defaultValue:{list:[]}})];case 1:e=n.sent(),k=e.list,n.label=2;case 2:return[3,4];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))}();var C,I=function(e){var n=[];e||n.push("params 'url' or 'type' miss!");try{return n=n.concat(function(e){var n=E(e),t=n.hostname,r=n.pathname,o=n.protocol,a=n.searchParams,i=[];if(["dewulink:","dewuapp:"].includes(o)||"https:"===o||i.push({errorType:"protocolError",errData:"无效的协议"}),["apk.poizon.com","apk.dewu.com","m.poizon.com","m.dewu.com"].includes(t)||i.push({errorType:"domainError",errData:"无效的唤端域名"}),P(e)||["/note","/identify","/redirect","/qq","/weixin","/qq_conn/1104972716","/wechat","/nezha/sceneMiddlePage","/alipay"].some((function(e){return r.includes(e)}))||i.push({errorType:"schemeError",errData:"无效的唤端路径"}),P(e)&&!T(r)){var c=T(r);if(c){if("boolean"!=typeof c){var s=x(a,c),u=s.valid,l=s.errKey;u||i.push({errorType:"paramsError",errData:"参数"+l+"错误"})}}else i.push({errorType:"linkError",errData:"无效的全局路由"})}return i}(e)),n=P(e)?n.concat(S(e)):n.concat(function(e){var n=[],t=E(e).searchParams.routerUrl;if(!t)return n.push({errorType:"routerUrlError",errData:"未提供routerUrl参数"}),n;var r=decodeURIComponent(t);if(0!==r.indexOf("https://"))return n.push({errorType:"routerUrlError",errData:"routerUrl可能被编码超过1次"}),n;var o=E(r),a=o.pathname,i=o.searchParams,c=i.eaNo,s=i.spuId,u=b(i,["eaNo","spuId"]);if(r.includes("/router/product/ProductDetail")&&("number"!=typeof Number(s)||isNaN(Number(s))))return n.push({errorType:"paramsError",errData:"参数spuId错误"}),n;a.includes("/router/order/ChangeReservationDetailActivity")&&!c&&n.push({errorType:"paramsError",errData:"eaNo缺失"});var l=T(a);if(l){if("boolean"!=typeof l){var d=x(y({eaNo:c,spuId:s},u),l),p=d.valid,f=d.errKey;p||n.push({errorType:"paramsError",errData:"参数"+f+"错误"})}}else n.push({errorType:"linkError",errData:"无效的全局路由"});return n.concat(S(r))}(e)),{errors:n,uri:e}}catch(e){return{errors:[{errData:e.message,errorType:e.type}],uri:null}}},j=p.default=function(e){var n,t,r,o;if(!e)return{result:{errData:"url为空",errorType:"deeplinkError"},pass:!1};try{var a=I(e);return a.errors.length>0?(null===(n=null===window||void 0===window?void 0:window.DUOTEL)||void 0===n||n.send("deeplink_trace",{url:(null==a?void 0:a.uri)||"",errors:null===(t=null==a?void 0:a.errors)||void 0===t?void 0:t.map((function(e){return e.errData})).join("；"),urlRight:!1}),{result:a,pass:!1}):(null===(r=null===window||void 0===window?void 0:window.DUOTEL)||void 0===r||r.send("deeplink_trace",{url:(null==a?void 0:a.uri)||"",errors:(null===(o=null==a?void 0:a.errors)||void 0===o?void 0:o.map((function(e){return e.errData})).join("；"))||"",urlRight:!0}),{result:a,pass:!0})}catch(e){return console.error(e),!1}};!function(e){e.huawei="huawei",e.honor="honor",e.redmi="redmi",e.oneplus="oneplus",e.realme="realme",e.iphone="iphone",e.ipad="ipad",e.oppo="oppo",e.vivo="vivo",e.xiaomi="xiaomi",e.samsung="samsung",e.other="other"}(C||(C={}));var U,L=[{name:C.huawei,key:"huawei"},{name:C.honor,key:"honor"},{name:C.redmi,key:"redmi"},{name:C.oneplus,key:"oneplus"},{name:C.realme,key:" rmx"},{name:C.iphone,key:"iphone"},{name:C.ipad,key:"ipad"},{name:C.oppo,key:"oppo| [a-z]{4,}00 "},{name:C.vivo,key:"vivo| v\\d{4,}a "},{name:C.xiaomi,key:" mix? | m\\d{4}"},{name:C.samsung,key:"sm-|samsung"}];!function(e){e.android="android",e.ios="ios",e.harmony="harmony",e.mac="mac",e.windows="windows"}(U||(U={}));var A,R=[{name:U.android,key:"Android"},{name:U.ios,key:"iPhone OS|iPad; CPU OS"},{name:U.harmony,key:"OpenHarmony"},{name:U.mac,key:"Mac OS X"},{name:U.windows,key:"Windows NT"}];!function(e){e.douyin="douyin",e.kuaishou="kuaishou",e.wechat="wechat",e.sougouBrowser="sougouBrowser",e.weibo="weibo",e.bili="bili",e.baidu="baidu",e.firefox="firefox",e.xiaomi="xiaomi",e.huawei="huawei",e.uc="uc",e.opera="opera",e.edge="edge",e.qqBrowser="qqBrowser",e.qq="qq",e.quark="quark",e.xhs="xhs",e.chrome="chrome",e.safari="safari",e.other="other"}(A||(A={}));var D=[{name:A.douyin,key:"aweme|aweme app_version"},{name:A.kuaishou,key:"Kwai|ksNebula"},{name:A.wechat,key:"MicroMessenger"},{name:A.sougouBrowser,key:"Sogou"},{name:A.weibo,key:"Weibo"},{name:A.bili,key:"BiliApp"},{name:A.baidu,key:"baiduboxapp"},{name:A.firefox,key:"Firefox|FxiOS"},{name:A.xiaomi,key:"MiuiBrowser|mibrowser"},{name:A.uc,key:"UCBrowser|UWS"},{name:A.huawei,key:"HuaweiBrowser"},{name:A.opera,key:"OPT|OPR"},{name:A.edge,key:"Edgi|edgA"},{name:A.qqBrowser,key:"MQQBrowser"},{name:A.qq,key:"QQ"},{name:A.quark,key:"Quark"},{name:A.xhs,key:"discover"},{name:A.chrome,key:"Chrome.*Mobile|CriOS.*Mobile"},{name:A.safari,key:"iPhone.*Safari|iPad.*Safari"}];function N(){var e=navigator.userAgent||"",n={phone_os:"other",os_version:"other",browser_name:A.other,browser_version:"",m_brand:C.other,m_model:"other"};R.find((function(t){return!!M(t.key).test(e)&&(n.phone_os=t.name,n.os_version=z(t.key,e),!0)})),D.find((function(t){return!!M(t.key).test(e)&&(n.browser_name=t.name,n.browser_version=z(t.key,e),!0)}));var t=function(e){var n={brand:C.other,model:"other"};return L.find((function(t){return!!M(t.key).test(e)&&(n.brand=t.name,t.name===C.iphone||t.name===C.ipad?n.model="other":n.model=z(t.key,e),!0)})),n}(e),r=t.brand,o=t.model;return n.m_brand=r,n.m_model=o,n}function M(e){return new RegExp(e,"i")}function z(e,n){var t=function(e){var n=e.split("|").map((function(e){return e+"[^0-9]*"})).join("|");return new RegExp("(".concat(n,")(\\d+(?:[._]?\\d?)+)"),"i")}(e),r=n.match(t);return r?r[2]||"other":""}var q="undefined"!=typeof navigator?navigator.userAgent:"",B=function(e,n){for(var t=window.isNaN,r=(null==e?void 0:e.split("."))||[],o=(null==n?void 0:n.split("."))||[],a=0;a<3;a++){var i=Number(r[a]),c=Number(o[a]);if(i>c)return 1;if(c>i)return-1;if(!t(i)&&t(c))return 1;if(t(i)&&!t(c))return-1}return 0},H=/android/i.test(q),F=/iphone|ipad|ipod/i.test(q),K=/micromessenger\/([\d.]+)/i.test(q),G="undefined"!=typeof window&&(/miniprogram/i.test(q)||"miniprogram"===window.__wxjs_environment),Y=/(weibo).*weibo__([\d.]+)/i.test(q);/(baiduboxapp)\/([\d.]+)/i.test(q),/(HeyTapBrowser)\/([\d.]+)/i.test(q),/qq\/([\d.]+)/i.test(q),/(qqbrowser)\/([\d.]+)/i.test(q),/qzone\/.*_qz_([\d.]+)/i.test(q),/safari/i.test(q)&&/chrome/i.test(q),/chrome\/[\d.]+ mobile safari\/[\d.]+/i.test(q)&&H&&q.indexOf("Version");var J={home:"/home/HomePage"},V={home:"weixin://dl/business/?t=s9bgPoC8W1h"},$="3",W=function(){return{1:"/trend/details",2:"/trend/videoPage",3:"/web/BrowserPage",4:"/product/ProductDetail",6:"/transaction/main",8:"/home/HomePage",9:"/raffle/originalPrice/detail",10:"/trend/postsPage",11:"/raffle/originalPrice/list",12:"/identify/IdentifyDetailsPage",13:"/media/productSearchPhoto",14:"/live/LiveRoomPage",15:"/live/LiveReplayProtratiPage",16:"/trend/UserHomePage",17:"/account/MyCouponPage",18:"/user/scanChristmasTree",19:"/order/buyer/orderList",20:"/order/seller/orderList",21:"/blindBox/HomePage",22:"/product/MultiMakeupsPage",23:"/product/contentGuide",7:/iPhone/i.test(navigator.userAgent)?"/ar":"/home/HomePage",24:"/search/picSearchResult"}};function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function X(){return+new Date+"_"+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-",n=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return"".concat(n()+n()).concat(e).concat(n()).concat(e).concat(n()).concat(e).concat(n()).concat(e).concat(n()+n()+n())}("_")}function Z(e,n){if(!e||!n)throw new Error("请检查入参");return new Promise((function(t,r){var o,a,i,c,s;o=e,a=function(e){e?r(e):t(window[n])},i=document.createElement("script"),c=document.getElementsByTagName("head")[0],s=!1,i.src=o,"function"==typeof a&&(i.onload=i.onreadystatechange=function(){s||i.readyState&&!/loaded|complete/.test(i.readyState)||(i.onload=i.onreadystatechange=null,s=!0,a())},i.onerror=function(e){console.log("js加载失败",e),a(e)}),c.appendChild(i)}))}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,n=e,t={},r=n.split("?")[1];if(r)for(var o,a,i,c=r.split("&"),s=0,u=c.length;s<u;s++)a=(o=c[s].split("="))[0],i=o[1],t[a]=i;return t}function ne(e,n){return ee(n)[e]}function te(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Reflect.ownKeys(n).forEach((function(t){var r=n[t];if(void 0!==r){var o=ne(t,e);if(o)e=e.replace("".concat(t,"=").concat(o),"".concat(t,"=").concat(r));else{var a="".concat(t,"=").concat(r);e.indexOf("?")>0?e+="&".concat(a):e+="?".concat(a)}}})),e}function re(e){var n="return (()=>{with (this) {return ".concat(e,"}})()");try{return new Function(n).bind(this)()}catch(e){}return function(){}}function oe(e){if("object"!==Q(e)||null===e)return e;var n={};for(var t in e){var r=e[t];"string"==typeof r?n[t]=r.trim():"object"===Q(r)&&null!==r?n[t]=oe(r):n[t]=r}return n}function ae(e){try{return e?JSON.stringify(e||{}):""}catch(e){return""}}var ie="https://a.app.qq.com/o/simple.jsp?pkgname=com.shizhuang.duapp",ce="market://details?id=com.shizhuang.duapp",se="appmarket://details?id=com.shizhuang.duapp",ue="https://itunes.apple.com/cn/app/id1012871328",le={path:"/web/BrowserPage",key:"loadUrl"},de="dewuapp",pe={host:"m.poizon.com/router"},fe={host:"m.dewu.com/note"},he={key:"routerUrl"},me="dewulink",ve={host:"m.dewu.com/note"},ye={host:"apk.poizon.com/note"},we="m.poizon.com/router";function _e(e){var n=fe.host;return 0===e.indexOf("https://".concat(n))}function be(e){var n="";return!function(e){var n=me,t=ve.host;return 0===e.indexOf("".concat(n,"://").concat(t))}(e)?!function(e){var n=ye.host;return 0===e.indexOf("https://".concat(n))}(e)?!function(e){var n=le.path;return e.indexOf(n)>-1}(e)?!function(e){var n=de,t=pe.host;return 0===e.indexOf("".concat(n,"://").concat(t))}(e)?_e(e)?n="v1_universal":function(e){var n=_e(e);return(0===e.indexOf("https://")||0===e.indexOf("http://"))&&!n}(e)&&(n="web"):n="v1_scheme":n="v1_load_web":n="v2_universal":n="v2_scheme",n}function ge(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=le.key,r=ne(t,e);if(r){var a=decodeURIComponent(r);a=te(a,n),e=te(e,o({},t,a=encodeURIComponent(a)))}return e}var ke=function(e){try{var n=e.getBoundingClientRect();return{top:n.top,left:n.left,width:n.width,height:n.height}}catch(n){return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}};var xe=function(e){return"data-track-".concat(e)},Te=function(e,n){return n["".concat(e,"Tracks")]?JSON.parse(n["".concat(e,"Tracks")]):null},Oe=function(){function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.analytics=n,this.checkExposure=function(){if(void 0!==("undefined"==typeof window?"undefined":(e=window)&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e))for(var e,n=xe("exposure"),r=document.querySelectorAll("[".concat(n,"]")),o=document.documentElement.scrollTop||document.body.scrollTop,a=r.length,i=0;i<a;i++){var c=r[i],s=ke(c),u=s.top,l=s.left,d=s.width,p=s.height;if(u<=window.innerHeight+o&&u+p>=o&&l<window.innerWidth&&l+d>=0){var f=c.getAttribute(n);if(f){c.removeAttribute(n);var h,m=c.dataset,v=null!==(h=Te("exposure",m))&&void 0!==h?h:m;t.analytics.track(f,v)}}}},this.init()}var n=e.prototype;return n.init=function(){"undefined"!=typeof window&&(this.clickTracker(),this.exposureTracker())},n.clickTracker=function(){var e=this;"undefined"!=typeof window&&(document.body?document.body.addEventListener("click",(function(n){if(n.target){var t=n.composedPath(),r=xe("click"),o=function(e,n){for(var t=e.length,r=0;r<t;r++){if("BODY"===e[r].tagName||"HTML"===e[r].tagName)return null;if(e[r].hasAttribute(n))return e[r]}return null}(t,r);if(o){var a=o.getAttribute(r);if(!a)return;var i,c=o.dataset,s=null!==(i=Te("click",c))&&void 0!==i?i:c;e.analytics.track(a,s)}}})):console.warn("body不存在"))},n.exposureTracker=function(){var e=this;if("undefined"!=typeof window){var n=6,t=function(){n<=0||setTimeout((function(){n--,e.checkExposure(),t()}),500)};t(),window.addEventListener("scroll",this.checkExposure,!0)}},e}();function Se(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Pe(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function Ee(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var Ce=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.trackConfigs={},this.trackInstances=[],this.trackList=[],this.autoTrack=new Oe(this)}var n=e.prototype;return n.use=function(e){this.trackInstances.push(e)},n.addTrackConfig=function(e,n){var t={};return this.trackConfigs[e]=t,Object.keys(n).reduce((function(r,o){return t[o]=n[o],Pe(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Se(e,n,t[n])}))}return e}({},r),Se({},o,(a=o,"".concat(e,"_").concat(a))));var a}),{})},n.track=function(e,n,t){if(!t)if(this.trackInstances.length)for(;this.trackList.length;){var r=this.trackList.shift();this.track(r.eventName,r.dataSet,!0)}else this.trackList.push({eventName:e,dataSet:n});var o=function(e){var n=e.indexOf("_");return{ns:e.slice(0,n),name:e.slice(n+1)}}(e),a=o.ns,i=o.name,c=this.trackConfigs[a];if(c){var s=c[i],u=!0,l=!1,d=void 0;try{for(var p,f=this.trackInstances[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h,m=p.value,v=null!==(h=s(n,m.name))&&void 0!==h?h:{},y=v.event_name,w=Ee(v,["event_name"]),_={name:m.name,event:m.beforeHandleEvent?m.beforeHandleEvent(w):w,eventName:null!=y?y:i};m.track(_.eventName,_.event)}}catch(e){l=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw d}}}},n.checkExposure=function(){this.autoTrack.checkExposure()},e}(),Ie=new Ce;function je(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}var Ue=function e(n,t){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=je({},t,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var i in o)o[i]&&(a+="; "+i,!0!==o[i]&&(a+="="+o[i].split(";")[0]));return document.cookie=e+"="+n.write(r,e)+a}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},o=0;o<t.length;o++){var a=t[o].split("="),i=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(r[c]=n.read(i,c),e===c)break}catch(e){}}return e?r[e]:r}},remove:function(e,n){r(e,"",je({},n,{expires:-1}))},withAttributes:function(n){return e(this.converter,je({},this.attributes,n))},withConverter:function(n){return e(je({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),Le="undefined"!=typeof window||"undefined"!=typeof navigator,Ae=Le&&"undefined"!=typeof performance,Re=Le&&"undefined"!=typeof location;function De(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}))}function Ne(){try{var e,n,t,r,o,a=Le?window:{};if(Le&&(a.$call_union_key||a.$softAdUnionKey))return a.$call_union_key||a.$softAdUnionKey;var i=Le?navigator.userAgent:"",c=Ae&&null!==(e=null!==(n=null===(t=performance)||void 0===t||null===(r=t.timing)||void 0===r?void 0:r.navigationStart)&&void 0!==n?n:null===(o=performance)||void 0===o?void 0:o.timeOrigin)&&void 0!==e?e:0,s=[i,c?"".concat(c):"",Re?location.href:""].filter(Boolean),u=s.length?s.map((function(e){return function(e){for(var n=0,t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return Math.abs(n).toString(16).slice(0,7)}(e)})).join(""):De();return Le&&(window.$call_union_key=u),u}catch(e){return De()}}function Me(e){if(null!=e&&e.lite)return{};var n=N();return{phone_os:n.phone_os,browser_name:n.browser_name,m_brand:n.m_brand}}var ze=function(){return i(i({},Me()),{},{current_url:window.location.href,ua:navigator.userAgent,sk:Ue.get("sk")||"",unionKey:Ne()})};function qe(e){return"[object Object]"===Object.prototype.toString.call(e)}function Be(e){if(qe(e)){var n=function(e){var n="cn-hangzhou.log.aliyuncs.com",t="deeplink-log",r="https://".concat("dw-prd",".").concat(n,"/logstores/").concat(t,"/track?APIVersion=0.6.0");return Object.keys(e).reduce((function(n,t){return"".concat(n,"&").concat(encodeURIComponent(t),"=").concat(qe(e[t])?encodeURIComponent(JSON.stringify(e[t])):encodeURIComponent(e[t]))}),r)}(e);!function(e){(new Image).src=e}(n)}else console.warn("Track data must be a plaint object!")}var He,Fe,Ke,Ge=Ie.addTrackConfig("call-app",{venue_component_content_exposure:function(e){var n=i({block_type:"3552",current_page:"61",venue_page_url:window.location.href,event_name:"venue_component_content_exposure",browser_name:"",m_brand:"",os_version:"",phone_os:""},e);return i(i({},n),ze())},venue_component_content_click:function(e){var n=e.status,t=e.evokeType,r=e.eTId;return i(i({},{block_type:"3552",event_name:"venue_component_content_click",current_page:"61",venue_page_url:window.location.href,status:n,evokeType:t,browser_name:"",m_brand:"",os_version:"",phone_os:"",eTId:r}),ze())},venue_component_content_common:function(e){return i(i({},qe(e)?e:{}),ze())},venue_component_evoke_click:function(e){var n=i({block_type:"3552",event_name:"venue_component_content_click",current_page:"61",venue_page_url:window.location.href,click_type:"evoke_click",browser_name:"",m_brand:"",os_version:"",phone_os:""},e);return i(i({},n),ze())}}),Ye=!1;function Je(){return(Je=n(d.mark((function e(n){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ye){e.next=2;break}return e.abrupt("return");case 2:Ye=!0,"dc_init",null==Ie||Ie.track(Ge.venue_component_content_exposure,n),Be(i(i({},ze()),{},{event_name:"dc_init",e_type:"dewulink"}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){var n=e.type,t=e.url,r=void 0===t?"":t,o=e.landUrl,a=void 0===o?"":o,c=e.landType,s=void 0===c?"":c,u=e.params,l=void 0===u?{}:u,d=e.nativeParams,p=void 0===d?{}:d,f=e.evokeType,h=void 0===f?"":f,m=e.noNeedScene,v=void 0!==m&&m,y=e.eTId,w=void 0===y?"":y,_=l.loadUrl,b=void 0===_?"":_,g=i(i({},ze()),{},{event_name:"dc_evoke",url:r,land_url:a,land_type:s,load_url:decodeURIComponent(b),params:l,native_params:p,no_need_scene:v,e_type:n,evokeType:h,eTId:w});null==Ie||Ie.track(Ge.venue_component_content_click,{status:-1,evokeType:h,eTId:w}),Be(g)}function $e(e){var n=e.type,t=e.url,r=void 0===t?"":t,o=e.landUrl,a=void 0===o?"":o,c=e.landType,s=void 0===c?"":c,u=e.params,l=e.nativeParams,d=void 0===l?{}:l,p=e.noNeedScene,f=void 0!==p&&p,h=e.eTId,m=void 0===h?"":h,v=u.loadUrl,y=void 0===v?"":v;null==Ie||Ie.track(Ge.venue_component_content_click,{status:1,eTId:m}),Be(i(i({},ze()),{},{event_name:"dc_evoke_success",e_type:n,url:r,land_url:a,land_type:s,load_url:decodeURIComponent(y),params:u,native_params:d,no_need_scene:f,eTId:m}))}function We(e){try{null==Ie||Ie.track(Ge.venue_component_content_common,e||{})}catch(e){console.log("track_common error",e)}}function Qe(e){var n=e.type,t=e.url,r=void 0===t?"":t,o=e.landUrl,a=void 0===o?"":o,c=e.landType,s=void 0===c?"":c,u=e.params,l=e.nativeParams,d=void 0===l?{}:l,p=e.noNeedScene,f=void 0!==p&&p,h=e.eTId,m=void 0===h?"":h,v=(u||{}).loadUrl,y=void 0===v?"":v;null==Ie||Ie.track(Ge.venue_component_content_click,{status:0,eTId:m}),Be(i(i({},ze()),{},{event_name:"dc_evoke_fail",e_type:n,url:r,land_url:a,land_type:s,load_url:decodeURIComponent(y),params:u,eTId:m,native_params:d,no_need_scene:f}))}function Xe(e){"undefined"!=typeof window&&window.top&&e&&(window.top.location.href=e)}function Ze(e){var n=document.createElement("a");n.setAttribute("href",e),n.style.display="none",document.body.appendChild(n),n.click()}function en(e){return new Promise((function(n){var t=setTimeout((function(){n(!1)}),e),r=function(){void 0!==He&&document[He]&&(n(!0),clearTimeout(t))};void 0!==Fe?(document.removeEventListener(Fe,r),document.addEventListener(Fe,r)):(window.removeEventListener("pagehide",r),window.addEventListener("pagehide",r))}))}function nn(){var e,n,t,r;return"test"===(e={test:"test",prod:"prod"},n=window.location.host,t=/\/\/(t[0-9]-|dev\.|localhost)/.test(n)||/((2((5[0-5])|([0-4]\d)))|([0-1]?\d{1,2}))(\.((2((5[0-5])|([0-4]\d)))|([0-1]?\d{1,2}))){3}/.test(n),(r=ne("test_env"))&&e[r]?e[r]:t?e.test:e.prod)?"https://t1-m.dewu.net/evoke":"https://fast.dewu.com/evoke"}"undefined"!=typeof document&&(void 0!==document.hidden?(He="hidden",Fe="visibilitychange"):void 0!==document.msHidden?(He="msHidden",Fe="msvisibilitychange"):void 0!==document.webkitHidden?(He="webkitHidden",Fe="webkitvisibilitychange"):void 0!==document.mozHidden&&(He="mozHidden",Fe="mozvisibilitychange")),"undefined"==typeof window||He&&Fe||Be(i(i({},ze()),{},{event_name:"webview_not_support_hidden"}));var tn=["loadUrl"];function rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=me,t=ve.host,r=ye.host,o="".concat(n,"://").concat(t,"?routerUrl=").concat(encodeURIComponent(e)),a="https://".concat(r,"?routerUrl=").concat(encodeURIComponent(e));return{scheme:o,universal:a}}function on(e){var n=e.url,t=e.params,r=de,o=pe.host,a=fe.host,i=function(e){return e.replace(o,we).replace(a,we)},c="";switch(be(n)){case"v2_scheme":case"v2_universal":var s=he.key;if(ne(s,n)){var u=i(n);c=decodeURIComponent(ne(s,u))}break;case"v1_load_web":c=ge(n,t).replace(new RegExp("^".concat(r,"://")),"https://").replace(o,a);break;case"v1_scheme":case"v1_universal":c=te(n,t).replace(new RegExp("^".concat(r,"://")),"https://").replace(o,a);break;case"web":c=te(n,t)}return rn(c=i(c))}function an(e){var n,t=e.landUrl,r=e.params,o=void 0===r?{}:r,a=de,i=pe.host,c=fe.host,s=(null==t||null===(n=t.replace(new RegExp("^".concat(a,"://")),"https://"))||void 0===n?void 0:n.replace(c,i))||"";return rn(s=te(s,o))}function cn(e){var n=e.landType,r=e.params,o=void 0===r?{}:r,a=W(),i=pe.host,c=a[n];c||(n=$,c=a[3]);var s="https://".concat(i).concat(c);if(n+""===$){var u=o,l=u.loadUrl,d=t(u,tn),p=l?decodeURIComponent(l):window.location.href;p=te(p,d),o={loadUrl:encodeURIComponent(p)}}return rn(s=te(s,o))}function sn(e){var n=e.url,t=e.scene,r=e.mpScene,o=e.landUrl,a=e.landType,c=e.nativeParams,s=void 0===c?{}:c,u=fe.host,l="";if(n)l=on(e).scheme;else if(t&&J[t]){l=rn("https://".concat(u).concat(J[t])).scheme}else if(r&&V[r])l=V[r];else if(o)l=an(e).scheme;else if(a)l=cn(e).scheme;else{l=rn("").scheme}var d=N(),p=d.browser_name,f=d.phone_os;return l=U.android===f&&p===A.wechat?te(l,i(i({},s||{}),{},{_t_:Date.now()})):te(l,s)}function un(e){var n=e.url,t=e.scene,r=e.mpScene,o=e.landUrl,a=e.landType,i=e.nativeParams,c=void 0===i?{}:i,s=fe.host,u="";if(n)u=on(e).universal;else if(t&&J[t]){u=rn("https://".concat(s).concat(J[t])).universal}else if(r&&V[r])u=V[r];else if(o)u=an(e).universal;else if(a)u=cn(e).universal;else{u=rn("").universal}return function(e){return e?e.indexOf("?")>-1?"".concat(e,"&cdnabtest=1"):"".concat(e,"?cdnabtest=1"):e}(u=te(u,c))}function ln(e){var n=sn(e);return"".concat(ie,"&android_schema=").concat(encodeURIComponent(n))}var dn=["loadUrl"];function pn(e){var n="",t="",r=e.url,o=e.params,a=de,c=pe.host,s=fe.host,u=le,l=u.path,d=u.key;switch(be(r)){case"v2_scheme":case"v2_universal":var p=ne(he.key,r);if(p){var f=decodeURIComponent(p),h=pn(i(i({},e),{},{url:f}));n=h.scheme,t=h.universal}else n="".concat(a,"://").concat(c,"/home/HomePage"),t="https://".concat(s,"/home/HomePage");break;case"v1_load_web":var m=ge(r,o);n=m.replace("https://","".concat(a,"://")).replace(s,c),t=m.replace("".concat(a,"://"),"https://").replace(c,s);break;case"v1_scheme":case"v1_universal":var v=te(r,o);n=v.replace(/^https:\/\//,"".concat(a,"://")).replace(s,c),t=v.replace(new RegExp("^".concat(a,"://")),"https://").replace(c,s);break;case"web":var y="".concat(l,"?").concat(d,"=").concat(encodeURIComponent(r));n="".concat(a,"://").concat(c).concat(y),t="https://".concat(s).concat(y)}return{scheme:n,universal:t}}function fn(e){var n=e.landUrl,t=e.params,r=void 0===t?{}:t,o=de,a=pe.host,i=fe.host,c=te(n,r);return{scheme:c.replace(/^https:\/\//,"".concat(o,"://")).replace(i,a),universal:c.replace(new RegExp("^".concat(o,"://")),"https://").replace(a,i)}}function hn(e){var n=e.landType,r=e.params,o=void 0===r?{}:r,a=W(),i=de,c=pe.host,s=fe.host,u=a[n];u||(n=$,u=a[3]);var l="".concat(i,"://").concat(c).concat(u),d="https://".concat(s).concat(u);if(n+""===$){var p=o,f=p.loadUrl,h=t(p,dn),m=f?decodeURIComponent(f):window.location.href;m=te(m,h),o={loadUrl:encodeURIComponent(m)}}return{scheme:l=te(l,o),universal:d=te(d,o)}}function mn(){return(mn=n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof window){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!window.location.href.includes("&debug=1")||!window.location.href.includes("spuId=1206358")||window.VConsole){e.next=8;break}return e.next=6,Z("https://h5tools.dewu.com/dw-du-console.js","VConsole");case 6:new(0,e.sent);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function vn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function yn(e,n){if(e){if("string"==typeof e)return vn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?vn(e,n):void 0}}function wn(e){return function(e){if(Array.isArray(e))return vn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(c)throw o}}return a}}(e,n)||yn(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e,null]}))}function gn(){return"undefined"==typeof window||window.location.href.split("?")[0].includes(".com")?"prod":"test"}var kn="function"==typeof XMLHttpRequest?new XMLHttpRequest:null,xn={prod:"https://cdn-config.dewu.com/node-common/configCenter/toufang/h5-ssr-rule.json",test:"https://cdn-config.dewu.com/node-common/t1/configCenter/toufang/h5-ssr-rule.json"};function Tn(e){if(!kn)throw new Error("不在浏览器环境");return xn[e]||(e="prod"),kn.open("GET","".concat(xn[e])),new Promise((function(e,n){kn.onreadystatechange=function(t){if(kn.readyState===XMLHttpRequest.DONE&&200===kn.status)try{var r=JSON.parse(kn.response).data;e(JSON.parse(r))}catch(e){n(e)}},kn.send()}))}function On(){return Sn.apply(this,arguments)}function Sn(){return(Sn=n(d.mark((function e(){var n,t,r,o,a,i,c,s,u;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn(Tn(gn()));case 2:return n=e.sent,(t=_n(n,2))[0],r=t[1],a=(o=null!=r?r:{}).app_version,i=o.rule_url,c=o.permissions_url,s=o.function_url,u=o.update_time,e.abrupt("return",r?{app_version:a,rule_url:i,permissions_url:c,function_url:s,update_time:u}:null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pn={cssContent:'.lds-roller {\n        display: inline-block;\n        position: fixed;\n        left: 50%;\n        top: 50%;\n        transform: translate3d(-50%, -50%, 0);\n        width: 80px;\n        height: 80px;\n        z-index: 99999;\n      }\n      .lds-roller div {\n        animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n        transform-origin: 40px 40px;\n      }\n      .lds-roller div:after {\n        content: " ";\n        display: block;\n        position: absolute;\n        width: 7px;\n        height: 7px;\n        border-radius: 50%;\n        background-color: #01c2c3;\n        opacity: 0.4;\n        margin: -4px 0 0 -4px;\n      }\n      .lds-roller div:nth-child(1) {\n        animation-delay: -0.036s;\n      }\n      .lds-roller div:nth-child(1):after {\n        top: 63px;\n        left: 63px;\n      }\n      .lds-roller div:nth-child(2) {\n        animation-delay: -0.072s;\n      }\n      .lds-roller div:nth-child(2):after {\n        top: 68px;\n        left: 56px;\n      }\n      .lds-roller div:nth-child(3) {\n        animation-delay: -0.108s;\n      }\n      .lds-roller div:nth-child(3):after {\n        top: 71px;\n        left: 48px;\n      }\n      .lds-roller div:nth-child(4) {\n        animation-delay: -0.144s;\n      }\n      .lds-roller div:nth-child(4):after {\n        top: 72px;\n        left: 40px;\n      }\n      .lds-roller div:nth-child(5) {\n        animation-delay: -0.18s;\n      }\n      .lds-roller div:nth-child(5):after {\n        top: 71px;\n        left: 32px;\n      }\n      .lds-roller div:nth-child(6) {\n        animation-delay: -0.216s;\n      }\n      .lds-roller div:nth-child(6):after {\n        top: 68px;\n        left: 24px;\n      }\n      .lds-roller div:nth-child(7) {\n        animation-delay: -0.252s;\n      }\n      .lds-roller div:nth-child(7):after {\n        top: 63px;\n        left: 17px;\n      }\n      .lds-roller div:nth-child(8) {\n        animation-delay: -0.288s;\n      }\n      .lds-roller div:nth-child(8):after {\n        top: 56px;\n        left: 12px;\n      }\n      @keyframes lds-roller {\n        0% {\n          transform: rotate(0deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n    }',htmlContent:'\n      <div class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\n    '},En={htmlContent:'\n        <div class="mini_toast">小程序内无法跳转App<br/>请直接打开得物App</div>',cssContent:".mini_toast {\n        position: fixed;\n        left: 50%;\n        top: 30vh;\n        transform: translate(-50%, 0);\n        height: 40px;\n        z-index: 99999;\n        background-color: rgba(24, 24, 24, 0.7);\n        color: #fff;\n        text-align: center;\n        padding: 6px;\n        border-radius: 6px;\n        display: flex;\n        align-items: center;\n    }"},Cn=function(e){var n=e.closeId,t=e.confirmId,r=e.app_version,o=e.rule_url,a=e.permissions_url,i=e.function_url,c=e.update_time;return{htmlContent:'<div><div class="download_mask_bg"></div><div class="download_container">\n        <img class="download_close" id="'.concat(n,'" src="https://cdn.poizon.com/node-common/b0f2107e-b16a-e597-aab4-de912205e79b-20-20.png" />\n        <div class="download_title">下载得物APP</div>\n        <div class="download_content">\n          <img class="download_icon" src="https://cdn.poizon.com/node-common/653be264-278b-3470-e075-34c3666b16fd-60-60.png" />\n          <div class="download_text">\n            <div class="download_text_title">得物-得到运动x潮流x好物</div>\n            <div class="download_text_info">\n            开发者：上海得物信息集团有限公司  <a href="').concat(o,'">隐私政策</a>｜<a href="').concat(a,'">权限列表</a>｜<a href="').concat(i,'">产品功能</a>  版本:').concat(r,"  更新时间:").concat(c||"2023.11.02",'\n            </div>\n          </div>\n        </div>\n        <button class="download_button" id="').concat(t,'">下载安装包</button>\n    </div></div>'),cssContent:".download {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      top: 0;\n    }\n    .download_container {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      height: 260px;\n      box-sizing: border-box;\n      z-index: 99999;\n      background-color: #fff;\n      padding: 0 12px 34px;\n      border-radius: 12px 12px 0 0;\n    }\n    .download_title {\n      padding: 20px;\n      color: #14151A;\n      text-align: center;\n      font-family: PingFang SC;\n      font-size: 16px;\n      font-style: normal;\n      font-weight: 500;\n      line-height: 20px;\n    }\n    .download_close {\n      position: absolute;\n      right: 20px;\n      width: 20px;\n      height: 20px;\n      top: 20px;\n    }\n    .download_mask_bg {\n        position: absolute;\n        left: 0;\n        top: 0;\n        z-index: 999;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.4);\n    }\n    .download_content {\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 27px;\n    }\n    .download_icon {\n      width: 60px;\n      height: 60px;\n      margin-right: 10px;\n    }\n    .download_text_title {\n      color: #000;\n      font-family: PingFang SC;\n      font-size: 16px;\n      font-style: normal;\n      font-weight: 500;\n      line-height: 20px;\n      margin-bottom: 6px;\n    }\n    .download_text_info {\n      color: #7F7F8E;\n      font-family: PingFang SC;\n      font-size: 11px;\n      font-style: normal;\n      font-weight: 400;\n      line-height: 18px;\n    }\n    .download_button {\n      width: 100%;\n      height: 44px;\n      line-height: 44px;\n      font-family: PingFang SC;\n      font-size: 16px;\n      font-style: normal;\n      font-weight: 500;\n      text-align: center;\n      margin: 0;\n      padding: 0;\n      border-radius: 2px;\n      color: #fff;\n      background: #01C2C3;\n      box-sizing: border-box;\n      border: none;\n    }"}},In="",jn=function(e){var n=e.htmlContent,t=e.cssContent;if(In!==n){In=n;var r=document.createElement("style");r.innerHTML=t;var o=document.createElement("div");return o.innerHTML=n,document.body.appendChild(r),document.body.appendChild(o),function(){try{In="",o&&o.parentNode&&o.parentNode.removeChild(o),r&&r.parentNode&&r.parentNode.removeChild(r)}catch(e){}}}},Un=function(){window._$hideMaskHtmlString=jn({htmlContent:'<div class="wx_mask_container" onclick="try{_$hideMaskHtmlString()}catch{}">\n        <div class="wx_mask_bg"></div>\n        <div class="wx_mask_pop_container">\n            <div class="wx_mask_triangle"></div>\n            <div class="wx_mask_content">\n            <span>点击右上角...按钮<br />\n                选择在浏览器打开\n            </span>\n            </div>\n        </div>\n    </div>',cssContent:".wx_mask_container {\n        position: fixed;\n        left: 0;\n        top: 0;\n        width: 100vw;\n        height: 100vh;\n        z-index: 99999;\n    }\n    .wx_mask_bg {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.4);\n    }\n    .wx_mask_pop_container {\n        position: absolute;\n        top: 2.1vw;\n        right: 4vw;\n    }\n    .wx_mask_triangle {\n        width: 3.2vw;\n        height: 2.1vw;\n        margin-left: 27vw;\n        background-image: url('https://cdn.poizon.com/node-common/35d16d33656144264632dc5179e40a92.png');\n        background-size: 100% 100%;\n    }\n    .wx_mask_content {\n        width: 32vw;\n        height: 11.2vw;\n        padding-top: 1.6vw;\n        font-family: PingFang SC;\n        font-size: 3.2vw;\n        font-style: normal;\n        font-weight: 500;\n        line-height: 4.8vw;\n        text-align: center;\n        color: #ffffff;\n        background-color: #01c2c3;\n    }"})},Ln=function(){var e=jn(En),n=setTimeout((function(){null==e||e(),clearTimeout(n)}),2e3)},An=function(){var e=n(d.mark((function e(n){var t,r,o,a,c,s;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On();case 2:o=e.sent,a=Math.random().toString(),c=Math.random().toString(),s=jn(Cn(i(i({},o),{},{closeId:a,confirmId:c}))),null===(t=document.getElementById(a))||void 0===t||t.addEventListener("click",s),null===(r=document.getElementById(c))||void 0===r||r.addEventListener("click",n);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function Rn(e){return e?Object.keys(e).reduce((function(n,t){return function(e){return"number"!=typeof e&&"boolean"!=typeof e&&(void 0===e||(e instanceof Array?0===e.length:0===Object.keys(e).length))}(e[t])||(n[t]=e[t]),n}),{}):e}var Dn={aTag:Ze,iframe:function(e){Ke||((Ke=document.createElement("iframe")).style.cssText="display:none;border:0;width:0;height:0;",document.body.appendChild(Ke)),Ke.src=e},location:function(e){"undefined"!=typeof window&&e&&(window.location.href=e)},topLocation:Xe,mask:function(){return Un(),!0}};function Nn(e){Ze(e)}var Mn=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};We(i({type:e,os:"android",browser_name:n,currentPage:window.location.href,strategyName:"douyinAndroidAppStore",isLowDevice:localStorage.getItem("isLowEndMachine")||""},t))};function zn(){if(H)Hn();else var e=setTimeout((function(){Hn(),clearTimeout(e)}),500)}var qn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};We({type:"appstore",url:(null==n?void 0:n.url)||(F?ue:ce),currentPage:window.location.href,is_redirected:e?1:0,event_name:"appstore_redirect",e_name:"appstore_redirect",browser_name:null==n?void 0:n.browser_name,phone_os:null==n?void 0:n.phone_os,m_brand:null==n?void 0:n.m_brand,evoke_shop:(null==n?void 0:n.evoke_shop)||0,shop_url:(null==n?void 0:n.shop_url)||""})},Bn=function(e,n,t,r){var a,i,c=(a=r,(o(i={},C.huawei,se),o(i,C.honor,se),o(i,C.vivo,"vivomarket://details?id=com.shizhuang.duapp"),o(i,C.xiaomi,"mimarket://details?id=com.shizhuang.duapp"),i)[a]||ce);Ze(c),en(2500).then((function(o){o?qn(!0,{evoke_shop:2,url:e,browser_name:n,phone_os:t,m_brand:r,shop_url:c}):(qn(!1,{evoke_shop:3,url:e,browser_name:n,phone_os:t,m_brand:r,shop_url:c}),An((function(){Ze("https://apk.dewu.com/duApp/apk/Android_KOL/apk/duapp_release_du.apk")})))}))};function Hn(e){var n=N(),t=n.m_brand,r=n.browser_name,o=n.phone_os;if(en(3e3).then((function(n){return qn(n,{evoke_shop:1,url:e,browser_name:r,phone_os:o,m_brand:t})})),F){if(Y)return Dn.mask();if(r!==A.wechat)return void Ze(e||ue);en(1e3).then((function(e){e||Un()}))}else{if(o===U.harmony)return void Ze(e||"https://appgallery.huawei.com/app/detail?id=com.dewu.hos");if(H){if(r===A.wechat)return void Ze("".concat(ie,"&android_schema=").concat(encodeURIComponent(e)));if(r===A.bili){var a=window.location.href.indexOf("utm_medium=bili_KOC")>-1;return void(window.location.href.indexOf("media=bili")>-1&&!a?Ze("https://apk.dewu.com/duApp/apk/Android_KOL/apk/duapp_release_bilikol.apk"):a&&Ze("https://apk.dewu.com/duApp/apk/Android_KOL/apk/duapp_release_bili8.apk"))}if(r===A.douyin){try{var i=window.DuStrategyRules||{},c="1"===i.switch;console.info("strategyRules",i),c?(Ze(ce),Mn("douyin_appstore_start",r,{strategyRules:i}),en(2500).then((function(e){e?Mn("douyin_appstore_success",r):(Ze("https://apps.bytesfield.com/download/extend/cur/cb48526151b23c0e4a2d7cdfbdc8515c523e2864/douyin_ad30"),Mn("douyin_appstore_fail",r))}))):(Mn("douyin_appstore_miss_strategy",r),Ze("https://apps.bytesfield.com/download/extend/cur/cb48526151b23c0e4a2d7cdfbdc8515c523e2864/douyin_ad30"))}catch(e){Ze("https://apps.bytesfield.com/download/extend/cur/cb48526151b23c0e4a2d7cdfbdc8515c523e2864/douyin_ad30");var s=e instanceof Error?e.message:"unknown error";Mn("douyin_appstore_error",r,{error:s})}return}return r===A.kuaishou?void Ze(ce):r===A.baidu?void An((function(){Ze("https://apk.dewu.com/duApp/apk/Android_KOL/apk/duapp_release_sqbaidu.apk")})):t===C.xiaomi?void Ze("https://apk.dewu.com/duApp/apk/Android_KOL/apk/duapp_release_du.apk"):void Bn(e,r,o,t)}}Ze(e||ce)}function Fn(e,n){var t=function(e){var n=e.url,t=e.landType,r=e.landUrl,o=e.params,a=e.nativeParams,i=Rn({url:n,landType:t,landUrl:r,params:o,nativeParams:a});return i.url&&(i.url=encodeURIComponent(i.url)),i.landUrl&&(i.landUrl=encodeURIComponent(i.landUrl)),i.params&&(i.params=encodeURIComponent(ae(o||{}))),i.nativeParams&&(i.nativeParams=encodeURIComponent(ae(a||{}))),i}(n);return te(e,t)}var Kn=2500,Gn=1e7,Yn={clicked:!1},Jn=function(e,n){We({type:e,os:n,currentPage:window.location.href,strategyName:localStorage.getItem("strategy")||"",isLowDevice:localStorage.getItem("isLowEndMachine")||""})},Vn=ee(),$n=Vn.fromXhsJump,Wn=Vn.toAppStore,Qn=function(){var e=n(d.mark((function e(n){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xe(n),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function Xn(){for(var e,t=N(),r=t.browser_name,o=t.m_brand,a=t.os_version,c=t.phone_os,s=(e=[{phone_os:U.harmony,os_version:[],m_brand:[],browser_name:[A.wechat],evokeType:"mask",useScheme:!0},{phone_os:U.android,os_version:[],m_brand:[],browser_name:[A.wechat],evokeType:"opentag",useScheme:!0},{phone_os:U.ios,os_version:[],m_brand:[],browser_name:[A.wechat],evokeType:-1===B((q.match(/micromessenger\/(\d+\.\d+\.\d+)/i)||[])[1],"7.0.5")?"mask":"topLocation",useScheme:!1},{phone_os:U.ios,os_version:[],m_brand:[],browser_name:[A.weibo],evokeType:"mask",useScheme:!1},{phone_os:U.android,os_version:[],m_brand:[],browser_name:[A.weibo],evokeType:"mask",useScheme:!0},{phone_os:U.ios,os_version:[],m_brand:[],browser_name:[A.kuaishou],evokeType:"topLocation",useScheme:!Yn.clicked,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn("kuaishou","ios"),zn(),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})))]},{phone_os:U.android,os_version:[],m_brand:[],browser_name:[A.kuaishou],evokeType:"topLocation",useScheme:!0,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn("kuaishou","android"),zn(),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})))]},{phone_os:U.android,os_version:[],m_brand:[],browser_name:[A.bili],evokeType:"location",useScheme:!0,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:U.ios,os_version:[],m_brand:[],browser_name:[A.bili],evokeType:"location",useScheme:!0,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:U.ios,os_version:[],m_brand:[],browser_name:[A.douyin],evokeType:"topLocation",useScheme:!(navigator.userAgent.toLowerCase().indexOf("bullet")>-1),failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn("douyin","ios"),zn(),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})))]},{phone_os:U.android,os_version:[],m_brand:[],browser_name:[A.douyin],evokeType:"aTag",useScheme:!0,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn("douyin","android"),zn(),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})))]},{phone_os:U.ios,os_version:[],m_brand:[],browser_name:[A.qq],evokeType:"aTag",useScheme:!0,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:U.ios,os_version:[],m_brand:[],browser_name:[A.safari],evokeType:"topLocation",useScheme:!0,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:U.ios,os_version:[],m_brand:[],browser_name:[A.xhs],evokeType:"topLocation",useScheme:!0,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:U.ios,os_version:[],m_brand:[],browser_name:[A.chrome],evokeType:"topLocation",useScheme:!0,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:U.android,os_version:[],m_brand:[],browser_name:[A.baidu],evokeType:"aTag",useScheme:!0,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:U.android,os_version:[],m_brand:[],browser_name:[],evokeType:"iframe",useScheme:!0,failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))]},{phone_os:U.ios,os_version:[],m_brand:[],browser_name:[],evokeType:"topLocation",useScheme:Boolean($n)||Boolean(Wn),failActions:[n(d.mark((function e(){return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zn(),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))],key:"iosBackPage"}].map((function(e){return i(i({},e),{},{failActions:[].concat(wn(e.failActions||[]),[Qn])})})),e.sort((function(e,n){return Math.min(e.os_version.length,1)+Math.min(e.m_brand.length,1)+Math.min(e.browser_name.length,1)<=Math.min(n.os_version.length,1)+Math.min(n.m_brand.length,1)+Math.min(n.browser_name.length,1)?1:-1}))),u=0;u<s.length;u++){var l=s[u];if((!l.m_brand.length||l.m_brand.includes(o))&&l.phone_os===c.toLocaleLowerCase()&&(!l.browser_name.length||l.browser_name.includes(r))&&(!l.os_version.length||l.os_version.includes(a)))return{evokeType:l.evokeType,useScheme:l.useScheme,failActions:l.failActions||[],key:l.key||u}}return{evokeType:"topLocation",useScheme:!0,failActions:[Qn],key:-1}}var Zn={env:"browser",title:"",timeout:Kn};var et,nt,tt="undefined"!=typeof window&&/duapp/.test(navigator.userAgent);var rt={name:"sensors",beforeHandleEvent:function(e){return e},track:function(e,t){return t.event&&(e=t.event,delete t.event),new Promise(function(){var r=n(d.mark((function n(r){var o;return d.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(et){n.next=3;break}return n.next=3,nt;case 3:null===(o=et)||void 0===o||o.track(e,t,(function(){return r({})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return r.apply(this,arguments)}}())}},ot=function(e){!function(e){if(!tt)window.sensorsDataAnalytic201505||nt?(console.info(window.sensorsDataAnalytic201505,"sensor 1"),et=window.sensorsDataAnalytic201505):nt=Z("https://cdn.dewu.com/node-common/38e2c5d483d006ad23170d8e8ec165cc.min","sensorsDataAnalytic201505").then((function(n){et=n,console.info(n,"sensor 2"),et.init({server_url:"https://sensors.dewu.com/sa?project=".concat("prod"!==e?"default":"production"),is_track_single_page:!0,show_log:"prod"!==e,heatmap:{clickmap:"default",scroll_notice_map:"not_collect"}})}))}(e),Ie.use(rt)};function at(){for(var e=[],n=[],t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return r.forEach((function(t){if(t){var r=t.before,o=t.after;r&&(e=e.concat(r)),o&&(n=n.concat(o))}})),{before:e,after:n}}var it="undefined"!=typeof window&&void 0!==window.location,ct=[{host:"apk.poizon.com",path:"/note"},{host:"m.dewu.com",path:"/note"},{host:"m.dewu.com",path:"/evoke"},{host:"fast.dewu.com",path:"/evoke"}];var st=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};We(i({type:e,os:"ios",currentPage:window.location.href,strategyName:"xhsStrategy",isLowDevice:localStorage.getItem("isLowEndMachine")||"",browser_name:n},t))},ut=function(){var e=n(d.mark((function e(n,t){var r,o;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K?zn():Hn(),e.next=4,en(2500);case 4:r=e.sent,st("xhs_jump_success",t,{jumpType:r?"store":"app",platform:K?"wechat":"normal"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),o=e.t0 instanceof Error?e.t0.message:"unknown error",st("xhs_jump_fail",t,{error:o,platform:K?"wechat":"normal"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,t){return e.apply(this,arguments)}}();function lt(e){return function(e){if(!it)return!1;if("topLocation"!==e)return!1;var n=window.location,t=n.hostname,r=n.pathname;return ct.some((function(e){return t===e.host&&r.startsWith(e.path)}))}(e.evokeType)}var dt=["forceGlobalConfig"],pt=["loadUrl"],ft=["navControl","action","koc","source"];function ht(e){var n=ee(window.location.href),t=n.eFrom,r=n.eTId,o=t||encodeURIComponent(window.location.href);return e.lite||(e.nativeParams=i(i({},e.nativeParams),{},{eFrom:o,eTId:r||localStorage.getItem("eTId"),unionKey:Ne()},Me(e))),i({},e)}var mt=function(){function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"options",void 0),o(this,"isInit",!1),o(this,"eTId",X()),o(this,"evokeTypeMap",i(i({},Dn),{},{mask:function(){Un(),t.stopEvoke()},opentag:function(e,n){var r,o=window.location.href.includes("m.dewu.com/evoke");K&&H&&o?(Un(),t.stopEvoke()):(setTimeout((function(){!function(e){var n=nn();Fn(n,e);var t=un(e).split("?")[1];console.log("haha",un(e)),window.location.href=n+"?"+t+"&opentag=1"}(n)}),150),r={eTId:t.eTId},null==Ie||Ie.track(Ge.venue_component_evoke_click,r))}}));var r={timeout:Kn,type:"dewulink"};localStorage.setItem("eTId",this.eTId),this.options=i(i({},r),n),ot(n.env||"prod"),setTimeout((function(){t.initOptions(r,n)}),10),function(){var e=N(),n=e.phone_os,t=void 0===n?"":n,r=e.browser_name,o=void 0===r?"":r,a=ee(),i=a.xhsJump,c=a.toAppStore;"ios"===t&&(i||c)&&(st("xhs_jump_start",o,{platform:K?"wechat":"normal"}),ut(i,o))}()}var a,c,s,u,l,p,f,h,m,v;return a=e,c=[{key:"injectEnvToParams",value:function(e){var n=ee(window.location.href),t=n.eFrom,r=n.eTId,o=t||encodeURIComponent(window.location.href);return e.lite||(e.nativeParams=i(i({},e.nativeParams),{},{eFrom:o,eTId:r||this.eTId,unionKey:Ne()},Me(e))),i({},e)}},{key:"toYingYongBao",value:function(e){Nn(ln(e))}},{key:"initOptions",value:function(e,n){var r=n.forceGlobalConfig,o=t(n,dt),a=r||Zn;this.options=i(i(i(i({},e),o),a),at(a,o,this.options)),this.options.type=this.options.type||"dewulink",console.log("this.options",this.options),function(e){Je.apply(this,arguments)}({eTId:this.eTId}),this.isInit=!0,setTimeout((function(){return function(){return mn.apply(this,arguments)}()}),500)}},{key:"setOptions",value:function(e){We({fun_name:"index_set_options",event_name:"call_log",info:ae(e)}),this.options=i(i(i({},this.options),e),at(this.options,e))}},{key:"checkOpen",value:(v=n(d.mark((function e(n){var t,r,o,a,c,s,u;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.options,r=t.timeout,o=t.type,a=!1,r===Gn){e.next=11;break}return c=jn(Pn),e.next=6,en(Kn);case 6:s=e.sent,c&&c(),u=i(i({type:o},n),{},{eTId:this.eTId}),s?$e(u):Qe(u),a=!s;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"checkAndExec",value:(m=n(d.mark((function e(n){var t,r,o;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=d.mark((function e(r){var o,a,i,c,s,u,l,p,f,h,m;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n[r],a=o.check,i=o.exec,c=!0,u=(s=a||{}).query,l=s.func,u&&(p=ee(),Object.keys(u).some((function(e){return p[e]!==u[e]+""&&(c=!1),!c}))),!c||"function"!=typeof l){e.next=10;break}return e.next=7,l();case 7:c=e.sent,e.next=15;break;case 10:if(!c||"string"!=typeof l){e.next=15;break}return f=re(l),e.next=14,f();case 14:c=e.sent;case 15:if(!c||!i){e.next=35;break}if(h=i.url,m=i.func,!h){e.next=22;break}t=!1,window.location.href=h,e.next=34;break;case 22:if("string"!=typeof m){e.next=29;break}return e.next=25,re(m)();case 25:!1===e.sent&&(t=!1),e.next=34;break;case 29:if("function"!=typeof m){e.next=34;break}return e.next=32,m();case 32:!1===e.sent&&(t=!1);case 34:return e.abrupt("return","break");case 35:case"end":return e.stop()}}),e)})),o=0;case 3:if(!(o<n.length)){e.next=11;break}return e.delegateYield(r(o),"t0",5);case 5:if("break"!==e.t0){e.next=8;break}return e.abrupt("break",11);case 8:o++,e.next=3;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)})},{key:"beforeEvoke",value:(h=n(d.mark((function e(){var n,t,r;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,!(r=(null===(n=this.options)||void 0===n?void 0:n.before)||!1)){e.next=6;break}return e.next=5,this.checkAndExec(r);case 5:t=e.sent;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"afterEvoke",value:(f=n(d.mark((function e(n){var t,r,o;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,r=at(n,this.options),!(o=r.after).length){e.next=6;break}return e.next=5,this.checkAndExec(o);case 5:t=e.sent;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"stopEvoke",value:function(){this.options.timeout=Gn}},{key:"formatConfig",value:function(e){if(!e)return e;var n=e.landType,t=e.params;return"8"!==String(n)||null!=t&&t.home?t?i(i({},e),{},{params:oe(t)}):e:i(i({},e),{},{params:i(i({},t),{},{home:"mall"})})}},{key:"tempHandlePoplayer",value:function(e){var n=e.params||{},r=n.loadUrl,o=t(n,pt),a=decodeURIComponent(r||"");if(a.indexOf("/h5-growth/wish-tree?navControl=1&action=waterTask&koc=1&source=szytest")>-1){We({fun_name:"index_temp_handle_poplayer",event_name:"call_log",info:ae(e),info_two:a});var c=ee(a),s=c.navControl,u=c.action,l=c.koc,d=c.source,p=t(c,ft),f=a.split("?")[0];return i(i({},e),{},{params:{loadUrl:encodeURIComponent(te(f,{navControl:s,action:u,koc:l,source:d}))},nativeParams:i(i(i({},o),p),e.nativeParams)})}return e}},{key:"evoke",value:(p=n(d.mark((function e(n){var t,r,o,a,c,s,u,l,p,f,h,m;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.tempHandlePoplayer(this.formatConfig(n)),!G){e.next=5;break}return Ln(),this.stopEvoke(),e.abrupt("return");case 5:if(r=Xn(),o=r.evokeType,a=r.useScheme,c=r.failActions,!lt(r)){e.next=11;break}return this.toAppStore(),We({fun_name:"index_stop_evoke_to_store",event_name:"call_log",info:ae(r),evoke_type:o}),e.abrupt("return",!1);case 11:if(t.nativeParams=t.nativeParams||{},s=sn(t),u=un(t),(l=["mask","opentag"]).includes(o)||Ve(i(i({eTId:this.eTId},n),{},{type:this.options.type,evokeType:o})),p=N(),f=p.browser_name,h=p.phone_os,Yn.clicked&&"ios"===h&&f===A.kuaishou&&We({fun_name:"index_kuaishou_ios_twice",event_name:"call_log",info:ae(n),eTId:this.eTId,type:this.options.type,evoke_type:o}),m=this.checkUrl(a?s:u),this.evokeTypeMap[o](m,n),"ios"===h&&f===A.kuaishou&&(Yn.clicked=!0),l.includes(o)){e.next=23;break}return e.abrupt("return",{universalLink:u,schemeURL:s,failActions:c});case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"handleErrors",value:function(e){var n={};return null!=e&&e.find((function(e){return"paramsError"===e.errorType&&"参数spuId错误"===e.errData}))&&(n.spuIdError=!0),We({fun_name:"index_handle_errors",event_name:"call_log",info:ae(n),info_two:ae(e)}),n}},{key:"checkUrl",value:function(e){try{var n=j(e);if(n&&!n.pass){var t,r,o,a,i,c=this.handleErrors(n.result.errors).spuIdError;if(null===(t=window.DUOTEL)||void 0===t||t.send("deeplink_error",{type:"errorlink",url:e,currentPage:window.location.href,errorType:null===(r=n.result)||void 0===r||null===(o=r.errors)||void 0===o?void 0:o.map((function(e){return e.errorType})).join("；"),errorData:null===(a=n.result)||void 0===a||null===(i=a.errors)||void 0===i?void 0:i.map((function(e){return e.errData})).join("；")}),c)return e.startsWith("https")?"https://apk.dewu.com/note":"dewulink://m.dewu.com/note"}return e}catch(n){var s;return null===(s=window.DUOTEL)||void 0===s||s.send("deeplink_error",{type:"errorCode",url:e,currentPage:window.location.href,errorData:n.message}),e}}},{key:"open",value:(l=n(d.mark((function e(n){var t,r,o,a,i;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.noNeedScene){e.next=4;break}return e.abrupt("return");case 4:return n=this.injectEnvToParams(n),e.next=7,this.beforeEvoke();case 7:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,this.evoke(n);case 12:if(t=e.sent){e.next=15;break}return e.abrupt("return");case 15:return t.universalLink,r=t.failActions,e.next=18,this.checkOpen(n);case 18:if(e.sent){e.next=21;break}return e.abrupt("return");case 21:return e.next=23,this.afterEvoke(n);case 23:if(e.sent){e.next=26;break}return e.abrupt("return");case 26:if(o=un(n),null!=r&&r.length){e.next=29;break}return e.abrupt("return");case 29:a=0;case 30:if(!(a<r.length)){e.next=42;break}return i=r[a],e.next=34,i(o);case 34:if(!e.sent){e.next=38;break}return e.abrupt("continue",39);case 38:return e.abrupt("return");case 39:a++,e.next=30;break;case 42:e.next=47;break;case 44:e.prev=44,e.t0=e.catch(0),console.error("open error",e.t0);case 47:case"end":return e.stop()}}),e,this,[[0,44]])}))),function(e){return l.apply(this,arguments)})},{key:"liteOpen",value:(u=n(d.mark((function e(n){var t,r;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Xn(),r=t.evokeType,this.evokeTypeMap[r](n,{});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"generateScheme",value:function(e){return sn(this.injectEnvToParams(e))}},{key:"generateUniversalLink",value:function(e){return We({fun_name:"index_public_generate_universal_link",event_name:"call_log",info:ae(e)}),un(this.injectEnvToParams(e))}},{key:"generateYingYongBao",value:function(e){return We({fun_name:"index_public_generate_ying_yong_bao",event_name:"call_log",info:ae(e)}),ln(e)}},{key:"toAppStore",value:function(e){Hn(e)}},{key:"toMask",value:function(){We({fun_name:"index_public_to_mask",event_name:"call_log",info:"to_mask"}),Dn.mask()}}],s=[{key:"uaParser",value:function(){return N()}},{key:"log",value:function(e){We(e)}},{key:"toAppStore",value:function(e){We({fun_name:"index_to_app_store",event_name:"call_log",info:e}),Hn(e)}},{key:"toYingYongBao",value:function(e){We({fun_name:"index_static_to_ying_yong_bao",event_name:"call_log",info:ae(e)}),Nn(ln(e))}},{key:"toMask",value:function(){We({fun_name:"index_static_to_mask",event_name:"call_log",info:"to_mask"}),Dn.mask()}},{key:"generateScheme",value:function(e){return We({fun_name:"index_static_generate_scheme",event_name:"call_log",info:ae(e)}),sn(ht(e))}},{key:"generateSchemeV1",value:function(e){return We({fun_name:"index_generate_scheme_v1",event_name:"call_log",info:ae(e)}),function(e){var n=e.url,t=e.scene,r=e.mpScene,o=e.landUrl,a=e.landType,i=e.nativeParams,c=void 0===i?{}:i,s=pe.host;return te(n?pn(e).scheme:t&&J[t]?"dewuapp://".concat(s).concat(J[t]):r&&V[r]?V[r]:o?fn(e).scheme:a?hn(e).scheme:"dewuapp://".concat(s).concat(J.home),c)}(ht(e))}},{key:"generateUniversalLink",value:function(e){return We({fun_name:"index_static_generate_universal_link",event_name:"call_log",info:ae(e)}),un(ht(e))}},{key:"generateUniversalLinkV1",value:function(e){return We({fun_name:"index_generate_universal_link_v1",event_name:"call_log",info:ae(e)}),function(e){var n=e.url,t=e.scene,r=e.mpScene,o=e.landType,a=e.landUrl,i=e.nativeParams,c=void 0===i?{}:i,s=fe.host;return te(n?pn(e).universal:t&&J[t]?"https://".concat(s).concat(J[t]):r&&V[r]?V[r]:a?fn(e).universal:o?hn(e).universal:"https://".concat(s).concat(J.home),c)}(ht(e))}}],c&&r(a.prototype,c),s&&r(a,s),Object.defineProperty(a,"prototype",{writable:!1}),e}();return mt}));
