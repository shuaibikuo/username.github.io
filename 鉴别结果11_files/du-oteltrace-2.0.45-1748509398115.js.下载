function _callSuper(e,t,n){return t=_getPrototypeOf(t),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,n||[],_getPrototypeOf(e).constructor):t.apply(e,n))}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new A(r||[]);return i(a,"_invoke",{value:k(e,n,s)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",v="completed",m={};function g(){}function y(){}function _(){}var b={};c(b,a,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(I([])));T&&T!==n&&r.call(T,a)&&(b=T);var w=_.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(i,o,a,s){var u=f(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==_typeof(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function k(t,n,r){var i=p;return function(o,a){if(i===h)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=C(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=h;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?v:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(_typeof(t)+" is not iterable")}return y.prototype=_,i(w,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},S(O.prototype),c(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new O(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),c(w,u,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}
/*!
 * otel.js v2.0.45
 * (c) 2022-2025 dewu-frontend
 * Released under the MIT License.
 */!function(){"use strict";var e=/(d1-)|(d2-)|(t0-)|(t1-)|(t2-)|(pre-)|(cdn-)/,t={rule:/\/([a-zA-Z0-9]*(?!.*(-|_))[0-9][a-zA-Z0-9]*)(?=[^/?]*($|\?))/gm,target:"/**"},n={rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},r=[/app\.dewu/],i=/(chrome|safari|firefox|moz|edge)(?:-extension)?:\/\/(\w+)((?:\/\w+)*\/?)/,o=/\/\/hidden\//,a=/w(\d+)h(\d+)/,s=[/thirdwx/,/qlogo/,/x-oss-process.*resize,w/,/x-oss-process.*resize,h/,/x-oss-process=.*?resize.*?h.*?w/,/x-oss-process.*video.*,w/,/imageView.*w/],u=/\.(jpe?g|png)$/i,c=/\/\/(?:h5static\.dewu\.com|oversea-h5static\.poizon\.com)\/[\w-]+\/([\d.]+)\//,l=/(?:\/[a-zA-Z0-9]+)?;base64,([a-zA-Z0-9+\/=]+)/,f=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},"test","https://t1-otel-trace-h5.shizhuang-inc.net"),"prod","https://prd-otel-h5-public.dewu.com"),"hk","https://hkprd-otel-h5-public.poizon.com"),"sg","https://sgprd-otel-h5-public.poizonapp.com"),"sgPlus","https://sgprd-plus-otel-h5-public.poizon.com"),p=["pre","prod","xdw"],d=[/\/[^/?]+\.{1}[^/.]+(\?.*)?$/,/\/api\/traces/,/\/api\/logs/,/\/api\/metrics/,/\/api\/deviceInfo/,"__vite_ping","performance-monitor.shizhuang-inc.com",".log.aliyuncs.com","sentry","mooncake.shizhuang-inc.com","nps-sys.shizhuang-inc.com","nps.shizhuang-inc","/api/traces","/api/logs","/api/metrics","blob:","/testla-lab-service/api/teslalab/h5/data/upload","/sockjs-node/info","du-img.oss-cn-shanghai.aliyuncs.com","/api/deviceInfo"],h=["sociality-h5-ssr","h5-ssr","h5-growth","duapp-wukong-service","duapp-rn-activity-ssr-service","duapp-h5-deal-service","duapp-loan-h5-node","duapp-rn-activity-service","h5-launch-ssr","h5-newbie","h5-newbie-ssr"],v=["Script error.","Unexpected identifier","The request is not allowed by the user agent or the platform in the current context",/timeout of (\d+)ms exceeded/,"Request failed with status code","Request aborted","NotAllowedError:","NotSupportedError:","Unexpected token","ToutiaoJSBridge","Network Error",/Loading chunk (\d+) failed/,"AbortError:"],m=["Jockey is not defined","Can't find variable: Jockey"],g=["loop limit","Failed to fetch","Load failed","Non-Error promise rejection","Request failed","url is empty","x5onSkinSwitch is not defined","Unexpected identifier","ResizeObserver loop completed with undelivered notifications.","Script error.","Minified React error"],y={userInfoAPI:"/api/v1/h5/luna/user/getLoginUser",userID:"data.id",userName:"data.realname"},_={code:-100000001,message:"THE RESPONSE IS EMPTY"},b=/localhost:\d+/.test(location.host.split(".")[0])?"":location.host.split(".")[0],E="ha_region",T="DUOTELUUID",w="OTEL_SESSIONID",S="DUOTELDEBUG",O=["D0","D1","D2","pr","pre","prod","t0","t1","t2","t3","t4","test","xdw"],k=["aigc/shoe/output/","algo/watermark-remover/","creator/2021/","creator/og/","devops/d-ops-chaos-api/","efe/ee-bi-fe/","esm/module/","efe/ctoo-open-blog-admin/","efe/monitor-improve/","efe/ee-message-center/","efe/service/","efe/ee-message-fe/","efe/public-option-system-fe/","efe/iwork-poster-fe/","efe/blog/","efe/iwork-rdc-fe/","efe/iwork/","efe/efe-service/","efe/duapp-tianwang-front/","efe/duapp-wireless-service/","finance/settlement-web/","finance/gauss-web/","finance/noah-web/","finance/loan-web/","growth/h5-growth-jockey/","growth/x-case-platform/","growth/growth-vue/","growth/strategy/","growth/growth-platform-h5/","growth/cupid-front/","growth/sdk-linker/","growth/sevice/","growth/growth-react/","global/poizon-customs3/","growth/dwworld/","global/global/","growth/h5-growth/","huanran/admin-wash-crm/","huanran/web/","kefu/msd_imAdmin/","kefu/kefu-ticket-manage-sensitiveInfo/","kefu/biz-monitor-workbench/","kefu/bot-admin-platform/","kefu/IMAdmin/","kefu/kefu-ticket-quality-workbench/","kefu/kefu-workforce-management/","kefu/monitor-migrate/","kefu/duapp-ticket-platform-service/","kefu/kefu-one-stop-ticket-platform/","kefu/bot-admin/","kefu/kefu-ticket-manage/","kefu/kefu-voc-workbench/","kefu/merchant_front_prod/","kefu/prod_merchant_admin/","kefu/pre_merchant_admin/","kefu/Custom_h5ImApp_prod/","kefu/merchant_front_pre/","kefu/Custom_h5ImApp/","kefu/merchantAdmin/","kefu/merchantFront/","kefu/App_h5ImApp/","kefu/Open_h5ImApp/","kefu/one-stop/","live/mcn-images/","live/images/","live/platform/","live/live-mcn-management/","marketing/venusbackend/","marketing/nvwa-service/","marketing/node-common/","middleware/dewu-ops360-front/","marketing/breakstone/","marketing/venus/","middleware/cloud-duapp-sms-front/","marketing/phoenix-ssr-poizon/","marketing/phoenix-ssr/","marketing/eos/","questionnaire/wenjuan-fe/","questionnaire/wenjuan/","risk/risk-analysis-front/","risk-center/risk-intelligence-h5/","risk/risk-account-security/","radar-galaxy/galaxy/","supply-chain/scm-identify/","sec/waap/","sec/logcollect/","sociality/sensitive/","supply-chain/bms-pro/","supply-chain/lms-self-admin-new/","sociality/ad-platform/","supply-chain/sdc/","stark/stark-nezha/","supply-chain/scm-cost/","search/search-push-platform/","steps/gondor/","supply-chain/identify-web/","supply-chain/ams-feishu/","supply-chain/db-admin-web/","supply-chain/dp-operate/","sociality/mcn-tourist/","stark/alistun-web/","stark/erp-web/","stark/erp-poizonx-web/","supply-chain/identify-management/","stark/dop-web/","supply-chain/bms-admin/","stark/v2-merchant/","search/transaction/","sociality/nft-admin/","sociality/nft-admin-video/","supply-chain/pms/","supply-chain/identify-platform/","steps/stark-componets/","stark/gondor-v3-shop/","sociality/business-platform-file/","sociality/business-platform/","sociality/web/","sociality/video/","search/knowledgeBase/","supply-chain/scm-cdn/","supply-chain/scm-main/","sec/ueba/","sociality/duapp-preview/","supply-chain/algorithm-platform/","sociality/verify/","sociality/script/","stark/stark-web-temp/","sociality/mcn/","sociality/mcn-file/","supply-chain/ams/","supply-chain/tms-admin/","supply-chain/dms-admin/","sociality/stable-external-web3/","supply-chain/identify-talent/","sociality/sociality-external-platform-img/","sociality/external-platform-file/","supply-chain/lms-admin/","sociality/sociality-h5-ssr/","sociality/sociality-external-platform/","sociality/stable-external-web-v2/","supply-chain/self-service-applets-new/","stark/stark-web/","supply-chain/self-service-applets/","supply-chain/driver-applet/","supply-chain/qms-admin/","supply-chain/scm-hive/","supply-chain/srm-admin/","supply-chain/work-order-admin/","supply-chain/identify-miniapp/","supply-chain/identify-h5/","sociality/stable-external-web/","sociality/oss-platform-2/","sociality/oss-platform/","sociality/stark/","sociality/oss/","toufang/materialManage/","toufang/beagle/","trade/pns/","toufang/bussiness/","toufang/material-manage/","trade/gondor/","toufang/ueba-test/","toufang/kol-manage/","toufang/kol-manage-react/","trade/oss-adapter-admin/","toufang/xingqiao/","trade/oss-admin-test/","toufang/ad-serving-manage/","trade/oss-platform/","web/og/mcn/","web/2021/talent/","web/og/talent/"],C=Object.prototype.toString,R=function(e){return C.call(e).slice(8,-1)};function P(e){return function(t){return C.call(t)==="[object ".concat(e,"]")}}var A={isNumber:P("Number"),isString:P("String"),isBoolean:P("Boolean"),isNull:P("Null"),isUndefined:P("Undefined"),isSymbol:P("Symbol"),isFunction:P("Function"),isObject:P("Object"),isArray:P("Array"),isProcess:P("process"),isWindow:P("Window"),isBigInt:function(e){return"bigint"==typeof e},isNaN:function(e){return A.isNumber(e)&&e!=e}},I=function(){return navigator.onLine},L="undefined"!=typeof window&&"undefined"!=typeof document;var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Math.random()*t<=e};var N=function(){if(L)return window}();function D(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function j(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;var M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cn",n=function(e){return"cn"===t?e:"".concat(t).concat(e)};return e?e.toLowerCase().includes("xdw")?n("xdw"):e.toLowerCase().includes("pre")?n("pre"):e.toLowerCase().includes("pr")?n("prod"):n("test"):e},U=function(){var e=Object.values(O).find((function(e){return(location.host+location.pathname).includes(e)}));return M(e)||"t1"},H=function(){var e=localStorage.getItem(T);if(!e){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};e="".concat(t()+t(),"-").concat(t(),"-").concat(t(),"-").concat(t(),"-").concat(t()+t()+t(),"-").concat(Date.now()),localStorage.setItem(T,e)}return e},B=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return z()||"PAGEID_".concat(Date.now(),"_").concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()+e()+e())},F=function(){var e=null===document||void 0===document?void 0:document.querySelector('meta[name="node-trace-sessionid"]');return e&&(null==e?void 0:e.content)?null==e?void 0:e.content:""},z=function(){var e=null===document||void 0===document?void 0:document.querySelector('meta[name="node-trace-pageid"]');return e&&(null==e?void 0:e.content)?null==e?void 0:e.content:""},q="<anonymous>";function V(e){try{return e&&"function"==typeof e&&e.name||q}catch(e){return q}}function Z(){return"undefined"==typeof document||null==document.location?"":document.location.href}function X(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r)}function G(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.removeEventListener(t,n,r)}var W=function(e,t){try{var n,r=e,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(A.isFunction(o))r=o(e);else{var a=o.rule,s=o.target;r=r.replace(a,s)}}}catch(e){i.e(e)}finally{i.f()}return r}catch(t){return e}};var J=function(e){if(e){var t={},n=e.split("?")[1];return n&&n.split("&").forEach((function(e){var n=e.split("=");t[n[0]]=n[1]})),t}},K=function(e){return _toConsumableArray(new Set(e))},Q=function(e,t){if(!e||!t)return!1;if((A.isString(t)||t.source||A.isFunction(t))&&(t=[t]),!A.isArray(t))return console.warn("[otel] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var n=[],r=0;r<t.length;r++){var i=t[r];if(A.isString(i))n.push(i.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(i&&i.source)n.push(i.source);else if(i&&A.isFunction(i))return i(e)}var o=new RegExp(n.join("|"),"i");return!!(n.length&&o.test&&o.test(e))},Y=function(e,t){return"object"!==_typeof(e)?"":t.split(".").reduce((function(e,t){return e&&e[t]}),e)},$=function(e){var t=JSON.stringify(e);return new Blob([t],{type:"application/json"}).size>65536},ee="DUOTEL Logger",te=function(){function e(){var t=this;if(_classCallCheck(this,e),this.enabled=(null==N?void 0:N.DUOTELDEBUG)||localStorage.getItem(S)||!1,this._console={},N.console=console||N.console,console||N.console){["log","debug","info","warn","error","assert"].forEach((function(e){e in N.console&&(t._console[e]=N.console[e])}))}}return _createClass(e,[{key:"disable",value:function(){this.enabled=!1}},{key:"bindOptions",value:function(e){this.enabled=(null==N?void 0:N.DUOTELDEBUG)||localStorage.getItem(S)||e}},{key:"enable",value:function(){this.enabled=!0}},{key:"getEnableStatus",value:function(){return this.enabled}},{key:"log",value:function(){var e;if(this.enabled){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._console).log.apply(e,["".concat(ee,"[Log]:")].concat(n))}}},{key:"warn",value:function(){var e;if(this.enabled){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._console).warn.apply(e,["".concat(ee,"[Warn]:")].concat(n))}}},{key:"error",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._console).error.apply(e,["".concat(ee,"[Error]:")].concat(n))}}]),e}(),ne=new te;function re(e,t){try{e()}catch(e){ne.log("nativeTryCatch",e),t&&t(e)}}var ie,oe=function(){if(L){var e=N.navigator.userAgent;return/duapp/.test(e)}return!1},ae=function(){var e=N.navigator.userAgent||"",t=null;return(t=function(){if(L){var e=N.navigator.userAgent;return/OpenHarmony|HarmonyOS|HMOS/i.test(e)}return!1}()?/\/realV([0-9]{1,2}.[0-9]{1,2}.[0-9]{1,2})/gm.exec(e):/(Dsphere|duapp)\/[\d._]+/gm.exec(e))?_slicedToArray(t,1)[0].toString().replace(/[^0-9|_.]/g,"").replace(/_/g,"."):"-"},se=function(e,t){for(var n=e.toString().split("."),r=t.toString().split("."),i=0,o=Math.max(n.length,r.length);i<o;i++){var a=n[i],s=r[i];if(void 0!==a&&void 0===s)return 1;if(void 0===a&&void 0===s)return 0;if(void 0===a&&void 0!==s)return-1;if(+a>+s)return 1;if(+a!=+s&&+a<+s)return-1}return 0},ue=function(){var e,t=(e=(navigator.userAgent||"").match(/Chrom(?:(e|ium))\/([0-9.]+)/))?e[2]:"";return!t||se(t,"88.0.4324.104")>=0},ce=function(){return new Promise((function(e){var t=null===document||void 0===document?void 0:document.querySelector('meta[name="BUILD_VERSION"]');t&&(null==t?void 0:t.content)?e(null==t?void 0:t.content):setTimeout((function(){var t=Array.from(null===document||void 0===document?void 0:document.querySelectorAll("script")).filter((function(e){return c.test(e.src)})).map((function(e){return e.src.match(c)[1]}))[0];if(t)e(t);else{var n=Array.from(null===document||void 0===document?void 0:document.querySelectorAll("link")).filter((function(e){return c.test(e.href)})).map((function(e){return e.href.match(c)[1]}))[0];e(n||"")}}),10)}))},le=function(){return new Promise((function(e){var t=H();try{var n=N.sessionStorage.getItem("DUOTEL_USERID_CACHE");if(n)return void e(n);var r=ne.getEnableStatus();oe()&&N.Jockey&&!r?(N.Jockey.on("getPlatformInfoCallback",(function(n){var r;try{var i=(null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.userId)||"";i?(window.sessionStorage.setItem("DUOTEL_USERID_CACHE",i),e(String(i))):e(t)}catch(n){e(t)}})),N.Jockey.send("getPlatformInfo")):e(t)}catch(n){e(t)}}))},fe="user-agent",pe="",de="function",he="undefined",ve="object",me="string",ge="browser",ye="cpu",_e="device",be="engine",Ee="os",Te="result",we="name",Se="type",Oe="vendor",ke="version",Ce="architecture",Re="major",Pe="model",Ae="console",Ie="mobile",Le="tablet",xe="smarttv",Ne="wearable",De="xr",je="embedded",Me="inapp",Ue="brands",He="formFactors",Be="fullVersionList",Fe="platform",ze="platformVersion",qe="bitness",Ve="sec-ch-ua",Ze=Ve+"-full-version-list",Xe=Ve+"-arch",Ge=Ve+"-"+qe,We=Ve+"-form-factors",Je=Ve+"-"+Ie,Ke=Ve+"-"+Pe,Qe=Ve+"-"+Fe,Ye=Qe+"-version",$e=[Ue,Be,Ie,Pe,Fe,ze,Ce,He,qe],et="Amazon",tt="Apple",nt="ASUS",rt="BlackBerry",it="Google",ot="Huawei",at="Lenovo",st="Honor",ut="LG",ct="Microsoft",lt="Motorola",ft="Nvidia",pt="OnePlus",dt="OPPO",ht="Samsung",vt="Sharp",mt="Sony",gt="Xiaomi",yt="Zebra",_t="Chrome",bt="Chromium",Et="Chromecast",Tt="Firefox",wt="Opera",St="Facebook",Ot="Sogou",kt="Mobile ",Ct=" Browser",Rt="Windows",Pt=("undefined"==typeof window?"undefined":_typeof(window))!==he&&window.navigator?window.navigator:void 0,At=Pt&&Pt.userAgentData?Pt.userAgentData:void 0,It=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},Lt=function(e,t){if(_typeof(e)===ve&&e.length>0){for(var n in e)if(jt(e[n])==jt(t))return!0;return!1}return!!Nt(e)&&-1!==jt(t).indexOf(jt(e))},xt=function e(t,n){for(var r in t)return/^(browser|cpu|device|engine|os)$/.test(r)||!!n&&e(t[r])},Nt=function(e){return _typeof(e)===me},Dt=function(e){if(e){for(var t=[],n=Ht(/\\?\"/g,e).split(","),r=0;r<n.length;r++)if(n[r].indexOf(";")>-1){var i=Ft(n[r]).split(";v=");t[r]={brand:i[0],version:i[1]}}else t[r]=Ft(n[r]);return t}},jt=function(e){return Nt(e)?e.toLowerCase():e},Mt=function(e){return Nt(e)?Ht(/[^\d\.]/g,e).split(".")[0]:void 0},Ut=function(e){for(var t in e){var n=e[t];_typeof(n)==ve&&2==n.length?this[n[0]]=n[1]:this[n]=void 0}return this},Ht=function(e,t){return Nt(t)?t.replace(e,pe):t},Bt=function(e){return Ht(/\\?\"/g,e)},Ft=function(e,t){if(Nt(e))return e=Ht(/^\s\s*/,e),_typeof(t)===he?e:e.substring(0,500)},zt=function(e,t){if(e&&t)for(var n,r,i,o,a,s,u=0;u<t.length&&!a;){var c=t[u],l=t[u+1];for(n=r=0;n<c.length&&!a&&c[n];)if(a=c[n++].exec(e))for(i=0;i<l.length;i++)s=a[++r],_typeof(o=l[i])===ve&&o.length>0?2===o.length?_typeof(o[1])==de?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3===o.length?_typeof(o[1])!==de||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4===o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},qt=function(e,t){for(var n in t)if(_typeof(t[n])===ve&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(Lt(t[n][r],e))return"?"===n?void 0:n}else if(Lt(t[n],e))return"?"===n?void 0:n;return t.hasOwnProperty("*")?t["*"]:e},Vt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Zt={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":void 0},Xt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[ke,[we,kt+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[ke,[we,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[we,ke],[/opios[\/ ]+([\w\.]+)/i],[ke,[we,wt+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[ke,[we,wt+" GX"]],[/\bopr\/([\w\.]+)/i],[ke,[we,wt]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[ke,[we,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[ke,[we,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[we,ke],[/quark(?:pc)?\/([-\w\.]+)/i],[ke,[we,"Quark"]],[/\bddg\/([\w\.]+)/i],[ke,[we,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[ke,[we,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[ke,[we,"WeChat"]],[/konqueror\/([\w\.]+)/i],[ke,[we,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[ke,[we,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[ke,[we,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[ke,[we,"Smart "+at+Ct]],[/(avast|avg)\/([\w\.]+)/i],[[we,/(.+)/,"$1 Secure"+Ct],ke],[/\bfocus\/([\w\.]+)/i],[ke,[we,Tt+" Focus"]],[/\bopt\/([\w\.]+)/i],[ke,[we,wt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[ke,[we,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[ke,[we,"Dolphin"]],[/coast\/([\w\.]+)/i],[ke,[we,wt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[ke,[we,"MIUI"+Ct]],[/fxios\/([\w\.-]+)/i],[ke,[we,kt+Tt]],[/\bqihoobrowser\/?([\w\.]*)/i],[ke,[we,"360"]],[/\b(qq)\/([\w\.]+)/i],[[we,/(.+)/,"$1Browser"],ke],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[we,/(.+)/,"$1"+Ct],ke],[/samsungbrowser\/([\w\.]+)/i],[ke,[we,ht+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[ke,[we,Ot+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[we,Ot+" Mobile"],ke],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[we,ke],[/(lbbrowser|rekonq)/i],[we],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[ke,we],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[we,St],ke,[Se,Me]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[we,ke,[Se,Me]],[/\bgsa\/([\w\.]+) .*safari\//i],[ke,[we,"GSA"],[Se,Me]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[ke,[we,"TikTok"],[Se,Me]],[/\[(linkedin)app\]/i],[we,[Se,Me]],[/(chromium)[\/ ]([-\w\.]+)/i],[we,ke],[/headlesschrome(?:\/([\w\.]+)| )/i],[ke,[we,_t+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[we,_t+" WebView"],ke],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[ke,[we,"Android"+Ct]],[/chrome\/([\w\.]+) mobile/i],[ke,[we,kt+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[we,ke],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[ke,[we,kt+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[we,kt+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[ke,we],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[we,[ke,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[we,ke],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[we,kt+Tt],ke],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[we,"Netscape"],ke],[/(wolvic|librewolf)\/([\w\.]+)/i],[we,ke],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[ke,[we,Tt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[we,[ke,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[we,[ke,/[^\d\.]+./,pe]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[Ce,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[Ce,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[Ce,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[Ce,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[Ce,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[Ce,/ower/,pe,jt]],[/ sun4\w[;\)]/i],[[Ce,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[Ce,jt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[Pe,[Oe,ht],[Se,Le]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[Pe,[Oe,ht],[Se,Ie]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[Pe,[Oe,tt],[Se,Ie]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[Pe,[Oe,tt],[Se,Le]],[/(macintosh);/i],[Pe,[Oe,tt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[Pe,[Oe,vt],[Se,Ie]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[Pe,[Oe,st],[Se,Le]],[/honor([-\w ]+)[;\)]/i],[Pe,[Oe,st],[Se,Ie]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[Pe,[Oe,ot],[Se,Le]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[Pe,[Oe,ot],[Se,Ie]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[Pe,/_/g," "],[Oe,gt],[Se,Le]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[Pe,/_/g," "],[Oe,gt],[Se,Ie]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[Pe,[Oe,dt],[Se,Ie]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[Pe,[Oe,qt,{OnePlus:["304","403","203"],"*":dt}],[Se,Le]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[Pe,[Oe,"Vivo"],[Se,Ie]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[Pe,[Oe,"Realme"],[Se,Ie]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[Pe,[Oe,lt],[Se,Ie]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[Pe,[Oe,lt],[Se,Le]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[Pe,[Oe,ut],[Se,Le]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[Pe,[Oe,ut],[Se,Ie]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[Pe,[Oe,at],[Se,Le]],[/(nokia) (t[12][01])/i],[Oe,Pe,[Se,Le]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[Pe,/_/g," "],[Se,Ie],[Oe,"Nokia"]],[/(pixel (c|tablet))\b/i],[Pe,[Oe,it],[Se,Le]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[Pe,[Oe,it],[Se,Ie]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[Pe,[Oe,mt],[Se,Ie]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[Pe,"Xperia Tablet"],[Oe,mt],[Se,Le]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[Pe,[Oe,pt],[Se,Ie]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[Pe,[Oe,et],[Se,Le]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[Pe,/(.+)/g,"Fire Phone $1"],[Oe,et],[Se,Ie]],[/(playbook);[-\w\),; ]+(rim)/i],[Pe,Oe,[Se,Le]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[Pe,[Oe,rt],[Se,Ie]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[Pe,[Oe,nt],[Se,Le]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[Pe,[Oe,nt],[Se,Ie]],[/(nexus 9)/i],[Pe,[Oe,"HTC"],[Se,Le]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[Oe,[Pe,/_/g," "],[Se,Ie]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[Pe,[Oe,"TCL"],[Se,Le]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[Pe,[Oe,"TCL"],[Se,Ie]],[/(itel) ((\w+))/i],[[Oe,jt],Pe,[Se,qt,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[Pe,[Oe,"Acer"],[Se,Le]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[Pe,[Oe,"Meizu"],[Se,Ie]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[Pe,[Oe,"Ulefone"],[Se,Ie]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[Pe,[Oe,"Energizer"],[Se,Ie]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[Pe,[Oe,"Cat"],[Se,Ie]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[Pe,[Oe,"Smartfren"],[Se,Ie]],[/droid.+; (a(?:015|06[35]|142p?))/i],[Pe,[Oe,"Nothing"],[Se,Ie]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[Oe,Pe,[Se,Le]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[Oe,Pe,[Se,Ie]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[Oe,Pe,[Se,Le]],[/(surface duo)/i],[Pe,[Oe,ct],[Se,Le]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[Pe,[Oe,"Fairphone"],[Se,Ie]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[Pe,[Oe,ft],[Se,Le]],[/(sprint) (\w+)/i],[Oe,Pe,[Se,Ie]],[/(kin\.[onetw]{3})/i],[[Pe,/\./g," "],[Oe,ct],[Se,Ie]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[Pe,[Oe,yt],[Se,Le]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[Pe,[Oe,yt],[Se,Ie]],[/smart-tv.+(samsung)/i],[Oe,[Se,xe]],[/hbbtv.+maple;(\d+)/i],[[Pe,/^/,"SmartTV"],[Oe,ht],[Se,xe]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[Oe,ut],[Se,xe]],[/(apple) ?tv/i],[Oe,[Pe,tt+" TV"],[Se,xe]],[/crkey.*devicetype\/chromecast/i],[[Pe,Et+" Third Generation"],[Oe,it],[Se,xe]],[/crkey.*devicetype\/([^/]*)/i],[[Pe,/^/,"Chromecast "],[Oe,it],[Se,xe]],[/fuchsia.*crkey/i],[[Pe,Et+" Nest Hub"],[Oe,it],[Se,xe]],[/crkey/i],[[Pe,Et],[Oe,it],[Se,xe]],[/droid.+aft(\w+)( bui|\))/i],[Pe,[Oe,et],[Se,xe]],[/(shield \w+ tv)/i],[Pe,[Oe,ft],[Se,xe]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[Pe,[Oe,vt],[Se,xe]],[/(bravia[\w ]+)( bui|\))/i],[Pe,[Oe,mt],[Se,xe]],[/(mi(tv|box)-?\w+) bui/i],[Pe,[Oe,gt],[Se,xe]],[/Hbbtv.*(technisat) (.*);/i],[Oe,Pe,[Se,xe]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[Oe,Ft],[Pe,Ft],[Se,xe]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[Pe,[Se,xe]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[Se,xe]],[/(ouya)/i,/(nintendo) (\w+)/i],[Oe,Pe,[Se,Ae]],[/droid.+; (shield)( bui|\))/i],[Pe,[Oe,ft],[Se,Ae]],[/(playstation \w+)/i],[Pe,[Oe,mt],[Se,Ae]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[Pe,[Oe,ct],[Se,Ae]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[Pe,[Oe,ht],[Se,Ne]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[Oe,Pe,[Se,Ne]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[Pe,[Oe,dt],[Se,Ne]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[Pe,[Oe,tt],[Se,Ne]],[/(opwwe\d{3})/i],[Pe,[Oe,pt],[Se,Ne]],[/(moto 360)/i],[Pe,[Oe,lt],[Se,Ne]],[/(smartwatch 3)/i],[Pe,[Oe,mt],[Se,Ne]],[/(g watch r)/i],[Pe,[Oe,ut],[Se,Ne]],[/droid.+; (wt63?0{2,3})\)/i],[Pe,[Oe,yt],[Se,Ne]],[/droid.+; (glass) \d/i],[Pe,[Oe,it],[Se,De]],[/(pico) (4|neo3(?: link|pro)?)/i],[Oe,Pe,[Se,De]],[/; (quest( \d| pro)?)/i],[Pe,[Oe,St],[Se,De]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[Oe,[Se,je]],[/(aeobc)\b/i],[Pe,[Oe,et],[Se,je]],[/(homepod).+mac os/i],[Pe,[Oe,tt],[Se,je]],[/windows iot/i],[[Se,je]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[Pe,[Se,qt,{mobile:"Mobile",xr:"VR","*":Le}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[Se,Le]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[Se,Ie]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[Pe,[Oe,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[ke,[we,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[we,ke],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[ke,[we,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[we,ke],[/ladybird\//i],[[we,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[ke,we]],os:[[/microsoft (windows) (vista|xp)/i],[we,ke],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[we,[ke,qt,Vt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[ke,qt,Vt],[we,Rt]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[ke,/_/g,"."],[we,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[we,"macOS"],[ke,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[ke,[we,Et+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[ke,[we,Et+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[ke,[we,Et+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[ke,[we,Et+" Linux"]],[/crkey\/([\d\.]+)/i],[ke,[we,Et]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[ke,we],[/(ubuntu) ([\w\.]+) like android/i],[[we,/(.+)/,"$1 Touch"],ke],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[we,ke],[/\(bb(10);/i],[ke,[we,rt]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[ke,[we,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[ke,[we,Tt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[ke,[we,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[ke,[we,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[we,"Chrome OS"],ke],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[we,ke],[/(sunos) ?([\w\.\d]*)/i],[[we,"Solaris"],ke],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[we,ke]]},Gt=(ie={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}},Ut.call(ie.init,[[ge,[we,ke,Re,Se]],[ye,[Ce]],[_e,[Se,Pe,Oe]],[be,[we,ke]],[Ee,[we,ke]]]),Ut.call(ie.isIgnore,[[ge,[ke,Re]],[be,[ke]],[Ee,[ke]]]),Ut.call(ie.isIgnoreRgx,[[ge,/ ?browser$/i],[Ee,/ ?os$/i]]),Ut.call(ie.toString,[[ge,[we,ke]],[ye,[Ce]],[_e,[Oe,Pe]],[be,[we,ke]],[Ee,[we,ke]]]),ie),Wt=function(e,t){var n=Gt.init[t],r=Gt.isIgnore[t]||0,i=Gt.isIgnoreRgx[t]||0,o=Gt.toString[t]||0;function a(){Ut.call(this,n)}return a.prototype.getItem=function(){return e},a.prototype.withClientHints=function(){return At?At.getHighEntropyValues($e).then((function(t){return e.setCH(new Jt(t,!1)).parseCH().get()})):e.parseCH().get()},a.prototype.withFeatureCheck=function(){return e.detectFeature().get()},t!=Te&&(a.prototype.is=function(e){var t=!1;for(var n in this)if(this.hasOwnProperty(n)&&!Lt(r,n)&&jt(i?Ht(i,this[n]):this[n])==jt(i?Ht(i,e):e)){if(t=!0,e!=he)break}else if(e==he&&t){t=!t;break}return t},a.prototype.toString=function(){var e=pe;for(var t in o)_typeof(this[o[t]])!==he&&(e+=(e?" ":pe)+this[o[t]]);return e||he}),At||(a.prototype.then=function(e){var t=this,n=function(){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])};n.prototype={is:a.prototype.is,toString:a.prototype.toString};var r=new n;return e(r),r}),new a};function Jt(e,t){if(e=e||{},Ut.call(this,$e),t)Ut.call(this,[[Ue,Dt(e[Ve])],[Be,Dt(e[Ze])],[Ie,/\?1/.test(e[Je])],[Pe,Bt(e[Ke])],[Fe,Bt(e[Qe])],[ze,Bt(e[Ye])],[Ce,Bt(e[Xe])],[He,Dt(e[We])],[qe,Bt(e[Ge])]]);else for(var n in e)this.hasOwnProperty(n)&&_typeof(e[n])!==he&&(this[n]=e[n])}function Kt(e,t,n,r){return this.get=function(e){return e?this.data.hasOwnProperty(e)?this.data[e]:void 0:this.data},this.set=function(e,t){return this.data[e]=t,this},this.setCH=function(e){return this.uaCH=e,this},this.detectFeature=function(){if(Pt&&Pt.userAgent==this.ua)switch(this.itemType){case ge:Pt.brave&&_typeof(Pt.brave.isBrave)==de&&this.set(we,"Brave");break;case _e:!this.get(Se)&&At&&At[Ie]&&this.set(Se,Ie),"Macintosh"==this.get(Pe)&&Pt&&_typeof(Pt.standalone)!==he&&Pt.maxTouchPoints&&Pt.maxTouchPoints>2&&this.set(Pe,"iPad").set(Se,Le);break;case Ee:!this.get(we)&&At&&At[Fe]&&this.set(we,At[Fe]);break;case Te:var e=this.data,t=function(t){return e[t].getItem().detectFeature().get()};this.set(ge,t(ge)).set(ye,t(ye)).set(_e,t(_e)).set(be,t(be)).set(Ee,t(Ee))}return this},this.parseUA=function(){return this.itemType!=Te&&zt.call(this.data,this.ua,this.rgxMap),this.itemType==ge&&this.set(Re,Mt(this.get(ke))),this},this.parseCH=function(){var e=this.uaCH,t=this.rgxMap;switch(this.itemType){case ge:case be:var n,r=e[Be]||e[Ue];if(r)for(var i in r){var o=r[i].brand||r[i],a=r[i].version;this.itemType!=ge||/not.a.brand/i.test(o)||n&&(!/chrom/i.test(n)||o==bt)||(o=qt(o,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome"}),this.set(we,o).set(ke,a).set(Re,Mt(a)),n=o),this.itemType==be&&o==bt&&this.set(ke,a)}break;case ye:var s=e[Ce];s&&(s&&"64"==e[qe]&&(s+="64"),zt.call(this.data,s+";",t));break;case _e:if(e[Ie]&&this.set(Se,Ie),e[Pe]&&(this.set(Pe,e[Pe]),!this.get(Se)||!this.get(Oe))){var u={};zt.call(u,"droid 9; "+e[Pe]+")",t),!this.get(Se)&&u.type&&this.set(Se,u.type),!this.get(Oe)&&u.vendor&&this.set(Oe,u.vendor)}if(e[He]){var c;if("string"!=typeof e[He])for(var l=0;!c&&l<e[He].length;)c=qt(e[He][l++],Zt);else c=qt(e[He],Zt);this.set(Se,c)}break;case Ee:var f=e[Fe];if(f){var p=e[ze];f==Rt&&(p=parseInt(Mt(p),10)>=13?"11":"10"),this.set(we,f).set(ke,p)}this.get(we)==Rt&&"Xbox"==e[Pe]&&this.set(we,"Xbox").set(ke,void 0);break;case Te:var d=this.data,h=function(t){return d[t].getItem().setCH(e).parseCH().get()};this.set(ge,h(ge)).set(ye,h(ye)).set(_e,h(_e)).set(be,h(be)).set(Ee,h(Ee))}return this},Ut.call(this,[["itemType",e],["ua",t],["uaCH",r],["rgxMap",n],["data",Wt(this,e)]]),this}function Qt(e,t,n){if(_typeof(e)===ve?(xt(e,!0)?(_typeof(t)===ve&&(n=t),t=e):(n=e,t=void 0),e=void 0):_typeof(e)!==me||xt(t,!0)||(n=t,t=void 0),n&&_typeof(n.append)===de){var r={};n.forEach((function(e,t){r[t]=e})),n=r}if(!(this instanceof Qt))return new Qt(e,t,n).getResult();var i=_typeof(e)===me?e:n&&n[fe]?n[fe]:Pt&&Pt.userAgent?Pt.userAgent:pe,o=new Jt(n,!0),a=t?function(e,t){var n={},r=t;if(!xt(t))for(var i in r={},t)for(var o in t[i])r[o]=t[i][o].concat(r[o]?r[o]:[]);for(var a in e)n[a]=r[a]&&r[a].length%2==0?r[a].concat(e[a]):e[a];return n}(Xt,t):Xt,s=function(e){return e==Te?function(){return new Kt(e,i,a,o).set("ua",i).set(ge,this.getBrowser()).set(ye,this.getCPU()).set(_e,this.getDevice()).set(be,this.getEngine()).set(Ee,this.getOS()).get()}:function(){return new Kt(e,i,a[e],o).parseUA().get()}};return Ut.call(this,[["getBrowser",s(ge)],["getCPU",s(ye)],["getDevice",s(_e)],["getEngine",s(be)],["getOS",s(Ee)],["getResult",s(Te)],["getUA",function(){return i}],["setUA",function(e){return Nt(e)&&(i=e.length>500?Ft(e,500):e),this}]]).setUA(i),this}Qt.VERSION="2.0.2",Qt.BROWSER=It([we,ke,Re,Se]),Qt.CPU=It([Ce]),Qt.DEVICE=It([Pe,Oe,Se,Ae,Ie,xe,Le,Ne,je]),Qt.ENGINE=Qt.OS=It([we,ke]);var Yt,$t,en,tn=function(){var e=(navigator.userAgent||"").toLowerCase(),t=function(t){return t.test(e)},n=function(t){var n=e.match(t);if(n)return n.toString().replace(/[^0-9|_.]/g,"").replace(/_/g,".")},r=Qt(e),i=r.browser,o=r.device,a=r.engine,s=r.os,u=function(e){return e?e.toLowerCase():"unknown"};var c=oe()?"站内":"站外",l=function(){var e,n=null===(e=null==s?void 0:s.name)||void 0===e?void 0:e.toLowerCase();return"windows"===n||"mac os"===n||"linux"===n?"desktop":"android"===n||"ios"===n||t(/mobile/g)?"mobile":"unknow"}(),f=function(){var e="",t="";return oe()?(e="duapp",t=ae()):!function(){if(L){var e=N.navigator.userAgent;return/Dsphere/.test(e)}return!1}()?(e=u(i.name),t=u(i.version)):(e="Dsphere",t=ae()),{shell:e,shellVs:t}}(),p=f.shell,d=f.shellVs,h=function(){var e="";return t(/applewebkit/g)?t(/edge/g)?e="edge":t(/opr/g)?e="opera":t(/chrome/g)?e="chrome":t(/safari/g)&&(e="safari"):t(/gecko/g)&&t(/firefox/g)?e="firefox":t(/presto/g)?e="opera":t(/trident|compatible|msie/g)&&(e="iexplore"),e}(),v=function(e){return"chrome"===e?n(/chrome\/[\d._]+/g):"safari"===e?n(/version\/[\d._]+/g):"firefox"===e?n(/firefox\/[\d._]+/g):"opera"===e?n(/opr\/[\d._]+/g):"iexplore"===e?n(/(msie [\d._]+)|(rv:[\d._]+)/g):"edge"===e?n(/edge\/[\d._]+/g):"unknow"}(h);return{userAgent:navigator.userAgent,screenWidth:window.screen.width,screenHeight:window.screen.height,engine:u(a.name),engineVs:u(a.version),platform:l,supporter:h,supporterVs:v,device:u(o.model),deviceVendor:u(o.vendor),deviceType:u(o.type),shell:p,shellVs:d,system:u(s.name),systemVs:u(s.version),netWork:c}},nn=function(e){try{var t=JSON.parse(e);if(t&&A.isObject(t))return t}catch(e){return{}}},rn=function(e){try{return e&&A.isString(e)?JSON.parse(e):e}catch(t){return e}},on=function(e){return A.isString(e)?e:JSON.stringify(e)},an=function(e,t){return new Promise((function(n,r){try{var i=new XMLHttpRequest,o=t||{},a=o.body,s=o.headers,u=o.method,c=void 0===u?"GET":u,l=a?JSON.stringify(a):"";for(var f in i.open(c,e),s)i.setRequestHeader(f,s[f]);i.send("POST"===c?l:""),i.onreadystatechange=function(){if(4===i.readyState){var t={statusText:i.statusText,responseHeaders:i.getAllResponseHeaders(),status:i.status,url:e};0===i.status?r(Object.assign({type:"network_error",message:"网络连接问题或请求被中断或跨域问题"},t)):200===i.status?n(nn(i.responseText)||i.responseText):r(Object.assign({type:"request_failed",message:"HTTP错误 ".concat(i.status)},t))}}}catch(e){r(e)}}))},sn=function(e,t,n){return new Promise((function(r,i){navigator.sendBeacon(e,new Blob([JSON.stringify(t)],n))?r({}):i({type:"sendBeacon_error",message:"function"==typeof navigator.sendBeacon?"navigator.sendBeacon 调用失败":"navigator.sendBeacon 未定义",status:"function"==typeof navigator.sendBeacon?-200001:-200002})}))},un=function e(t,n){var r=t.id?"#"+t.id:"",i=t.className&&"string"==typeof t.className?"."+t.className.split(" ").join("."):"",o=("string"==typeof t.tagName?t.tagName.toLowerCase():"")+r+i;return t.parentNode&&t.parentNode.tagName&&n-1!=0?e(t.parentNode,n-1)+" > "+o:o};function cn(e){var t;return e?e.id?"#".concat(e.id):e.className&&"string"==typeof e.className?".".concat(e.className.split(" ").filter((function(e){return!!e})).join(".")):null===(t=e.nodeName)||void 0===t?void 0:t.toLowerCase():""}!function(e){e[e.Normal=1]="Normal",e[e.High=60]="High",e[e.Highest=120]="Highest"}(Yt||(Yt={})),function(e){e.Viewport="viewport",e.ViewportTop80="viewport_top_80",e.FirstScreen="first_screen",e.FirstScreenTop80="first_screen_top_80"}($t||($t={})),function(e){e[e.CONSOLE_ERROR_LEVEL=1]="CONSOLE_ERROR_LEVEL",e[e.REJECTION_ERROR_LEVEL=10]="REJECTION_ERROR_LEVEL",e[e.JS_ERROR_LEVEL=20]="JS_ERROR_LEVEL",e[e.CUSTOM_ERROR_LEVEL=100]="CUSTOM_ERROR_LEVEL"}(en||(en={}));var ln=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},200,"请求成功"),600,"请求暂不支持，jsbRequest开关未命中复用客户端网络组件能力"),601,"签名错误"),602,"缺少必要参数"),603,"url不在白名单内"),604,"在黑名单内"),605,"Request Body过大"),610,"异常错误"),408,"请求超时"),fn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function pn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dn=Object.prototype.hasOwnProperty;function hn(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function vn(e){try{return encodeURIComponent(e)}catch(e){return null}}var mn=function(e,t){t=t||"";var n,r,i=[];for(r in"string"!=typeof t&&(t="?"),e)if(dn.call(e,r)){if((n=e[r])||null!=n&&!isNaN(n)||(n=""),r=vn(r),n=vn(n),null===r||null===n)continue;i.push(r+"="+n)}return i.length?t+i.join("&"):""},gn=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var i=hn(t[1]),o=hn(t[2]);null===i||null===o||i in r||(r[i]=o)}return r};function yn(){var e=_slicedToArray((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("?"),2),t=e[0],n=void 0===t?"":t,r=e[1],i=gn(void 0===r?"":r);return i["x-oss-process"],n+mn(i,!0)}var _n=["SCRIPT","NOSCRIPT","STYLE","META","HEAD","LINK"],bn="duotel_mutation_pc",En=L?document.documentElement.clientHeight||window.innerHeight:0,Tn=L?document.documentElement.clientWidth||window.innerWidth:0,wn={SVG:Yt.High,IMG:Yt.High,CANVAS:Yt.High,OBJECT:Yt.Highest,EMBED:Yt.Highest,VIDEO:Yt.Highest},Sn=En*Tn,On=["IMG","VIDEO","EMBED"];function kn(e){return!!e&&e.indexOf("//")>=0}function Cn(e){if(!e)return!0;var t=e.tagName&&e.tagName.toUpperCase?e.tagName.toUpperCase():"";return _n.indexOf(t)>=0}function Rn(e,t){if(!e||Cn(e))return!1;var n,r;r=bn,(n=e)&&r&&n.dataset&&(null!=n.getAttribute(r)||null!=n.dataset[r])||function(e,t,n){e&&t&&e.dataset&&(e.dataset[t]=n)}(e,bn,"".concat(t));for(var i=e.children||[],o=0;o<i.length;o++)Rn(i[o],t)}function Pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if(e&&!Cn(e)){var t,n;n=bn,(t=e)&&n&&t.dataset&&delete t.dataset[n];for(var r=e.children||[],i=0;i<r.length;i++)Pn(r[i])}}function An(e){return function(e){var t=performance.getEntriesByType("mark").filter((function(e){return 0===e.name.indexOf(bn)})),n=t[e];return n?n.startTime:0}(Number(function(e,t){if(e&&t&&e.dataset)return e.dataset[t]}(e,bn)))}function In(e){var t=function(e,t){if(window.getComputedStyle)return window.getComputedStyle(e)[t]}(e,"backgroundImage");if(!t||"none"===t)return"";var n=t;try{n=(n=n.replace(/url/i,"")).replace(/['"()]/g,"")}finally{return n}}function Ln(e){var t,n=e.offsetWidth,r=e.offsetHeight,i=e.offsetLeft,o=e.offsetTop;if(!e.offsetParent||"BODY"===(null===(t=e.offsetParent.tagName)||void 0===t?void 0:t.toUpperCase()))return{top:o,left:i,width:n,height:r};var a=Ln(e.offsetParent);return{top:o+a.top,left:i+a.left,width:n,height:r}}function xn(e,t,n,r,i){return function(e,t,n,r,i){return e<=0&&n<=0||e>=i&&n>=i||r<=0&&t<=0||r>=Tn&&t>=Tn}(e,t+n,e+r,t,i)}function Nn(e){var t=e.fmp;e.firstInput;return t}function Dn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null==e?0:Number(e.toFixed(t))}var jn,Mn={exports:{}};jn=Mn,function(){var e="undefined"!=typeof window&&window===this?this:void 0!==fn&&null!=fn?fn:this,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function n(){n=function(){},e.Symbol||(e.Symbol=i)}var r=0;function i(e){return"jscomp_symbol_"+(e||"")+r++}function o(){n();var r=e.Symbol.iterator;r||(r=e.Symbol.iterator=e.Symbol("iterator")),"function"!=typeof Array.prototype[r]&&t(Array.prototype,r,{configurable:!0,writable:!0,value:function(){return a(this)}}),o=function(){}}function a(t){var n=0;return function(t){return o(),(t={next:t})[e.Symbol.iterator]=function(){return this},t}((function(){return n<t.length?{done:!1,value:t[n++]}:{done:!0}}))}function s(e){o();var t=e[Symbol.iterator];return t?t.call(e):a(e)}function u(e){if(!(e instanceof Array)){e=s(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var c=0,l="img script iframe link audio video source".split(" ");function f(e,t){for(var n=(e=s(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||f(n.children,t))return!0;return!1}function p(e,t){if(2<e.length)return performance.now();for(var n=[],r=(t=s(t)).next();!r.done;r=t.next())r=r.value,n.push({timestamp:r.start,type:"requestStart"}),n.push({timestamp:r.end,type:"requestEnd"});for(r=(t=s(e)).next();!r.done;r=t.next())n.push({timestamp:r.value,type:"requestStart"});for(n.sort((function(e,t){return e.timestamp-t.timestamp})),e=e.length,t=n.length-1;0<=t;t--)switch(r=n[t],r.type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return r.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function d(e){e=e||{},this.w=!!e.useMutationObserver,this.u=e.minValue||null,e=window.__tti&&window.__tti.e;var t=window.__tti&&window.__tti.o;this.a=e?e.map((function(e){return{start:e.startTime,end:e.startTime+e.duration}})):[],t&&t.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,function(e,t){var n=XMLHttpRequest.prototype.send,r=c++;XMLHttpRequest.prototype.send=function(i){for(var o=[],a=0;a<arguments.length;++a)o[a-0]=arguments[a];var s=this;return e(r),this.addEventListener("readystatechange",(function(){4===s.readyState&&t(r)})),n.apply(this,o)}}(this.m.bind(this),this.l.bind(this)),function(e,t){var n=fetch;fetch=function(r){for(var i=[],o=0;o<arguments.length;++o)i[o-0]=arguments[o];return new Promise((function(r,o){var a=c++;e(a),n.apply(null,[].concat(u(i))).then((function(e){t(a),r(e)}),(function(e){t(e),o(e)}))}))}}(this.m.bind(this),this.l.bind(this)),function(e){e.c=new PerformanceObserver((function(t){for(var n=(t=s(t.getEntries())).next();!n.done;n=t.next())if("resource"===(n=n.value).entryType&&(e.b.push({start:n.fetchStart,end:n.responseEnd}),v(e,p(e.g,e.b)+5e3)),"longtask"===n.entryType){var r=n.startTime+n.duration;e.a.push({start:n.startTime,end:r}),v(e,r+5e3)}})),e.c.observe({entryTypes:["longtask","resource"]})}(this),this.w&&(this.h=function(e){var t=new MutationObserver((function(t){for(var n=(t=s(t)).next();!n.done;n=t.next())("childList"==(n=n.value).type&&f(n.addedNodes,l)||"attributes"==n.type&&l.includes(n.target.tagName.toLowerCase()))&&e(n)}));return t.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t}(this.B.bind(this)))}function h(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=p(e.g,e.b);v(e,Math.max(n+5e3,t))}function v(e,t){!e.i||e.v>t||(clearTimeout(e.j),e.j=setTimeout((function(){var t=performance.timing.navigationStart,n=p(e.g,e.b);if(t=(window.a&&window.a.A?1e3*window.a.A().C-t:0)||performance.timing.domContentLoadedEventEnd-t,e.u)var r=e.u;else r=performance.timing.domContentLoadedEventEnd?(r=performance.timing).domContentLoadedEventEnd-r.navigationStart:null;var i=performance.now();null===r&&v(e,Math.max(n+5e3,i+1e3));var o=e.a;(n=5e3>i-n||5e3>i-(n=o.length?o[o.length-1].end:t)?null:Math.max(n,r))&&(e.s(n),clearTimeout(e.j),e.i=!1,e.c&&e.c.disconnect(),e.h&&e.h.disconnect()),v(e,performance.now()+1e3)}),t-performance.now()),e.v=t)}d.prototype.getFirstConsistentlyInteractive=function(){var e=this;return new Promise((function(t){e.s=t,"complete"==document.readyState?h(e):window.addEventListener("load",(function(){h(e)}))}))},d.prototype.m=function(e){this.f.set(e,performance.now())},d.prototype.l=function(e){this.f.delete(e)},d.prototype.B=function(){v(this,performance.now()+5e3)},e.Object.defineProperties(d.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(u(this.f.values()))}}});var m={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in window?new d(e).getFirstConsistentlyInteractive():Promise.resolve(null)}};jn.exports?jn.exports=m:window.ttiPolyfill=m}();var Un=pn(Mn.exports);function Hn(e){return!!performance&&!!performance[e]}function Bn(){return Hn("mark")&&Hn("now")&&Hn("measure")&&Hn("clearMarks")&&Hn("getEntries")&&Hn("getEntriesByType")}function Fn(){var e=performance.timeOrigin;if("number"!=typeof e){var t=performance;e=t.timing&&t.timing.fetchStart}return e}var zn=function(e){return Promise.race([Un.getFirstConsistentlyInteractive({minValue:e}),new Promise((function(t){return setTimeout((function(){return t(e)}),1e3)}))])};function qn(e){return new Promise((function(t,n){var r=document.createElement("script");function i(){t(),a()}function o(t){n(t||new Error("loadScriptError,URL:".concat(e))),a()}function a(){r.removeEventListener("load",i),r.removeEventListener("error",o)}r.type="text/javascript",r.readyState?r.onreadystatechange=function(){"loaded"===r.readyState||"complete"===r.readyState?t():n(new Error("loadScriptError,URL:".concat(e))),r.onreadystatechange=null}:(r.addEventListener("load",i),r.addEventListener("error",o)),r.src=e,document.head&&document.getElementsByTagName("head")[0].appendChild(r)}))}var Vn=function(e){return["hkprod","hkpre"].includes(e)?f.hk:["sgprod","sgpre"].includes(e)?f.sg:["sgprd-plusprod","sgprd-pluspre"].includes(e)?f.sgPlus:e&&p.includes(e.toLowerCase())?f.prod:f.test},Zn=function(e){return"".concat(Vn(e),"/api/metrics")},Xn=function(e){return j(void 0,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,an("https://cdn-config.dewu.com/node-common/configCenter/h5-fes/".concat(e,".json"));case 3:return n=t.sent,r=n.data,i=rn(r)||{},t.abrupt("return",Promise.resolve(i));case 9:return t.prev=9,t.t0=t.catch(0),ne.log("getConfigCenter error:",t.t0),t.abrupt("return",Promise.resolve(null));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))},Gn=0,Wn=function(){function e(){_classCallCheck(this,e),this.dep=new Map}return _createClass(e,[{key:"watch",value:function(e,t){var n=this.dep.get(e);n?this.dep.set(e,n.concat(t)):this.dep.set(e,[t])}},{key:"offWatch",value:function(e){this.dep.has(e)&&this.dep.delete(e)}},{key:"notify",value:function(e,t){var n=this.dep.get(e);e&&n&&n.forEach((function(n){re((function(){n(t)}),(function(t){ne.log("Subscribe.notify：监听事件的回调函数发生错误\neventName:".concat(e,"\nName: ").concat(V(n),"\nError: ").concat(t))}))}))}}]),e}(),Jn="2.0.45",Kn=function(){function e(t){var n;_classCallCheck(this,e),this.pageId=B(),this.sessionId=function(){var e,t=Date.now(),n=F()||sessionStorage.getItem(w),r=!1;if(n){var i=null===(e=n.split("_"))||void 0===e?void 0:e[0];r=i&&t-+i<=2592e5}if(!n||!r){var o=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};n="".concat(Date.now(),"_").concat(o()+o(),"-").concat(o(),"-").concat(o(),"-").concat(o(),"-").concat(o()+o()+o()),sessionStorage.setItem(w,n)}return n}(),this.uuid=H(),this.useXHR=!A.isFunction(navigator.sendBeacon)||!ue(),this.SERVICE_NAME="",this.isComplete=!1,this.sample=100,this.getUserDone=!1,this.responseMap={},this.plugins=[],this._incompleteRequest=new Map,this.subscribe=new Wn,this.version=Jn,this.options=t,this.SERVICE_NAME=this.options.appId||(null===(n=null==N?void 0:N.DU_OTEL_CONFIG)||void 0===n?void 0:n.appId)||b,ne.bindOptions(t.debug),this._registPatchListeners()}return _createClass(e,[{key:"_beforeRequestCallback",value:function(e,t){this._incompleteRequest.set(e,t)}},{key:"_afterRequestCallback",value:function(e){this._incompleteRequest.get(e)&&this._incompleteRequest.delete(e)}},{key:"_registPatchListeners",value:function(){var e,t,n,r,i,o;e=this._beforeRequestCallback.bind(this),t=this._afterRequestCallback.bind(this),n=XMLHttpRequest.prototype.open,r=XMLHttpRequest.prototype.send,i=XMLHttpRequest.prototype.setRequestHeader,o=Gn++,XMLHttpRequest.prototype.send=function(e){this.body=e?on(e):e,r.apply(this,arguments)},XMLHttpRequest.prototype.open=function(r,i){var a=this;this.requestHeader={},this.url=i,e(o,{url:i,method:r,requestType:"xhr"}),this.addEventListener("readystatechange",(function(){if(4===a.readyState){t(o);var e=a.getAllResponseHeaders()||"";if(e){var n=e.trim().split(/[\r\n]+/),r={};n.forEach((function(e){var t=e.split(": "),n=t.shift(),i=t.join(": ");r[n]=i})),a.responseHeader=r}}})),n.apply(this,arguments)},XMLHttpRequest.prototype.setRequestHeader=function(e,t){this.requestHeader[e]=t,i.apply(this,arguments)},function(e,t){var n=fetch;fetch=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return new Promise((function(r,o){var a=Gn++,s=i[0],u=i[1];e(a,{url:s,method:(null==u?void 0:u.method)||"get",requestType:"fetch"}),n.apply(void 0,i).then((function(e){t(a),r(e)}),(function(e){t(a),o(e)}))}))}}(this._beforeRequestCallback.bind(this),this._afterRequestCallback.bind(this))}},{key:"use",value:function(e){var t,n,r;return j(this,void 0,void 0,_regeneratorRuntime().mark((function i(){var o,a,s,u=this;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this.plugins=e,o=_createForOfIteratorHelper(e),i.prev=2,s=_regeneratorRuntime().mark((function e(){var i,o,s,c,l,f;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.value,e.next=3,null===(t=null==i?void 0:i.isPluginEnable)||void 0===t?void 0:t.apply(u);case 3:if(o=e.sent,ne.log("plugin",i.name,o),o){e.next=8;break}return null===(n=null==i?void 0:i.destroy)||void 0===n||n.call(u),e.abrupt("return",0);case 8:return e.next=10,null===(r=null==i?void 0:i.isPluginRegist)||void 0===r?void 0:r.apply(u);case 10:if(s=e.sent,ne.log("plugin isRegist",i.name,s),!s){e.next=14;break}return e.abrupt("return",0);case 14:c=u.subscribe.notify.bind(u.subscribe),i.monitor.call(u,c),l=function(){for(var e,t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=null===(e=i.dataTransform)||void 0===e?void 0:e.apply(u,r);null===(t=i.dataSend)||void 0===t||t.call(u,c,a)},u.subscribe.watch(i.name,l),(null==i?void 0:i.receiveBroadcast)&&(f=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];null===(e=null==i?void 0:i.receiveBroadcast)||void 0===e||e.call(u,c,n)},u.subscribe.watch("broadcast",f));case 19:case"end":return e.stop()}}),e)})),o.s();case 5:if((a=o.n()).done){i.next=12;break}return i.delegateYield(s(),"t0",7);case 7:if(0!==i.t0){i.next=10;break}return i.abrupt("continue",10);case 10:i.next=5;break;case 12:i.next=17;break;case 14:i.prev=14,i.t1=i.catch(2),o.e(i.t1);case 17:return i.prev=17,o.f(),i.finish(17);case 20:case"end":return i.stop()}}),i,this,[[2,14,17,20]])})))}},{key:"getOptions",value:function(){return this.options}},{key:"isInit",value:function(){return Boolean(this.options.appId)&&Boolean(this.options.env)}},{key:"isOutRange",value:function(){var e=this.options.grayRatio;return 100!==e&&!x(e)}}]),e}(),Qn=nn(localStorage.getItem("DUOTELCACHE")),Yn=_createClass((function e(){_classCallCheck(this,e),this.appId="",this.appVersion="",this.env="",this.type="C",this.debug=!1,this.userId=(null==Qn?void 0:Qn.userId)||0,this.userName=(null==Qn?void 0:Qn.userName)||"",this.email="",this.departmentId="",this.businessType="",this.grayRatio=100,this.dynamic=!1,this.area="cn",this.ignoreUrls=[],this.ignoreErrors=[],this.urlHelper=[t],this.apiHelper=[n],this.consoleError=!0,this.transformConsoleError2Error=!1,this.corsUrls=[],this.enableRecord=!0,this.release="",this.prefix="",this.userInfo=y,this.onBeforeBuild=null,this.onBeforeSend=null,this.onError=null,this.onCustomError=null})),$n=function(){function e(t,n){_classCallCheck(this,e),this.client=t,this._timer=null,this.uuid=H(),this.metrics=[],this._scheduledDelayMillis=2e3,this._isBeforeUnload=!1,this._useXHR=!1;this.options=Object.assign({batch:!1,maxCache:2e3,exportSize:10},n),this._useXHR=t.useXHR,this.onInit()}return _createClass(e,[{key:"onInit",value:function(){var e=this;if("undefined"!=typeof document){X(N,"beforeunload",(function(){N.setTimeout((function(){e.metrics.length&&e.request(e.metrics)}),0)}))}}},{key:"merge",value:function(e){this.options=Object.assign({},this.options,e)}},{key:"request",value:function(e){return j(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i,o,a,s;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.options,r=n.appName,i=n.env,o=n.globalTags,a={appName:r,env:i,globalTags:Object.assign(Object.assign({},o),{uuid:this.uuid,href:Z()}),metrics:e},s=Zn(i),!this._useXHR&&!this._isBodyTooLarge(a)){t.next=7;break}return t.abrupt("return",an(s,{body:a,method:"POST",headers:{"Content-Type":"application/json"}}));case 7:return t.abrupt("return",sn(s,a,{type:"application/json"}));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"_clearTimer",value:function(){this._timer&&(clearTimeout(this._timer),this._timer=void 0,this._isBeforeUnload=!1)}},{key:"_isBodyTooLarge",value:function(e){return $(e)&&this.client.isSendByXHR()}},{key:"send",value:function(e,t,n){var r=this.options.maxCache;e?this.metrics.length>r?ne.log("metrics maxCache",this.metrics.length):(this.metrics.push({key:e,tags:t,timestamp:Date.now(),fields:n||{count:1}}),this.maybeStartTimer()):ne.warn("METRICS INFO: key is required!")}},{key:"maybeStartTimer",value:function(){var e=this;if(!this._timer){var t=this._isBeforeUnload?0:this._scheduledDelayMillis;this._timer=setTimeout((function(){e._flushOneBatch().then((function(){e.metrics.length>0&&(e._clearTimer(),e.maybeStartTimer())})).catch((function(t){console.info("DUOTEL METRICS _maybeStartTimer error",t),e._clearTimer()}))}),t)}}},{key:"_flushOneBatch",value:function(){var e=this,t=this.options.exportSize;return this._clearTimer(),0===this.metrics.length?Promise.resolve():new Promise((function(n,r){var i=setTimeout((function(){r(new Error("Timeout"))}),3e4);e.request(e.metrics.splice(0,t)).then((function(){clearTimeout(i),n()})).catch((function(){r("DUOTEL METRICS _batchSpansSend reject")}))}))}}]),e}();var er="?";function tr(e,t,n,r){var i={filename:e,function:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}var nr=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,rr=/\((\S*)(?::(\d+))(?::(\d+))\)/,ir=[30,function(e){var t=nr.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){var n=rr.exec(t[2]);n&&(t[2]=n[1],t[3]=n[2],t[4]=n[3])}var r=_slicedToArray(fr(t[1]||er,t[2]),2),i=r[0];return tr(r[1],i,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],or=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ar=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,sr=[50,function(e){var t=or.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var n=ar.exec(t[3]);n&&(t[1]=t[1]||"eval",t[3]=n[1],t[4]=n[2],t[5]="")}var r=t[3],i=t[1]||er,o=_slicedToArray(fr(i,r),2);return i=o[0],tr(r=o[1],i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],ur=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,cr=[ir,sr,[40,function(e){var t=ur.exec(e);return t?tr(t[2],t[1]||er,+t[3],t[4]?+t[4]:void 0):void 0}]],lr=xr.apply(void 0,cr),fr=function(e,t){var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:er,n?"safari-extension:".concat(t):"safari-web-extension:".concat(t)]:[e,t]},pr=80,dr=50;function hr(e){if("object"===_typeof(e)&&null!==e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}var vr=Object.prototype.toString;function mr(e,t){return vr.call(e)==="[object ".concat(t,"]")}function gr(e){try{return t=e,"undefined"!=typeof Element&&Or(t,Element)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{for(var n,r=e,i=5,o=[],a=0,s=0,u=" > ",c=u.length,l=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||pr;r&&a++<i&&!("html"===(n=Sr(r,l))||a>1&&s+o.length*c+n.length>=f);)o.push(n),s+=n.length,r=r.parentNode;return o.reverse().join(u)}catch(e){return"<unknown>"}}(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function yr(e,t){try{return"domain"===e&&t&&"object"===_typeof(t)&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":"undefined"!=typeof global&&t===global?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":wr(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: ".concat(V(t),"]"):"symbol"===_typeof(t)?"[".concat(String(t),"]"):"bigint"==typeof t?"[BigInt: ".concat(String(t),"]"):"[object ".concat(Object.getPrototypeOf(t).constructor.name,"]")}catch(e){return"**non-serializable** (".concat(e,")")}var n}function _r(e,t){var n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(n="function"==typeof WeakSet,r=n?new WeakSet:[],[function(e){if(n)return!!r.has(e)||(r.add(e),!1);for(var t=0;t<r.length;t++)if(r[t]===e)return!0;return r.push(e),!1},function(e){if(n)r.delete(e);else for(var t=0;t<r.length;t++)if(r[t]===e){r.splice(t,1);break}}]),u=_slicedToArray(s,2),c=u[0],l=u[1];if(null===t||["number","boolean","string"].includes(_typeof(t))&&("number"!=typeof(i=t)||i==i))return t;var f=yr(e,t);if(!f.startsWith("[object "))return f;if(t.__sentry_skip_normalization__)return t;if(0===o)return f.replace("object ","");if(c(t))return"[Circular ~]";var p=t;if(p&&"function"==typeof p.toJSON)try{return _r("",p.toJSON(),o-1,a,s)}catch(e){}var d=Array.isArray(t)?[]:{},h=0,v=Ar(t);for(var m in v)if(Object.prototype.hasOwnProperty.call(v,m)){if(h>=a){d[m]="[MaxProperties ~]";break}var g=v[m];d[m]=_r(m,g,o-1,a,s),h++}return l(t),d}function br(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function Er(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;try{return _r("",e,t,n)}catch(e){return{ERROR:"**non-serializable** (".concat(e,")")}}}(e,t);return br(r)>n?Er(e,t-1,n):r}function Tr(e){return mr(e,"DOMError")}function wr(e){return mr(e,"Object")}function Sr(e,t){var n,r,i,o,a,s=e,u=[];if(!s||!s.tagName)return"";u.push(s.tagName.toLowerCase());var c=t&&t.length?t.filter((function(e){return s.getAttribute(e)})).map((function(e){return[e,s.getAttribute(e)]})):null;if(c&&c.length)c.forEach((function(e){u.push("[".concat(e[0],'="').concat(e[1],'"]'))}));else if(s.id&&u.push("#".concat(s.id)),(n=s.className)&&A.isString(n))for(r=n.split(/\s+/),a=0;a<r.length;a++)u.push(".".concat(r[a]));var l=["type","name","title","alt"];for(a=0;a<l.length;a++)i=l[a],(o=s.getAttribute(i))&&u.push("[".concat(i,'="').concat(o,'"]'));return u.join("")}function Or(e,t){try{return e instanceof t}catch(e){return!1}}function kr(e){switch(vr.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Or(e,Error)}}function Cr(e){return"undefined"!=typeof Event&&Or(e,Event)}function Rr(e,t){var n=function(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}(e);if(n){var r=n.mechanism;if(n.mechanism=Object.assign(Object.assign(Object.assign({},{type:"generic",handled:!0}),r),t),t&&"data"in t){var i=Object.assign(Object.assign({},r&&r.data),t.data);n.mechanism.data=i}}}function Pr(e,t,n){var r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")}function Ar(e){if(kr(e))return Object.assign({message:e.message,name:e.name,stack:e.stack},hr(e));if(Cr(e)){var t=Object.assign({type:e.type,target:gr(e.target),currentTarget:gr(e.currentTarget)},hr(e));return"undefined"!=typeof CustomEvent&&Or(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Ir(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!=typeof e||0===t||e.length<=t?e:"".concat(e.substr(0,t),"...")}function Lr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,n=Object.keys(Ar(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Ir(n[0],t);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:Ir(i,t)}return""}function xr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}));return function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],o=_createForOfIteratorHelper(e.split("\n").slice(n));try{for(o.s();!(t=o.n()).done;){var a,s=t.value.replace(/\(error: (.*)\)/,"$1"),u=_createForOfIteratorHelper(r);try{for(u.s();!(a=u.n()).done;){var c=(0,a.value)(s);if(c){i.push(c);break}}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}return function(e){if(!e.length)return[];var t=e,n=t[0].function||"",r=t[t.length-1].function||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,dr).map((function(e){return Object.assign(Object.assign({},e),{filename:e.filename||t[0].filename,function:e.function||"?"})})).reverse()}(i)}}var Nr=function(e){return Array.isArray(e)?xr.apply(void 0,_toConsumableArray(e)):e}(lr);function Dr(e,t){var n=Mr(e,t),r={type:t&&t.name,value:Hr(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function jr(e,t){return{exception:{values:[Dr(e,t)]}}}function Mr(e,t){var n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Ur.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}var Ur=/Minified React error #\d+;/i;function Hr(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Br(e,t,n,r,i){var o;if(mr(t,"ErrorEvent")&&t.error)return jr(e,t.error);if(Tr(t)||function(e){return mr(e,"DOMException")}(t)){var a=t;if("stack"in t)o=jr(e,t);else{var s=a.name||(Tr(a)?"DOMError":"DOMException"),u=a.message?"".concat(s,": ").concat(a.message):s;Pr(o=Fr(e,u,n,r),u)}return"code"in a&&(o.tags=Object.assign(Object.assign({},o.tags),{"DOMException.code":"".concat(a.code)})),o}return kr(t)?jr(e,t):wr(t)||Cr(t)?(o=function(e,t,n,r){var i={exception:{values:[{type:Cr(t)?t.constructor.name:r?"waring":"Error",value:"Non-Error ".concat(r?"promise rejection":"exception"," captured with keys: ").concat(Lr(t))}]},extra:{__serialized__:Er(t,3)}};if(n){var o=Mr(e,n);o.length&&(i.exception.values[0].stacktrace={frames:o})}return i}(e,t,n,i),Rr(o,{synthetic:!0}),o):function(e){return mr(e,"Response")}(t)?(o=function(e){return{exception:{values:[{type:"waring",value:"Request exception not caught, url: ".concat(null==e?void 0:e.url,", status: ").concat(null==e?void 0:e.status,", statusText: ").concat(null==e?void 0:e.statusText,", data: ").concat(JSON.stringify(null==e?void 0:e.data))}]}}}(t),o):(Pr(o=Fr(e,t,n,r),"".concat(t),void 0),Rr(o,{synthetic:!0}),o)}function Fr(e,t,n,r){var i={message:t};if(r&&n){var o=Mr(e,n);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]})}return i}function zr(e){var t=e.error,n=e.message,r=e.filename,i=e.lineno,o=e.colno;return function(e,t,n,r){var i=e.exception=e.exception||{},o=i.values=i.values||[],a=o[0]=o[0]||{},s=a.stacktrace=a.stacktrace||{},u=s.frames=s.frames||[],c=A.isNaN(parseInt(r,10))?void 0:r,l=A.isNaN(parseInt(n,10))?void 0:n,f=A.isString(t)&&t.length>0?t:location.href;return 0===u.length&&u.push({colno:c,filename:f,function:"?",in_app:!0,lineno:l}),e}(Br(Nr,t||n,void 0,!1,!1),r,i,o)}function qr(e){return null===(t=e)||"object"!==_typeof(t)&&"function"!=typeof t?{exception:{values:[{type:"waring",value:"Non-Error promise rejection captured with value: ".concat(String(e))}]}}:Br(Nr,e,void 0,!1,!0);var t}var Vr=function(e){var t,n,r;if(void 0===e.error){var i=e.target||e.srcElement;if([Window,window].includes(i))return;var o=i&&i.outerHTML;o&&200<o.length&&(o=o.slice(0,200));var a=i&&([i.src,i.href].includes(window.location.href)?"":i.src||i.href),s=a?"".concat(R(i)," url:").concat(a," load error"):"".concat(R(i)," url is empty");return{type:"error",params:{type:"assetsError",target:R(i),outerHTML:o,tagName:i&&i.tagName,url:a,message:e.message||s,xPath:un(i,5)},name:"assetsError"}}if(e.error){var u=null===(n=null===(t=zr(e))||void 0===t?void 0:t.exception)||void 0===n?void 0:n.values[0],c=u.type,l=u.value,f=u.stacktrace;return{type:"error",params:{type:c,message:l,source:null==e?void 0:e.filename,lineno:null==e?void 0:e.lineno,colno:null==e?void 0:e.colno,stack:null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.stack,frames:JSON.stringify(null==f?void 0:f.frames),errorLevel:en.JS_ERROR_LEVEL},name:"jsError"}}return{type:"error",params:{type:e.type,message:e.message||"",source:e.filename,lineno:e.lineno,colno:e.colno,errorLevel:en.JS_ERROR_LEVEL},name:"jsError"}},Zr=function(e){var t,n,r;ne.log("unhandledrejection",R(e.reason),e);var i=e;try{"reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason)}catch(e){}var o=null===(n=null===(t=qr(i))||void 0===t?void 0:t.exception)||void 0===n?void 0:n.values[0],a=o.type,s=o.value,u=o.stacktrace,c=(null==u?void 0:u.frames)||[],l=(null==c?void 0:c.length)>0?c[c.length-1]:{},f=l.lineno,p=l.filename,d=l.colno;if("waring"!==a)return{type:"unhandledrejection",params:{message:s,stack:null===(r=null==e?void 0:e.reason)||void 0===r?void 0:r.stack,type:a,source:p,lineno:f,colno:d,frames:JSON.stringify(c),errorLevel:en.REJECTION_ERROR_LEVEL},name:"jsError"}},Xr=null,Gr=null,Wr=console.error,Jr=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_callSuper(this,t)).sendReqHeader=!1,n.sendParams=!1,n.sendResponse=!1,n.sendResHeader=!1,n.sendPerformance=!1,n.sendMemory=!1,n.memoryTime=1e4,n.enableSPA=!0,n.compliantSample=10,n.largeImgSample=10,n.hasUndefInQuerySample=30,n.functionList=["fetch","iwork","jsError","router","userClick"],n.microApp="",n.routeAppId="",n.sendRouteAppId=!1,n.mergeOptions(e),n}return _inherits(t,e),_createClass(t,[{key:"mergeOptions",value:function(e){var t,n=this;(null===(t=Object.keys(e))||void 0===t?void 0:t.length)&&Object.keys(e).forEach((function(t){n[t]=e[t]}))}}]),t}(Yn),Kr="object"===("undefined"==typeof globalThis?"undefined":_typeof(globalThis))?globalThis:"object"===("undefined"==typeof self?"undefined":_typeof(self))?self:"object"===("undefined"==typeof window?"undefined":_typeof(window))?window:"object"===("undefined"==typeof global?"undefined":_typeof(global))?global:{},Qr="1.4.0",Yr=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var $r=function(e){var t=new Set([e]),n=new Set,r=e.match(Yr);if(!r)return function(){return!1};var i=+r[1],o=+r[2],a=+r[3];if(null!=r[4])return function(t){return t===e};function s(e){return n.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(Yr);if(!r)return s(e);var c=+r[1],l=+r[2],f=+r[3];return null!=r[4]||i!==c?s(e):0===i?o===l&&a<=f?u(e):s(e):o<=l?u(e):s(e)}}(Qr),ei=Qr.split(".")[0],ti=Symbol.for("opentelemetry.js.api."+ei),ni=Kr;function ri(e,t,n,r){var i;void 0===r&&(r=!1);var o=ni[ti]=null!==(i=ni[ti])&&void 0!==i?i:{version:Qr};if(!r&&o[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}if(o.version!==Qr){a=new Error("@opentelemetry/api: All API registration versions must match");return n.error(a.stack||a.message),!1}return o[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Qr+"."),!0}function ii(e){var t,n,r=null===(t=ni[ti])||void 0===t?void 0:t.version;if(r&&$r(r))return null===(n=ni[ti])||void 0===n?void 0:n[e]}function oi(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Qr+".");var n=ni[ti];n&&delete n[e]}var ai,si=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},ui=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},ci=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return li("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return li("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return li("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return li("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return li("verbose",this._namespace,e)},e}();function li(e,t,n){var r=ii("diag");if(r)return n.unshift(t),r[e].apply(r,ui([],si(n),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(ai||(ai={}));var fi=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},pi=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},di=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=ii("diag");if(r)return r[e].apply(r,pi([],fi(t),!1))}}var t=this;t.setLogger=function(e,n){var r,i,o;if(void 0===n&&(n={logLevel:ai.INFO}),e===t){var a=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=a.stack)&&void 0!==r?r:a.message),!1}"number"==typeof n&&(n={logLevel:n});var s=ii("diag"),u=function(e,t){function n(n,r){var i=t[n];return"function"==typeof i&&e>=r?i.bind(t):function(){}}return e<ai.NONE?e=ai.NONE:e>ai.ALL&&(e=ai.ALL),t=t||{},{error:n("error",ai.ERROR),warn:n("warn",ai.WARN),info:n("info",ai.INFO),debug:n("debug",ai.DEBUG),verbose:n("verbose",ai.VERBOSE)}}(null!==(i=n.logLevel)&&void 0!==i?i:ai.INFO,e);if(s&&!n.suppressOverrideMessage){var c=null!==(o=(new Error).stack)&&void 0!==o?o:"<failed to generate stacktrace>";s.warn("Current logger will be overwritten from "+c),u.warn("Current logger will overwrite one already registered from "+c)}return ri("diag",u,t,!0)},t.disable=function(){oi("diag",t)},t.createComponentLogger=function(e){return new ci(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),hi=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},vi=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mi=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=hi(e,2);return[t[0],t[1]]}))},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new e(this._entries);try{for(var a=vi(r),s=a.next();!s.done;s=a.next()){var u=s.value;o._entries.delete(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e.prototype.clear=function(){return new e},e}(),gi=Symbol("BaggageEntryMetadata"),yi=di.instance();function _i(e){return void 0===e&&(e={}),new mi(new Map(Object.entries(e)))}function bi(e){return Symbol.for(e)}var Ei,Ti,wi=function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}},Si=new wi,Oi=(Ei=function(e,t){return Ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ei(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ei(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ki=function(){function e(){}return e.prototype.createHistogram=function(e,t){return Mi},e.prototype.createCounter=function(e,t){return ji},e.prototype.createUpDownCounter=function(e,t){return Ui},e.prototype.createObservableGauge=function(e,t){return Bi},e.prototype.createObservableCounter=function(e,t){return Hi},e.prototype.createObservableUpDownCounter=function(e,t){return Fi},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),Ci=function(){},Ri=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oi(t,e),t.prototype.add=function(e,t){},t}(Ci),Pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oi(t,e),t.prototype.add=function(e,t){},t}(Ci),Ai=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oi(t,e),t.prototype.record=function(e,t){},t}(Ci),Ii=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),Li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oi(t,e),t}(Ii),xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oi(t,e),t}(Ii),Ni=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oi(t,e),t}(Ii),Di=new ki,ji=new Ri,Mi=new Ai,Ui=new Pi,Hi=new Li,Bi=new xi,Fi=new Ni,zi={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},qi={set:function(e,t,n){null!=e&&(e[t]=n)}},Vi=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Zi=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Xi=function(){function e(){}return e.prototype.active=function(){return Si},e.prototype.with=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t.call.apply(t,Zi([n],Vi(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Gi=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Wi=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Ji="context",Ki=new Xi,Qi=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return ri(Ji,e,di.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(r=this._getContextManager()).with.apply(r,Wi([e,t,n],Gi(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return ii(Ji)||Ki},e.prototype.disable=function(){this._getContextManager().disable(),oi(Ji,di.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(Ti||(Ti={}));var Yi="0000000000000000",$i="00000000000000000000000000000000",eo={traceId:$i,spanId:Yi,traceFlags:Ti.NONE},to=function(){function e(e){void 0===e&&(e=eo),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),no=bi("OpenTelemetry Context Key SPAN");function ro(e){return e.getValue(no)||void 0}function io(){return ro(Qi.getInstance().active())}function oo(e,t){return e.setValue(no,t)}function ao(e){return e.deleteValue(no)}function so(e,t){return oo(e,new to(t))}function uo(e){var t;return null===(t=ro(e))||void 0===t?void 0:t.spanContext()}var co=/^([0-9a-f]{32})$/i,lo=/^[0-9a-f]{16}$/i;function fo(e){return co.test(e)&&e!==$i}function po(e){return fo(e.traceId)&&(t=e.spanId,lo.test(t)&&t!==Yi);var t}function ho(e){return new to(e)}var vo=Qi.getInstance(),mo=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=vo.active()),Boolean(null==t?void 0:t.root))return new to;var r,i=n&&uo(n);return"object"===_typeof(r=i)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&po(i)?new to(i):new to},e.prototype.startActiveSpan=function(e,t,n,r){var i,o,a;if(!(arguments.length<2)){2===arguments.length?a=t:3===arguments.length?(i=t,a=n):(i=t,o=n,a=r);var s=null!=o?o:vo.active(),u=this.startSpan(e,i,s),c=oo(s,u);return vo.with(c,a,void 0,u)}},e}();var go,yo,_o,bo=new mo,Eo=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):bo},e}(),To=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new mo},e}()),wo=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return null!==(r=this.getDelegateTracer(e,t,n))&&void 0!==r?r:new Eo(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:To},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,n)},e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(go||(go={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(yo||(yo={})),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(_o||(_o={}));var So=Qi.getInstance(),Oo=di.instance(),ko=new(function(){function e(){}return e.prototype.getMeter=function(e,t,n){return Di},e}()),Co="metrics",Ro=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return ri(Co,e,di.instance())},e.prototype.getMeterProvider=function(){return ii(Co)||ko},e.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},e.prototype.disable=function(){oi(Co,di.instance())},e}(),Po=Ro.getInstance(),Ao=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),Io=bi("OpenTelemetry Baggage Key");function Lo(e){return e.getValue(Io)||void 0}function xo(){return Lo(Qi.getInstance().active())}function No(e,t){return e.setValue(Io,t)}function Do(e){return e.deleteValue(Io)}var jo="propagation",Mo=new Ao,Uo=function(){function e(){this.createBaggage=_i,this.getBaggage=Lo,this.getActiveBaggage=xo,this.setBaggage=No,this.deleteBaggage=Do}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return ri(jo,e,di.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=qi),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=zi),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){oi(jo,di.instance())},e.prototype._getGlobalPropagator=function(){return ii(jo)||Mo},e}(),Ho=Uo.getInstance(),Bo="trace",Fo=function(){function e(){this._proxyTracerProvider=new wo,this.wrapSpanContext=ho,this.isSpanContextValid=po,this.deleteSpan=ao,this.getSpan=ro,this.getActiveSpan=io,this.getSpanContext=uo,this.setSpan=oo,this.setSpanContext=so}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=ri(Bo,this._proxyTracerProvider,di.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return ii(Bo)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){oi(Bo,di.instance()),this._proxyTracerProvider=new wo},e}(),zo=Fo.getInstance(),qo=bi("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Vo(e){return!0===e.getValue(qo)}var Zo="baggage",Xo=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};function Go(e){var t=e.split(";");if(!(t.length<=0)){var n=t.shift();if(n){var r=n.split("=");if(2===r.length){var i,o,a=decodeURIComponent(r[0].trim()),s=decodeURIComponent(r[1].trim());return t.length>0&&("string"!=typeof(o=t.join(";"))&&(yi.error("Cannot create baggage metadata from unknown type: "+_typeof(o)),o=""),i={__TYPE__:gi,toString:function(){return o}}),{key:a,value:s,metadata:i}}}}}var Wo=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=Ho.getBaggage(e);if(r&&!Vo(e)){var i=function(e){return e.getAllEntries().map((function(e){var t=Xo(e,2),n=t[0],r=t[1],i=encodeURIComponent(n)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(i+=";"+r.metadata.toString()),i}))}(r).filter((function(e){return e.length<=4096})).slice(0,180),o=function(e){return e.reduce((function(e,t){var n=e+(""!==e?",":"")+t;return n.length>8192?e:n}),"")}(i);o.length>0&&n.set(t,Zo,o)}},e.prototype.extract=function(e,t,n){var r=n.get(t,Zo),i=Array.isArray(r)?r.join(","):r;if(!i)return e;var o={};return 0===i.length?e:(i.split(",").forEach((function(e){var t=Go(e);if(t){var n={value:t.value};t.metadata&&(n.metadata=t.metadata),o[t.key]=n}})),0===Object.entries(o).length?e:Ho.setBaggage(e,Ho.createBaggage(o)))},e.prototype.fields=function(){return[Zo]},e}(),Jo=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ko=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};function Qo(e){var t,n,r={};if("object"!==_typeof(e)||null==e)return r;try{for(var i=Jo(Object.entries(e)),o=i.next();!o.done;o=i.next()){var a=Ko(o.value,2),s=a[0],u=a[1];Yo(s)?$o(u)?Array.isArray(u)?r[s]=u.slice():r[s]=u:Oo.warn("Invalid attribute value set for key: "+s):Oo.warn("Invalid attribute key: "+s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Yo(e){return"string"==typeof e&&e.length>0}function $o(e){return null==e||(Array.isArray(e)?function(e){var t,n,r;try{for(var i=Jo(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(null!=a){if(!r){if(ea(a)){r=_typeof(a);continue}return!1}if(_typeof(a)!==r)return!1}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}(e):ea(e))}function ea(e){switch(_typeof(e)){case"number":case"boolean":case"string":return!0}return!1}var ta,na=function(e){Oo.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){for(var t={},n=e;null!==n;)Object.getOwnPropertyNames(n).forEach((function(e){if(!t[e]){var r=n[e];r&&(t[e]=String(r))}})),n=Object.getPrototypeOf(n);return t}(e))}(e))};function ra(e){try{na(e)}catch(e){}}!function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(ta||(ta={}));var ia="object"===("undefined"==typeof globalThis?"undefined":_typeof(globalThis))?globalThis:"object"===("undefined"==typeof self?"undefined":_typeof(self))?self:"object"===("undefined"==typeof window?"undefined":_typeof(window))?window:"object"===("undefined"==typeof global?"undefined":_typeof(global))?global:{},oa=",",aa=["OTEL_SDK_DISABLED"];function sa(e){return aa.indexOf(e)>-1}var ua=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function ca(e){return ua.indexOf(e)>-1}var la=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function fa(e){return la.indexOf(e)>-1}var pa=1/0,da=128,ha={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:ai.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:pa,OTEL_ATTRIBUTE_COUNT_LIMIT:da,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:pa,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:da,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:pa,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:da,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:ta.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function va(e,t,n){if(void 0!==n[e]){var r=String(n[e]);t[e]="true"===r.toLowerCase()}}function ma(e,t,n,r,i){if(void 0===r&&(r=-1/0),void 0===i&&(i=1/0),void 0!==n[e]){var o=Number(n[e]);isNaN(o)||(t[e]=o<r?r:o>i?i:o)}}function ga(e,t,n,r){void 0===r&&(r=oa);var i=n[e];"string"==typeof i&&(t[e]=i.split(r).map((function(e){return e.trim()})))}var ya={ALL:ai.ALL,VERBOSE:ai.VERBOSE,DEBUG:ai.DEBUG,INFO:ai.INFO,WARN:ai.WARN,ERROR:ai.ERROR,NONE:ai.NONE};function _a(e,t,n){var r=n[e];if("string"==typeof r){var i=ya[r.toUpperCase()];null!=i&&(t[e]=i)}}function ba(e){var t={};for(var n in ha){var r=n;if("OTEL_LOG_LEVEL"===r)_a(r,t,e);else if(sa(r))va(r,t,e);else if(ca(r))ma(r,t,e);else if(fa(r))ga(r,t,e);else{var i=e[r];null!=i&&(t[r]=String(i))}}return t}function Ea(){var e=ba(ia);return Object.assign({},ha,e)}function Ta(e){for(var t=e.length,n="",r=0;r<t;r+=2){var i=e.substring(r,r+2),o=parseInt(i,16);n+=String.fromCharCode(o)}return btoa(n)}var wa,Sa=performance,Oa="exception.type",ka="exception.message",Ca="exception.stacktrace",Ra="http.method",Pa="http.url",Aa="http.host",Ia="http.scheme",La="http.status_code",xa="http.user_agent",Na="http.response_content_length",Da="http.response_content_length_uncompressed",ja="process.runtime.name",Ma="service.name",Ua="telemetry.sdk.name",Ha="telemetry.sdk.language",Ba="telemetry.sdk.version",Fa=((wa={})[Ua]="opentelemetry",wa[ja]="browser",wa[Ha]="webjs",wa[Ba]="1.13.0",wa);var za,qa=Math.pow(10,6),Va=Math.pow(10,9);function Za(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*qa)]}function Xa(){var e=Sa.timeOrigin;if("number"!=typeof e){var t=Sa;e=t.timing&&t.timing.fetchStart}return e}function Ga(e){return Ya(Za(Xa()),Za("number"==typeof e?e:Sa.now()))}function Wa(e){if(Ka(e))return e;if("number"==typeof e)return e<Xa()?Ga(e):Za(e);if(e instanceof Date)return Za(e.getTime());throw TypeError("Invalid input type")}function Ja(e){return e[0]*Va+e[1]}function Ka(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function Qa(e){return Ka(e)||"number"==typeof e||e instanceof Date}function Ya(e,t){var n=[e[0]+t[0],e[1]+t[1]];return n[1]>=Va&&(n[1]-=Va,n[0]+=1),n}!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(za||(za={}));var $a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},es=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((function(e){return"function"==typeof e.fields?e.fields():[]})).reduce((function(e,t){return e.concat(t)}),[])))}return e.prototype.inject=function(e,t,n){var r,i;try{for(var o=$a(this._propagators),a=o.next();!a.done;a=o.next()){var s=a.value;try{s.inject(e,t,n)}catch(e){Oo.warn("Failed to inject with "+s.constructor.name+". Err: "+e.message)}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.extract=function(e,t,n){return this._propagators.reduce((function(e,r){try{return r.extract(e,t,n)}catch(e){Oo.warn("Failed to inject with "+r.constructor.name+". Err: "+e.message)}return e}),e)},e.prototype.fields=function(){return this._fields.slice()},e}(),ts="[_0-9a-z-*/]",ns=new RegExp("^(?:"+("[a-z]"+ts+"{0,255}")+"|"+("[a-z0-9]"+ts+"{0,240}@[a-z]"+ts+"{0,13}")+")$"),rs=/^[ -~]{0,255}[!-~]$/,is=/,|=/;var os=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var i=n.slice(0,r),o=n.slice(r+1,t.length);(function(e){return ns.test(e)})(i)&&function(e){return rs.test(e)&&!is.test(e)}(o)&&e.set(i,o)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),as="traceparent",ss="tracestate",us=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");var cs,ls,fs=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=zo.getSpanContext(e);if(r&&!Vo(e)&&po(r)){var i="00-"+r.traceId+"-"+r.spanId+"-0"+Number(r.traceFlags||Ti.NONE).toString(16);n.set(t,as,i),r.traceState&&n.set(t,ss,r.traceState.serialize())}},e.prototype.extract=function(e,t,n){var r=n.get(t,as);if(!r)return e;var i=Array.isArray(r)?r[0]:r;if("string"!=typeof i)return e;var o=function(e){var t=us.exec(e);return t?"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}(i);if(!o)return e;o.isRemote=!0;var a=n.get(t,ss);if(a){var s=Array.isArray(a)?a.join(","):a;o.traceState=new os("string"==typeof s?s:void 0)}return zo.setSpanContext(e,o)},e.prototype.fields=function(){return[as,ss]},e}(),ps="[object Object]",ds="[object Null]",hs="[object Undefined]",vs=Function.prototype.toString,ms=vs.call(Object),gs=(cs=Object.getPrototypeOf,ls=Object,function(e){return cs(ls(e))}),ys=Object.prototype,_s=ys.hasOwnProperty,bs=Symbol?Symbol.toStringTag:void 0,Es=ys.toString;function Ts(e){if(!function(e){return null!=e&&"object"==_typeof(e)}(e)||function(e){if(null==e)return void 0===e?hs:ds;return bs&&bs in Object(e)?function(e){var t=_s.call(e,bs),n=e[bs],r=!1;try{e[bs]=void 0,r=!0}catch(e){}var i=Es.call(e);r&&(t?e[bs]=n:delete e[bs]);return i}(e):function(e){return Es.call(e)}(e)}(e)!==ps)return!1;var t=gs(e);if(null===t)return!0;var n=_s.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&vs.call(n)===ms}var ws=20;function Ss(e){return Cs(e)?e.slice():e}function Os(e,t,n,r){var i;if(void 0===n&&(n=0),!(n>ws)){if(n++,As(e)||As(t)||Rs(t))i=Ss(t);else if(Cs(e)){if(i=e.slice(),Cs(t))for(var o=0,a=t.length;o<a;o++)i.push(Ss(t[o]));else if(Ps(t))for(o=0,a=(s=Object.keys(t)).length;o<a;o++){i[u=s[o]]=Ss(t[u])}}else if(Ps(e))if(Ps(t)){if(!function(e,t){if(!Ts(e)||!Ts(t))return!1;return!0}(e,t))return t;i=Object.assign({},e);var s;for(o=0,a=(s=Object.keys(t)).length;o<a;o++){var u,c=t[u=s[o]];if(As(c))void 0===c?delete i[u]:i[u]=c;else{var l=i[u],f=c;if(ks(e,u,r)||ks(t,u,r))delete i[u];else{if(Ps(l)&&Ps(f)){var p=r.get(l)||[],d=r.get(f)||[];p.push({obj:e,key:u}),d.push({obj:t,key:u}),r.set(l,p),r.set(f,d)}i[u]=Os(i[u],c,n,r)}}}}else i=t;return i}}function ks(e,t,n){for(var r=n.get(e[t])||[],i=0,o=r.length;i<o;i++){var a=r[i];if(a.key===t&&a.obj===e)return!0}return!1}function Cs(e){return Array.isArray(e)}function Rs(e){return"function"==typeof e}function Ps(e){return!As(e)&&!Cs(e)&&!Rs(e)&&"object"===_typeof(e)}function As(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}var Is=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ls(e,t){return"string"==typeof t?e===t:!!e.match(t)}function xs(e,t){var n,r;if(!t)return!1;try{for(var i=Is(t),o=i.next();!o.done;o=i.next()){if(Ls(e,o.value))return!0}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}var Ns,Ds=function(){function e(){var e=this;this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),js=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Ms=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Us=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new Ds}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,Ms([this._that],js(n),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}(),Hs=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bs=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Fs=function(){function e(e,t,n,r,i,o,a,s,u){void 0===a&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:_o.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=r,this.parentSpanId=o,this.kind=i,this.links=a;var c=Date.now();this._performanceStartTime=Sa.now(),this._performanceOffset=c-(this._performanceStartTime+Xa()),this._startTimeProvided=null!=s,this.startTime=this._getTime(null!=s?s:c),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(Oo.warn("Invalid attribute key: "+e),this):$o(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(Oo.warn("Invalid attribute value set for key: "+e),this)},e.prototype.setAttributes=function(e){var t,n;try{for(var r=Hs(Object.entries(e)),i=r.next();!i.done;i=r.next()){var o=Bs(i.value,2),a=o[0],s=o[1];this.setAttribute(a,s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return Oo.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(Oo.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Qa(t)&&(Qa(n)||(n=t),t=void 0);var r=Qo(t);return this.events.push({name:e,attributes:r,time:this._getTime(n),droppedAttributesCount:0}),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=e),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){this._isSpanEnded()?Oo.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(e),this._duration=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return r<0&&(n-=1,r+=Va),[n,r]}(this.startTime,this.endTime),this._duration[0]<0&&(Oo.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this))},e.prototype._getTime=function(e){if("number"==typeof e&&e<Sa.now())return Ga(e+this._performanceOffset);if("number"==typeof e)return Za(e);if(e instanceof Date)return Za(e.getTime());if(Ka(e))return e;if(this._startTimeProvided)return Za(Date.now());var t=Sa.now()-this._performanceStartTime;return Ya(this.startTime,Za(t))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var n={};"string"==typeof e?n[ka]=e:e&&(e.code?n[Oa]=e.code.toString():e.name&&(n[Oa]=e.name),e.message&&(n[ka]=e.message),e.stack&&(n[Ca]=e.stack)),n[Oa]||n[ka]?this.addEvent("exception",n,t):Oo.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&Oo.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},e.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(Oo.warn("Attribute value limit must be positive, got "+n),e):"string"==typeof e?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map((function(e){return"string"==typeof e?t._truncateToLimitUtil(e,n):e})):e},e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Ns||(Ns={}));var zs=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Ns.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),qs=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Ns.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),Vs=function(){function e(e){var t,n,r,i;this._root=e.root,this._root||(ra(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new qs),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new qs,this._remoteParentNotSampled=null!==(n=e.remoteParentNotSampled)&&void 0!==n?n:new zs,this._localParentSampled=null!==(r=e.localParentSampled)&&void 0!==r?r:new qs,this._localParentNotSampled=null!==(i=e.localParentNotSampled)&&void 0!==i?i:new zs}return e.prototype.shouldSample=function(e,t,n,r,i,o){var a=zo.getSpanContext(e);return a&&po(a)?a.isRemote?a.traceFlags&Ti.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,r,i,o):this._remoteParentNotSampled.shouldSample(e,t,n,r,i,o):a.traceFlags&Ti.SAMPLED?this._localParentSampled.shouldSample(e,t,n,r,i,o):this._localParentNotSampled.shouldSample(e,t,n,r,i,o):this._root.shouldSample(e,t,n,r,i,o)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),Zs=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:fo(t)&&this._accumulate(t)<this._upperBound?Ns.RECORD_AND_SAMPLED:Ns.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),Xs=Ea(),Gs=ta.AlwaysOn,Ws=1;function Js(){return{sampler:Ks(Xs),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:Ea().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Ea().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:Ea().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Ea().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:Ea().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:Ea().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:Ea().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:Ea().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Ks(e){switch(void 0===e&&(e=Ea()),e.OTEL_TRACES_SAMPLER){case ta.AlwaysOn:return new qs;case ta.AlwaysOff:return new zs;case ta.ParentBasedAlwaysOn:return new Vs({root:new qs});case ta.ParentBasedAlwaysOff:return new Vs({root:new zs});case ta.TraceIdRatio:return new Zs(Qs(e));case ta.ParentBasedTraceIdRatio:return new Vs({root:new Zs(Qs(e))});default:return Oo.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+Gs+'".'),new qs}}function Qs(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return Oo.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Ws+"."),Ws;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(Oo.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Ws+"."),Ws):t<0||t>1?(Oo.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Ws+"."),Ws):t}function Ys(e){var t,n,r,i,o,a,s,u,c,l,f,p,d=Object.assign({},e.spanLimits),h="undefined"!=typeof process&&process&&process.env?ba(process.env):ba(ia);return d.attributeCountLimit=null!==(a=null!==(o=null!==(i=null!==(n=null===(t=e.spanLimits)||void 0===t?void 0:t.attributeCountLimit)&&void 0!==n?n:null===(r=e.generalLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==i?i:h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==o?o:h.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==a?a:da,d.attributeValueLengthLimit=null!==(p=null!==(f=null!==(l=null!==(u=null===(s=e.spanLimits)||void 0===s?void 0:s.attributeValueLengthLimit)&&void 0!==u?u:null===(c=e.generalLimits)||void 0===c?void 0:c.attributeValueLengthLimit)&&void 0!==l?l:h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==f?f:h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:pa,Object.assign({},e,{spanLimits:d})}var $s,eu=function(){function e(e,t){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;var n=Ea();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Us(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Oo.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||0!=(e.spanContext().traceFlags&Ti.SAMPLED)&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then((function(){return e.onShutdown()})).then((function(){return e._flushAll()})).then((function(){return e._exporter.shutdown()}))},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&Oo.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(Oo.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise((function(t,n){for(var r=[],i=0,o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize);i<o;i++)r.push(e._flushOneBatch());Promise.all(r).then((function(){t()})).catch(n)}))},e.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(t,n){var r=setTimeout((function(){n(new Error("Timeout"))}),e._exportTimeoutMillis);So.with(function(e){return e.setValue(qo,!0)}(So.active()),(function(){var i=e._finishedSpans.splice(0,e._maxExportBatchSize),o=function(){return e._exporter.export(i,(function(e){var i;clearTimeout(r),e.code===za.SUCCESS?t():n(null!==(i=e.error)&&void 0!==i?i:new Error("BatchSpanProcessor: span export failed"))}))},a=i.map((function(e){return e.resource})).filter((function(e){return e.asyncAttributesPending}));0===a.length?o():Promise.all(a.map((function(e){var t;return null===(t=e.waitForAsyncAttributes)||void 0===t?void 0:t.call(e)}))).then(o,(function(e){ra(e),n(e)}))}))}))},e.prototype._maybeStartTimer=function(){var e=this;void 0===this._timer&&(this._timer=setTimeout((function(){e._flushOneBatch().then((function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(e){ra(e)}))}),this._scheduledDelayMillis),this._timer)},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),tu=($s=function(e,t){return $s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},$s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}$s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),nu=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.onInit(n),r}return tu(t,e),t.prototype.onInit=function(e){var t=this;!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&t.forceFlush()},this._pageHideListener=function(){t.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(eu),ru=function(){this.generateTraceId=ou(16),this.generateSpanId=ou(8)},iu=Array(32);function ou(e){return function(){for(var t=0;t<2*e;t++)iu[t]=Math.floor(16*Math.random())+48,iu[t]>=58&&(iu[t]+=39);return String.fromCharCode.apply(null,iu.slice(0,2*e))}}var au=function(){function e(e,t,n){this._tracerProvider=n;var r,i,o,a,s=(r=t,i={sampler:Ks()},o=Js(),(a=Object.assign({},o,i,r)).generalLimits=Object.assign({},o.generalLimits,r.generalLimits||{}),a.spanLimits=Object.assign({},o.spanLimits,r.spanLimits||{}),a);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=t.idGenerator||new ru,this.resource=n.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,n){var r,i,o;void 0===t&&(t={}),void 0===n&&(n=So.active()),t.root&&(n=zo.deleteSpan(n));var a=zo.getSpan(n);if(Vo(n))return Oo.debug("Instrumentation suppressed, returning Noop Span"),zo.wrapSpanContext(eo);var s,u,c,l=null==a?void 0:a.spanContext(),f=this._idGenerator.generateSpanId();l&&zo.isSpanContextValid(l)?(s=l.traceId,u=l.traceState,c=l.spanId):s=this._idGenerator.generateTraceId();var p=null!==(r=t.kind)&&void 0!==r?r:yo.INTERNAL,d=(null!==(i=t.links)&&void 0!==i?i:[]).map((function(e){return{context:e.context,attributes:Qo(e.attributes)}})),h=Qo(t.attributes),v=this._sampler.shouldSample(n,s,e,p,h,d);u=null!==(o=v.traceState)&&void 0!==o?o:u;var m={traceId:s,spanId:f,traceFlags:v.decision===go.RECORD_AND_SAMPLED?Ti.SAMPLED:Ti.NONE,traceState:u};if(v.decision===go.NOT_RECORD)return Oo.debug("Recording is off, propagating context in a non-recording span"),zo.wrapSpanContext(m);var g=new Fs(this,n,e,m,p,c,d,t.startTime),y=Qo(Object.assign(h,v.attributes));return g.setAttributes(y),g},e.prototype.startActiveSpan=function(e,t,n,r){var i,o,a;if(!(arguments.length<2)){2===arguments.length?a=t:3===arguments.length?(i=t,a=n):(i=t,o=n,a=r);var s=null!=o?o:So.active(),u=this.startSpan(e,i,s),c=zo.setSpan(s,u);return So.with(c,a,void 0,u)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}();var su,uu=function(){return uu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},uu.apply(this,arguments)},cu=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},lu=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},fu=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},pu=function(){function e(e,t){var n,r=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(n=this._attributes)&&void 0!==n?n:{},this._asyncAttributesPromise=null==t?void 0:t.then((function(e){return r._attributes=Object.assign({},r._attributes,e),r.asyncAttributesPending=!1,e}),(function(e){return Oo.debug("a resource's async attributes promise rejected: %s",e),r.asyncAttributesPending=!1,{}}))}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})[Ma]="unknown_service",t[Ha]=Fa[Ha],t[Ua]=Fa[Ua],t[Ba]=Fa[Ba],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&Oo.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return cu(this,void 0,void 0,(function(){return lu(this,(function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.merge=function(t){var n,r=this;if(!t)return this;var i=uu(uu({},this._syncAttributes),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(i);var o=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((function(e){var n,i=fu(e,2),o=i[0],a=i[1];return uu(uu(uu(uu({},r._syncAttributes),o),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes),a)}));return new e(i,o)},e.EMPTY=new e({}),e}(),du=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hu=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,n=[];try{for(var r=du(this._spanProcessors),i=r.next();!i.done;i=r.next()){var o=i.value;n.push(o.forceFlush())}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e){Promise.all(n).then((function(){e()})).catch((function(t){ra(t||new Error("MultiSpanProcessor: forceFlush failed")),e()}))}))},e.prototype.onStart=function(e,t){var n,r;try{for(var i=du(this._spanProcessors),o=i.next();!o.done;o=i.next()){o.value.onStart(e,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(e){var t,n;try{for(var r=du(this._spanProcessors),i=r.next();!i.done;i=r.next()){i.value.onEnd(e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,n=[];try{for(var r=du(this._spanProcessors),i=r.next();!i.done;i=r.next()){var o=i.value;n.push(o.shutdown())}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e,t){Promise.all(n).then((function(){e()}),t)}))},e}(),vu=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}();!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(su||(su={}));var mu,gu,yu,_u=function(){function e(e){var t;void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),r=new WeakMap;e.length>0;)n=Os(n,e.shift(),0,r);return n}({},Js(),Ys(e));this.resource=null!==(t=n.resource)&&void 0!==t?t:pu.empty(),this.resource=pu.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var r=this._buildExporterFromEnv();if(void 0!==r){var i=new nu(r);this.activeSpanProcessor=i}else this.activeSpanProcessor=new vu}return e.prototype.getTracer=function(e,t,n){var r=e+"@"+(t||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._tracers.has(r)||this._tracers.set(r,new au({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._config,this)),this._tracers.get(r)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(e){return Oo.error("Error while trying to shutdown current span processor",e)})),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new hu(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),zo.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&So.setGlobalContextManager(e.contextManager),e.propagator&&Ho.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((function(t){return new Promise((function(n){var r,i=setTimeout((function(){n(new Error("Span processor did not completed within timeout period of "+e+" ms")),r=su.timeout}),e);t.forceFlush().then((function(){clearTimeout(i),r!==su.timeout&&(r=su.resolved,n(r))})).catch((function(e){clearTimeout(i),r=su.error,n(e)}))}))}));return new Promise((function(e,n){Promise.all(t).then((function(t){var r=t.filter((function(e){return e!==su.resolved}));r.length>0?n(r):e()})).catch((function(e){return n([e])}))}))},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set(Ea().OTEL_PROPAGATORS)),n=t.map((function(t){var n=e._getPropagator(t);return n||Oo.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),n})).reduce((function(e,t){return t&&e.push(t),e}),[]);return 0===n.length?void 0:1===t.length?n[0]:new es({propagators:n})},e.prototype._buildExporterFromEnv=function(){var e=Ea().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||Oo.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new fs}],["baggage",function(){return new Wo}]]),e._registeredExporters=new Map,e}(),bu=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Eu=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Tu=function(){function e(){this._enabled=!1,this._currentContext=Si}return e.prototype._bindFunction=function(e,t){void 0===e&&(e=Si);var n=this,r=function(){for(var r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return n.with(e,(function(){return t.apply(r,i)}))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),r},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):t},e.prototype.disable=function(){return this._currentContext=Si,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=Si),this},e.prototype.with=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=this._currentContext;this._currentContext=e||Si;try{return t.call.apply(t,Eu([n],bu(r),!1))}finally{this._currentContext=o}},e}(),wu=(mu=function(e,t){return mu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},mu(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}mu(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Su=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;if(t.contextManager)throw"contextManager should be defined in register method not in constructor";if(t.propagator)throw"propagator should be defined in register method not in constructor";return n}return wu(t,e),t.prototype.register=function(t){void 0===t&&(t={}),void 0===t.contextManager&&(t.contextManager=new Tu),t.contextManager&&t.contextManager.enable(),e.prototype.register.call(this,t)},t}(_u);function Ou(e,t,n){if(t in n&&"number"==typeof n[t])return e.addEvent(t,n[t]),e}function ku(e,t){Ou(e,gu.FETCH_START,t),Ou(e,gu.DOMAIN_LOOKUP_START,t),Ou(e,gu.DOMAIN_LOOKUP_END,t),Ou(e,gu.CONNECT_START,t),Ou(e,gu.SECURE_CONNECTION_START,t),Ou(e,gu.CONNECT_END,t),Ou(e,gu.REQUEST_START,t),Ou(e,gu.RESPONSE_START,t),Ou(e,gu.RESPONSE_END,t);var n=t[gu.ENCODED_BODY_SIZE];void 0!==n&&e.setAttribute(Na,n);var r=t[gu.DECODED_BODY_SIZE];void 0!==r&&n!==r&&e.setAttribute(Da,r)}function Cu(e,t,n,r,i,o){void 0===i&&(i=new WeakSet);var a=Ru(e),s=function(e,t,n,r,i,o){var a=Ja(t),s=Ja(n),u=r.filter((function(t){var n=Ja(Wa(t[gu.FETCH_START])),r=Ja(Wa(t[gu.RESPONSE_END]));return t.initiatorType.toLowerCase()===(o||"xmlhttprequest")&&t.name===e&&n>=a&&r<=s}));u.length>0&&(u=u.filter((function(e){return!i.has(e)})));return u}(e=a.toString(),t,n,r,i,o);if(0===s.length)return{mainRequest:void 0};if(1===s.length)return{mainRequest:s[0]};var u=function(e){return e.slice().sort((function(e,t){var n=e[gu.FETCH_START],r=t[gu.FETCH_START];return n>r?1:n<r?-1:0}))}(s);if(a.origin!==location.origin&&u.length>1){var c=u[0],l=function(e,t,n){for(var r,i=Ja(n),o=Ja(Wa(t)),a=e[1],s=e.length,u=1;u<s;u++){var c=e[u],l=Ja(Wa(c[gu.FETCH_START])),f=i-Ja(Wa(c[gu.RESPONSE_END]));l>=o&&(!r||f<r)&&(r=f,a=c)}return a}(u,c[gu.RESPONSE_END],n),f=c[gu.RESPONSE_END];return l[gu.FETCH_START]<f&&(l=c,c=void 0),{corsPreFlightRequest:c,mainRequest:l}}return{mainRequest:s[0]}}function Ru(e){if("function"==typeof URL)return new URL(e,"undefined"!=typeof document?document.baseURI:"undefined"!=typeof location?location.href:void 0);var t=(yu||(yu=document.createElement("a")),yu);return t.href=e,t}function Pu(e,t){var n=t||[];return("string"==typeof n||n instanceof RegExp)&&(n=[n]),Ru(e).origin===location.origin||n.some((function(t){return Ls(e,t)}))}!function(e){e.CONNECT_END="connectEnd",e.CONNECT_START="connectStart",e.DECODED_BODY_SIZE="decodedBodySize",e.DOM_COMPLETE="domComplete",e.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",e.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",e.DOM_INTERACTIVE="domInteractive",e.DOMAIN_LOOKUP_END="domainLookupEnd",e.DOMAIN_LOOKUP_START="domainLookupStart",e.ENCODED_BODY_SIZE="encodedBodySize",e.FETCH_START="fetchStart",e.LOAD_EVENT_END="loadEventEnd",e.LOAD_EVENT_START="loadEventStart",e.NAVIGATION_START="navigationStart",e.REDIRECT_END="redirectEnd",e.REDIRECT_START="redirectStart",e.REQUEST_START="requestStart",e.RESPONSE_END="responseEnd",e.RESPONSE_START="responseStart",e.SECURE_CONNECTION_START="secureConnectionStart",e.UNLOAD_EVENT_END="unloadEventEnd",e.UNLOAD_EVENT_START="unloadEventStart"}(gu||(gu={}));var Au="OT_ZONE_CONTEXT",Iu=function(){function e(){this._enabled=!1,this._zoneCounter=0}return e.prototype._activeContextFromZone=function(e){return e&&e.get(Au)||Si},e.prototype._bindFunction=function(e,t){var n=this,r=function(){for(var r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return n.with(e,(function(){return t.apply(r,i)}))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),r},e.prototype._bindListener=function(e,t){var n=t;return void 0!==n.__ot_listeners||(n.__ot_listeners={},"function"==typeof n.addEventListener&&(n.addEventListener=this._patchAddEventListener(n,n.addEventListener,e)),"function"==typeof n.removeEventListener&&(n.removeEventListener=this._patchRemoveEventListener(n,n.removeEventListener))),t},e.prototype._createZoneName=function(){this._zoneCounter++;var e=Math.random();return this._zoneCounter+"-"+e},e.prototype._createZone=function(e,t){var n;return Zone.current.fork({name:e,properties:(n={},n[Au]=t,n)})},e.prototype._getActiveZone=function(){return Zone.current},e.prototype._patchAddEventListener=function(e,t,n){var r=this;return function(i,o,a){void 0===e.__ot_listeners&&(e.__ot_listeners={});var s=e.__ot_listeners[i];void 0===s&&(s=new WeakMap,e.__ot_listeners[i]=s);var u=r.bind(n,o);return s.set(o,u),t.call(this,i,u,a)}},e.prototype._patchRemoveEventListener=function(e,t){return function(n,r){if(void 0===e.__ot_listeners||void 0===e.__ot_listeners[n])return t.call(this,n,r);var i=e.__ot_listeners[n],o=i.get(r);return i.delete(r),t.call(this,n,o||r)}},e.prototype.active=function(){if(!this._enabled)return Si;var e=this._getActiveZone(),t=this._activeContextFromZone(e);return t||Si},e.prototype.bind=function(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):(void 0===(n=t)&&(n={}),"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener&&this._bindListener(e,t),t);var n},e.prototype.disable=function(){return this._enabled=!1,this},e.prototype.enable=function(){return this._enabled=!0,this},e.prototype.with=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=this._createZoneName();return this._createZone(o,e).run(t,n,r)},e}();!function(e){var t=e.performance;function n(e){t&&t.mark&&t.mark(e)}function r(e,n){t&&t.measure&&t.measure(e,n)}n("Zone");var i=e.__Zone_symbol_prefix||"__zone_symbol__";function o(e){return i+e}var a=!0===e[o("forceDuplicateZoneCheck")];if(e.Zone){if(a||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}var s=function(){function t(e,n){_classCallCheck(this,t),this._parent=e,this._name=n?n.name||"unnamed":"<root>",this._properties=n&&n.properties||{},this._zoneDelegate=new l(this,this._parent&&this._parent._zoneDelegate,n)}return _createClass(t,[{key:"parent",get:function(){return this._parent}},{key:"name",get:function(){return this._name}},{key:"get",value:function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]}},{key:"getZoneWith",value:function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null}},{key:"fork",value:function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)}},{key:"wrap",value:function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}}},{key:"run",value:function(e,t,n,r){L={parent:L,zone:this};try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{L=L.parent}}},{key:"runGuarded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;L={parent:L,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{L=L.parent}}},{key:"runTask",value:function(e,t,n){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||b).name+"; Execution: "+this.name+")");if(e.state!==E||e.type!==P&&e.type!==R){var r=e.state!=S;r&&e._transitionTo(S,w),e.runCount++;var i=x;x=e,L={parent:L,zone:this};try{e.type==R&&e.data&&!e.data.isPeriodic&&(e.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{e.state!==E&&e.state!==k&&(e.type==P||e.data&&e.data.isPeriodic?r&&e._transitionTo(w,S):(e.runCount=0,this._updateTaskCount(e,-1),r&&e._transitionTo(E,S,E))),L=L.parent,x=i}}}},{key:"scheduleTask",value:function(e){if(e.zone&&e.zone!==this)for(var t=this;t;){if(t===e.zone)throw Error("can not reschedule task to ".concat(this.name," which is descendants of the original zone ").concat(e.zone.name));t=t.parent}e._transitionTo(T,E);var n=[];e._zoneDelegates=n,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(t){throw e._transitionTo(k,T,E),this._zoneDelegate.handleError(this,t),t}return e._zoneDelegates===n&&this._updateTaskCount(e,1),e.state==T&&e._transitionTo(w,T),e}},{key:"scheduleMicroTask",value:function(e,t,n,r){return this.scheduleTask(new f(C,e,t,n,r,void 0))}},{key:"scheduleMacroTask",value:function(e,t,n,r,i){return this.scheduleTask(new f(R,e,t,n,r,i))}},{key:"scheduleEventTask",value:function(e,t,n,r,i){return this.scheduleTask(new f(P,e,t,n,r,i))}},{key:"cancelTask",value:function(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||b).name+"; Execution: "+this.name+")");e._transitionTo(O,w,S);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(k,O),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(E,O),e.runCount=0,e}},{key:"_updateTaskCount",value:function(e,t){var n=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(var r=0;r<n.length;r++)n[r]._updateTaskCount(e.type,t)}}],[{key:"assertZonePatched",value:function(){if(e.Promise!==A.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}},{key:"root",get:function(){for(var e=t.current;e.parent;)e=e.parent;return e}},{key:"current",get:function(){return L.zone}},{key:"currentTask",get:function(){return x}},{key:"__load_patch",value:function(i,o){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(A.hasOwnProperty(i)){if(!s&&a)throw Error("Already loaded patch: "+i)}else if(!e["__Zone_disable_"+i]){var u="Zone:"+i;n(u),A[i]=o(e,t,I),r(u,u)}}}]),t}();s.__symbol__=o;var u,c={name:"",onHasTask:function(e,t,n,r){return e.hasTask(n,r)},onScheduleTask:function(e,t,n,r){return e.scheduleTask(n,r)},onInvokeTask:function(e,t,n,r,i,o){return e.invokeTask(n,r,i,o)},onCancelTask:function(e,t,n,r){return e.cancelTask(n,r)}},l=function(){function e(t,n,r){_classCallCheck(this,e),this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=t,this._parentDelegate=n,this._forkZS=r&&(r&&r.onFork?r:n._forkZS),this._forkDlgt=r&&(r.onFork?n:n._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:n._forkCurrZone),this._interceptZS=r&&(r.onIntercept?r:n._interceptZS),this._interceptDlgt=r&&(r.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:n._interceptCurrZone),this._invokeZS=r&&(r.onInvoke?r:n._invokeZS),this._invokeDlgt=r&&(r.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:n._invokeCurrZone),this._handleErrorZS=r&&(r.onHandleError?r:n._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:n._handleErrorCurrZone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:n._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:n._scheduleTaskCurrZone),this._invokeTaskZS=r&&(r.onInvokeTask?r:n._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:n._invokeTaskCurrZone),this._cancelTaskZS=r&&(r.onCancelTask?r:n._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var i=r&&r.onHasTask,o=n&&n._hasTaskZS;(i||o)&&(this._hasTaskZS=i?r:c,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=t,r.onScheduleTask||(this._scheduleTaskZS=c,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this.zone),r.onInvokeTask||(this._invokeTaskZS=c,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this.zone),r.onCancelTask||(this._cancelTaskZS=c,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this.zone))}return _createClass(e,[{key:"fork",value:function(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new s(e,t)}},{key:"intercept",value:function(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t}},{key:"invoke",value:function(e,t,n,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,r,i):t.apply(n,r)}},{key:"handleError",value:function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)}},{key:"scheduleTask",value:function(e,t){var n=t;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),(n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t))||(n=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=C)throw new Error("Task is missing scheduleFn.");y(t)}return n}},{key:"invokeTask",value:function(e,t,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,r):t.callback.apply(n,r)}},{key:"cancelTask",value:function(e,t){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");n=t.cancelFn(t)}return n}},{key:"hasTask",value:function(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(t){this.handleError(e,t)}}},{key:"_updateTaskCount",value:function(e,t){var n=this._taskCounts,r=n[e],i=n[e]=r+t;if(i<0)throw new Error("More tasks executed then were scheduled.");if(0==r||0==i){var o={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};this.hasTask(this.zone,o)}}}]),e}(),f=function(){function t(n,r,i,o,a,s){if(_classCallCheck(this,t),this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=n,this.source=r,this.data=o,this.scheduleFn=a,this.cancelFn=s,!i)throw new Error("callback is not defined");this.callback=i;var u=this;n===P&&o&&o.useG?this.invoke=t.invokeTask:this.invoke=function(){return t.invokeTask.call(e,u,this,arguments)}}return _createClass(t,[{key:"zone",get:function(){return this._zone}},{key:"state",get:function(){return this._state}},{key:"cancelScheduleRequest",value:function(){this._transitionTo(E,T)}},{key:"_transitionTo",value:function(e,t,n){if(this._state!==t&&this._state!==n)throw new Error("".concat(this.type," '").concat(this.source,"': can not transition to '").concat(e,"', expecting state '").concat(t,"'").concat(n?" or '"+n+"'":"",", was '").concat(this._state,"'."));this._state=e,e==E&&(this._zoneDelegates=null)}},{key:"toString",value:function(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}},{key:"toJSON",value:function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}],[{key:"invokeTask",value:function(e,t,n){e||(e=this),N++;try{return e.runCount++,e.zone.runTask(e,t,n)}finally{1==N&&_(),N--}}}]),t}(),p=o("setTimeout"),d=o("Promise"),h=o("then"),v=[],m=!1;function g(t){if(u||e[d]&&(u=e[d].resolve(0)),u){var n=u[h];n||(n=u.then),n.call(u,t)}else e[p](t,0)}function y(e){0===N&&0===v.length&&g(_),e&&v.push(e)}function _(){if(!m){for(m=!0;v.length;){var e=v;v=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.zone.runTask(n,null,null)}catch(e){I.onUnhandledError(e)}}}I.microtaskDrainDone(),m=!1}}var b={name:"NO ZONE"},E="notScheduled",T="scheduling",w="scheduled",S="running",O="canceling",k="unknown",C="microTask",R="macroTask",P="eventTask",A={},I={symbol:o,currentZoneFrame:function(){return L},onUnhandledError:D,microtaskDrainDone:D,scheduleMicroTask:y,showUncaughtError:function(){return!s[o("ignoreConsoleErrorUncaughtError")]},patchEventTarget:function(){return[]},patchOnProperties:D,patchMethod:function(){return D},bindArguments:function(){return[]},patchThen:function(){return D},patchMacroTask:function(){return D},patchEventPrototype:function(){return D},isIEOrEdge:function(){return!1},getGlobalObjects:function(){},ObjectDefineProperty:function(){return D},ObjectGetOwnPropertyDescriptor:function(){},ObjectCreate:function(){},ArraySlice:function(){return[]},patchClass:function(){return D},wrapWithCurrentZone:function(){return D},filterProperties:function(){return[]},attachOriginToPatched:function(){return D},_redefineProperty:function(){return D},patchCallbacks:function(){return D},nativeScheduleMicroTask:g},L={parent:null,zone:new s(null,null)},x=null,N=0;function D(){}r("Zone","Zone"),e.Zone=s}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||fn);var Lu=Object.getOwnPropertyDescriptor,xu=Object.defineProperty,Nu=Object.getPrototypeOf,Du=Object.create,ju=Array.prototype.slice,Mu="addEventListener",Uu="removeEventListener",Hu=Zone.__symbol__(Mu),Bu=Zone.__symbol__(Uu),Fu="true",zu="false",qu=Zone.__symbol__("");function Vu(e,t){return Zone.current.wrap(e,t)}function Zu(e,t,n,r,i){return Zone.current.scheduleMacroTask(e,t,n,r,i)}var Xu=Zone.__symbol__,Gu="undefined"!=typeof window,Wu=Gu?window:void 0,Ju=Gu&&Wu||"object"===("undefined"==typeof self?"undefined":_typeof(self))&&self||fn,Ku="removeAttribute";function Qu(e,t){for(var n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=Vu(e[n],t+"_"+n));return e}function Yu(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}var $u="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,ec=!("nw"in Ju)&&void 0!==Ju.process&&"[object process]"==={}.toString.call(Ju.process),tc=!ec&&!$u&&!(!Gu||!Wu.HTMLElement),nc=void 0!==Ju.process&&"[object process]"==={}.toString.call(Ju.process)&&!$u&&!(!Gu||!Wu.HTMLElement),rc={},ic=function(e){if(e=e||Ju.event){var t=rc[e.type];t||(t=rc[e.type]=Xu("ON_PROPERTY"+e.type));var n,r=this||e.target||Ju,i=r[t];if(tc&&r===Wu&&"error"===e.type){var o=e;!0===(n=i&&i.call(this,o.message,o.filename,o.lineno,o.colno,o.error))&&e.preventDefault()}else null==(n=i&&i.apply(this,arguments))||n||e.preventDefault();return n}};function oc(e,t,n){var r=Lu(e,t);!r&&n&&(Lu(n,t)&&(r={enumerable:!0,configurable:!0}));if(r&&r.configurable){var i=Xu("on"+t+"patched");if(!e.hasOwnProperty(i)||!e[i]){delete r.writable,delete r.value;var o=r.get,a=r.set,s=t.slice(2),u=rc[s];u||(u=rc[s]=Xu("ON_PROPERTY"+s)),r.set=function(t){var n=this;(n||e!==Ju||(n=Ju),n)&&("function"==typeof n[u]&&n.removeEventListener(s,ic),a&&a.call(n,null),n[u]=t,"function"==typeof t&&n.addEventListener(s,ic,!1))},r.get=function(){var n=this;if(n||e!==Ju||(n=Ju),!n)return null;var i=n[u];if(i)return i;if(o){var a=o.call(this);if(a)return r.set.call(this,a),"function"==typeof n[Ku]&&n.removeAttribute(t),a}return null},xu(e,t,r),e[i]=!0}}}function ac(e,t,n){if(t)for(var r=0;r<t.length;r++)oc(e,"on"+t[r],n);else{var i=[];for(var o in e)"on"==o.slice(0,2)&&i.push(o);for(var a=0;a<i.length;a++)oc(e,i[a],n)}}var sc=Xu("originalInstance");function uc(e){var t=Ju[e];if(t){Ju[Xu(e)]=t,Ju[e]=function(){var n=Qu(arguments,e);switch(n.length){case 0:this[sc]=new t;break;case 1:this[sc]=new t(n[0]);break;case 2:this[sc]=new t(n[0],n[1]);break;case 3:this[sc]=new t(n[0],n[1],n[2]);break;case 4:this[sc]=new t(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},fc(Ju[e],t);var n,r=new t((function(){}));for(n in r)"XMLHttpRequest"===e&&"responseBlob"===n||function(t){"function"==typeof r[t]?Ju[e].prototype[t]=function(){return this[sc][t].apply(this[sc],arguments)}:xu(Ju[e].prototype,t,{set:function(n){"function"==typeof n?(this[sc][t]=Vu(n,e+"."+t),fc(this[sc][t],n)):this[sc][t]=n},get:function(){return this[sc][t]}})}(n);for(n in t)"prototype"!==n&&t.hasOwnProperty(n)&&(Ju[e][n]=t[n])}}function cc(e,t,n){for(var r=e;r&&!r.hasOwnProperty(t);)r=Nu(r);!r&&e[t]&&(r=e);var i=Xu(t),o=null;if(r&&(!(o=r[i])||!r.hasOwnProperty(i))&&(o=r[i]=r[t],Yu(r&&Lu(r,t)))){var a=n(o,i,t);r[t]=function(){return a(this,arguments)},fc(r[t],o)}return o}function lc(e,t,n){var r=null;function i(e){var t=e.data;return t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)},r.apply(t.target,t.args),e}r=cc(e,t,(function(e){return function(t,r){var o=n(t,r);return o.cbIdx>=0&&"function"==typeof r[o.cbIdx]?Zu(o.name,r[o.cbIdx],o,i):e.apply(t,r)}}))}function fc(e,t){e[Xu("OriginalDelegate")]=t}var pc=!1,dc=!1;function hc(){if(pc)return dc;pc=!0;try{var e=Wu.navigator.userAgent;-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(dc=!0)}catch(e){}return dc}Zone.__load_patch("ZoneAwarePromise",(function(e,t,n){var r=Object.getOwnPropertyDescriptor,i=Object.defineProperty;var o=n.symbol,a=[],s=!0===e[o("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],u=o("Promise"),c=o("then"),l="__creationTrace__";n.onUnhandledError=function(e){if(n.showUncaughtError()){var t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},n.microtaskDrainDone=function(){for(var e=function(){var e=a.shift();try{e.zone.runGuarded((function(){if(e.throwOriginal)throw e.rejection;throw e}))}catch(e){!function(e){n.onUnhandledError(e);try{var r=t[f];"function"==typeof r&&r.call(this,e)}catch(e){}}(e)}};a.length;)e()};var f=o("unhandledPromiseRejectionHandler");function p(e){return e&&e.then}function d(e){return e}function h(e){return D.reject(e)}var v=o("state"),m=o("value"),g=o("finally"),y=o("parentPromiseValue"),_=o("parentPromiseState"),b="Promise.then",E=null,T=!0,w=!1,S=0;function O(e,t){return function(n){try{P(e,t,n)}catch(t){P(e,!1,t)}}}var k=function(){var e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},C="Promise resolved with itself",R=o("currentTaskTrace");function P(e,r,o){var u=k();if(e===o)throw new TypeError(C);if(e[v]===E){var c=null;try{"object"!==_typeof(o)&&"function"!=typeof o||(c=o&&o.then)}catch(t){return u((function(){P(e,!1,t)}))(),e}if(r!==w&&o instanceof D&&o.hasOwnProperty(v)&&o.hasOwnProperty(m)&&o[v]!==E)I(o),P(e,o[v],o[m]);else if(r!==w&&"function"==typeof c)try{c.call(o,u(O(e,r)),u(O(e,!1)))}catch(t){u((function(){P(e,!1,t)}))()}else{e[v]=r;var f=e[m];if(e[m]=o,e[g]===g&&r===T&&(e[v]=e[_],e[m]=e[y]),r===w&&o instanceof Error){var p=t.currentTask&&t.currentTask.data&&t.currentTask.data[l];p&&i(o,R,{configurable:!0,enumerable:!1,writable:!0,value:p})}for(var d=0;d<f.length;)L(e,f[d++],f[d++],f[d++],f[d++]);if(0==f.length&&r==w){e[v]=S;var h=o;try{throw new Error("Uncaught (in promise): "+function(e){if(e&&e.toString===Object.prototype.toString){return(e.constructor&&e.constructor.name||"")+": "+JSON.stringify(e)}return e?e.toString():Object.prototype.toString.call(e)}(o)+(o&&o.stack?"\n"+o.stack:""))}catch(e){h=e}s&&(h.throwOriginal=!0),h.rejection=o,h.promise=e,h.zone=t.current,h.task=t.currentTask,a.push(h),n.scheduleMicroTask()}}}return e}var A=o("rejectionHandledHandler");function I(e){if(e[v]===S){try{var n=t[A];n&&"function"==typeof n&&n.call(this,{rejection:e[m],promise:e})}catch(e){}e[v]=w;for(var r=0;r<a.length;r++)e===a[r].promise&&a.splice(r,1)}}function L(e,t,n,r,i){I(e);var o=e[v],a=o?"function"==typeof r?r:d:"function"==typeof i?i:h;t.scheduleMicroTask(b,(function(){try{var r=e[m],i=!!n&&g===n[g];i&&(n[y]=r,n[_]=o);var s=t.run(a,void 0,i&&a!==h&&a!==d?[]:[r]);P(n,!0,s)}catch(e){P(n,!1,e)}}),n)}var x=function(){},N=e.AggregateError,D=function(e,n){function r(e){_classCallCheck(this,r);var t=this;if(!(t instanceof r))throw new Error("Must be an instanceof Promise.");t[v]=E,t[m]=[];try{var n=k();e&&e(n(O(t,T)),n(O(t,w)))}catch(e){P(t,!1,e)}}return _createClass(r,[{key:Symbol.toStringTag,get:function(){return"Promise"}},{key:Symbol.species,get:function(){return r}},{key:"then",value:function(e,n){var i,o=null===(i=this.constructor)||void 0===i?void 0:i[Symbol.species];o&&"function"==typeof o||(o=this.constructor||r);var a=new o(x),s=t.current;return this[v]==E?this[m].push(s,a,e,n):L(this,s,a,e,n),a}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"finally",value:function(e){var n,i=null===(n=this.constructor)||void 0===n?void 0:n[Symbol.species];i&&"function"==typeof i||(i=r);var o=new i(x);o[g]=g;var a=t.current;return this[v]==E?this[m].push(a,o,e,e):L(this,a,o,e,e),o}}],[{key:"toString",value:function(){return"function ZoneAwarePromise() { [native code] }"}},{key:"resolve",value:function(e){return P(new this(null),T,e)}},{key:"reject",value:function(e){return P(new this(null),w,e)}},{key:"any",value:function(e){if(!e||"function"!=typeof e[Symbol.iterator])return Promise.reject(new N([],"All promises were rejected"));var t=[],n=0;try{var i,o=_createForOfIteratorHelper(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;n++,t.push(r.resolve(a))}}catch(e){o.e(e)}finally{o.f()}}catch(e){return Promise.reject(new N([],"All promises were rejected"))}if(0===n)return Promise.reject(new N([],"All promises were rejected"));var s=!1,u=[];return new r((function(e,r){for(var i=0;i<t.length;i++)t[i].then((function(t){s||(s=!0,e(t))}),(function(e){u.push(e),0===--n&&(s=!0,r(new N(u,"All promises were rejected")))}))}))}},{key:"race",value:function(e){var t,n,r=new this((function(e,r){t=e,n=r}));function i(e){t(e)}function o(e){n(e)}var a,s=_createForOfIteratorHelper(e);try{for(s.s();!(a=s.n()).done;){var u=a.value;p(u)||(u=this.resolve(u)),u.then(i,o)}}catch(e){s.e(e)}finally{s.f()}return r}},{key:"all",value:function(e){return r.allWithCallback(e)}},{key:"allSettled",value:function(e){return(this&&this.prototype instanceof r?this:r).allWithCallback(e,{thenCallback:function(e){return{status:"fulfilled",value:e}},errorCallback:function(e){return{status:"rejected",reason:e}}})}},{key:"allWithCallback",value:function(e,t){var n,r,i,o=this,a=new this((function(e,t){n=e,r=t})),s=2,u=0,c=[],l=_createForOfIteratorHelper(e);try{var f=function(){var e=i.value;p(e)||(e=o.resolve(e));var a=u;try{e.then((function(e){c[a]=t?t.thenCallback(e):e,0===--s&&n(c)}),(function(e){t?(c[a]=t.errorCallback(e),0===--s&&n(c)):r(e)}))}catch(e){r(e)}s++,u++};for(l.s();!(i=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}return 0===(s-=2)&&n(c),a}}]),r}();D.resolve=D.resolve,D.reject=D.reject,D.race=D.race,D.all=D.all;var j=e[u]=e.Promise;e.Promise=D;var M=o("thenPatched");function U(e){var t=e.prototype,n=r(t,"then");if(!n||!1!==n.writable&&n.configurable){var i=t.then;t[c]=i,e.prototype.then=function(e,t){var n=this;return new D((function(e,t){i.call(n,e,t)})).then(e,t)},e[M]=!0}}return n.patchThen=U,j&&(U(j),cc(e,"fetch",(function(e){return t=e,function(e,n){var r=t.apply(e,n);if(r instanceof D)return r;var i=r.constructor;return i[M]||U(i),r};var t}))),Promise[t.__symbol__("uncaughtPromiseErrors")]=a,D})),Zone.__load_patch("toString",(function(e){var t=Function.prototype.toString,n=Xu("OriginalDelegate"),r=Xu("Promise"),i=Xu("Error"),o=function(){if("function"==typeof this){var o=this[n];if(o)return"function"==typeof o?t.call(o):Object.prototype.toString.call(o);if(this===Promise){var a=e[r];if(a)return t.call(a)}if(this===Error){var s=e[i];if(s)return t.call(s)}}return t.call(this)};o[n]=t,Function.prototype.toString=o;var a=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":a.call(this)}}));var vc=!1;if("undefined"!=typeof window)try{var mc=Object.defineProperty({},"passive",{get:function(){vc=!0}});window.addEventListener("test",mc,mc),window.removeEventListener("test",mc,mc)}catch(e){vc=!1}var gc={useG:!0},yc={},_c={},bc=new RegExp("^"+qu+"(\\w+)(true|false)$"),Ec=Xu("propagationStopped");function Tc(e,t){var n=(t?t(e):e)+zu,r=(t?t(e):e)+Fu,i=qu+n,o=qu+r;yc[e]={},yc[e][zu]=i,yc[e][Fu]=o}function wc(e,t,n,r){var i=r&&r.add||Mu,o=r&&r.rm||Uu,a=r&&r.listeners||"eventListeners",s=r&&r.rmAll||"removeAllListeners",u=Xu(i),c="."+i+":",l="prependListener",f="."+l+":",p=function(e,t,n){if(!e.isRemoved){var r,i=e.callback;"object"===_typeof(i)&&i.handleEvent&&(e.callback=function(e){return i.handleEvent(e)},e.originalDelegate=i);try{e.invoke(e,t,[n])}catch(e){r=e}var a=e.options;if(a&&"object"===_typeof(a)&&a.once){var s=e.originalDelegate?e.originalDelegate:e.callback;t[o].call(t,n.type,s,a)}return r}};function d(n,r,i){if(r=r||e.event){var o=n||r.target||e,a=o[yc[r.type][i?Fu:zu]];if(a){var s=[];if(1===a.length){var u=p(a[0],o,r);u&&s.push(u)}else for(var c=a.slice(),l=0;l<c.length&&(!r||!0!==r[Ec]);l++){var f=p(c[l],o,r);f&&s.push(f)}if(1===s.length)throw s[0];for(var d=function(){var e=s[h];t.nativeScheduleMicroTask((function(){throw e}))},h=0;h<s.length;h++)d()}}}var h=function(e){return d(this,e,!1)},v=function(e){return d(this,e,!0)};function m(t,n){if(!t)return!1;var r=!0;n&&void 0!==n.useG&&(r=n.useG);var p=n&&n.vh,d=!0;n&&void 0!==n.chkDup&&(d=n.chkDup);var m=!1;n&&void 0!==n.rt&&(m=n.rt);for(var g=t;g&&!g.hasOwnProperty(i);)g=Nu(g);if(!g&&t[i]&&(g=t),!g)return!1;if(g[u])return!1;var y,_=n&&n.eventNameToString,b={},E=g[u]=g[i],T=g[Xu(o)]=g[o],w=g[Xu(a)]=g[a],S=g[Xu(s)]=g[s];n&&n.prepend&&(y=g[Xu(n.prepend)]=g[n.prepend]);var O=r?function(e){if(!b.isExisting)return E.call(b.target,b.eventName,b.capture?v:h,b.options)}:function(e){return E.call(b.target,b.eventName,e.invoke,b.options)},k=r?function(e){if(!e.isRemoved){var t,n=yc[e.eventName];n&&(t=n[e.capture?Fu:zu]);var r=t&&e.target[t];if(r)for(var i=0;i<r.length;i++){if(r[i]===e){r.splice(i,1),e.isRemoved=!0,0===r.length&&(e.allRemoved=!0,e.target[t]=null);break}}}if(e.allRemoved)return T.call(e.target,e.eventName,e.capture?v:h,e.options)}:function(e){return T.call(e.target,e.eventName,e.invoke,e.options)},C=n&&n.diff?n.diff:function(e,t){var n=_typeof(t);return"function"===n&&e.callback===t||"object"===n&&e.originalDelegate===t},R=Zone[Xu("UNPATCHED_EVENTS")],P=e[Xu("PASSIVE_EVENTS")],A=function(t,i,o,a){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return function(){var c=this||e,l=arguments[0];n&&n.transferEventName&&(l=n.transferEventName(l));var f=arguments[1];if(!f)return t.apply(this,arguments);if(ec&&"uncaughtException"===l)return t.apply(this,arguments);var h=!1;if("function"!=typeof f){if(!f.handleEvent)return t.apply(this,arguments);h=!0}if(!p||p(t,f,c,arguments)){var v=vc&&!!P&&-1!==P.indexOf(l),m=function(e,t){return!vc&&"object"===_typeof(e)&&e?!!e.capture:vc&&t?"boolean"==typeof e?{capture:e,passive:!0}:e?"object"===_typeof(e)&&!1!==e.passive?Object.assign(Object.assign({},e),{passive:!0}):e:{passive:!0}:e}(arguments[2],v);if(R)for(var g=0;g<R.length;g++)if(l===R[g])return v?t.call(c,l,f,m):t.apply(this,arguments);var y=!!m&&("boolean"==typeof m||m.capture),E=!(!m||"object"!==_typeof(m))&&m.once,T=Zone.current,w=yc[l];w||(Tc(l,_),w=yc[l]);var S,O=w[y?Fu:zu],k=c[O],A=!1;if(k){if(A=!0,d)for(var I=0;I<k.length;I++)if(C(k[I],f))return}else k=c[O]=[];var L=c.constructor.name,x=_c[L];x&&(S=x[l]),S||(S=L+i+(_?_(l):l)),b.options=m,E&&(b.options.once=!1),b.target=c,b.capture=y,b.eventName=l,b.isExisting=A;var N=r?gc:void 0;N&&(N.taskData=b);var D=T.scheduleEventTask(S,f,N,o,a);return b.target=null,N&&(N.taskData=null),E&&(m.once=!0),(vc||"boolean"!=typeof D.options)&&(D.options=m),D.target=c,D.capture=y,D.eventName=l,h&&(D.originalDelegate=f),u?k.unshift(D):k.push(D),s?c:void 0}}};return g[i]=A(E,c,O,k,m),y&&(g[l]=A(y,f,(function(e){return y.call(b.target,b.eventName,e.invoke,b.options)}),k,m,!0)),g[o]=function(){var t=this||e,r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));var i=arguments[2],o=!!i&&("boolean"==typeof i||i.capture),a=arguments[1];if(!a)return T.apply(this,arguments);if(!p||p(T,a,t,arguments)){var s,u=yc[r];u&&(s=u[o?Fu:zu]);var c=s&&t[s];if(c)for(var l=0;l<c.length;l++){var f=c[l];if(C(f,a)){if(c.splice(l,1),f.isRemoved=!0,0===c.length)if(f.allRemoved=!0,t[s]=null,"string"==typeof r)t[qu+"ON_PROPERTY"+r]=null;return f.zone.cancelTask(f),m?t:void 0}}return T.apply(this,arguments)}},g[a]=function(){var t=this||e,r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));for(var i=[],o=Sc(t,_?_(r):r),a=0;a<o.length;a++){var s=o[a],u=s.originalDelegate?s.originalDelegate:s.callback;i.push(u)}return i},g[s]=function(){var t=this||e,r=arguments[0];if(r){n&&n.transferEventName&&(r=n.transferEventName(r));var i=yc[r];if(i){var a=i[zu],u=i[Fu],c=t[a],l=t[u];if(c)for(var f=c.slice(),p=0;p<f.length;p++){var d=f[p],h=d.originalDelegate?d.originalDelegate:d.callback;this[o].call(this,r,h,d.options)}if(l)for(var v=l.slice(),g=0;g<v.length;g++){var y=v[g],_=y.originalDelegate?y.originalDelegate:y.callback;this[o].call(this,r,_,y.options)}}}else{for(var b=Object.keys(t),E=0;E<b.length;E++){var T=b[E],w=bc.exec(T),S=w&&w[1];S&&"removeListener"!==S&&this[s].call(this,S)}this[s].call(this,"removeListener")}if(m)return this},fc(g[i],E),fc(g[o],T),S&&fc(g[s],S),w&&fc(g[a],w),!0}for(var g=[],y=0;y<n.length;y++)g[y]=m(n[y],r);return g}function Sc(e,t){if(!t){var n=[];for(var r in e){var i=bc.exec(r),o=i&&i[1];if(o&&(!t||o===t)){var a=e[r];if(a)for(var s=0;s<a.length;s++)n.push(a[s])}}return n}var u=yc[t];u||(Tc(t),u=yc[t]);var c=e[u[zu]],l=e[u[Fu]];return c?l?c.concat(l):c.slice():l?l.slice():[]}function Oc(e,t){var n=e.Event;n&&n.prototype&&t.patchMethod(n.prototype,"stopImmediatePropagation",(function(e){return function(t,n){t[Ec]=!0,e&&e.apply(t,n)}}))}function kc(e,t,n,r,i){var o=Zone.__symbol__(r);if(!t[o]){var a=t[o]=t[r];t[r]=function(o,s,u){return s&&s.prototype&&i.forEach((function(t){var i="".concat(n,".").concat(r,"::")+t,o=s.prototype;try{if(o.hasOwnProperty(t)){var a=e.ObjectGetOwnPropertyDescriptor(o,t);a&&a.value?(a.value=e.wrapWithCurrentZone(a.value,i),e._redefineProperty(s.prototype,t,a)):o[t]&&(o[t]=e.wrapWithCurrentZone(o[t],i))}else o[t]&&(o[t]=e.wrapWithCurrentZone(o[t],i))}catch(e){}})),a.call(t,o,s,u)},e.attachOriginToPatched(t[r],a)}}function Cc(e,t,n){if(!n||0===n.length)return t;var r=n.filter((function(t){return t.target===e}));if(!r||0===r.length)return t;var i=r[0].ignoreProperties;return t.filter((function(e){return-1===i.indexOf(e)}))}function Rc(e,t,n,r){e&&ac(e,Cc(e,t,n),r)}function Pc(e){return Object.getOwnPropertyNames(e).filter((function(e){return e.startsWith("on")&&e.length>2})).map((function(e){return e.substring(2)}))}function Ac(e,t){if((!ec||nc)&&!Zone[e.symbol("patchEvents")]){var n=t.__Zone_ignore_on_properties,r=[];if(tc){var i=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);var o=function(){try{var e=Wu.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(e){}return!1}()?[{target:i,ignoreProperties:["error"]}]:[];Rc(i,Pc(i),n?n.concat(o):n,Nu(i))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(var a=0;a<r.length;a++){var s=t[r[a]];s&&s.prototype&&Rc(s.prototype,Pc(s.prototype),n)}}}Zone.__load_patch("util",(function(e,t,n){var r=Pc(e);n.patchOnProperties=ac,n.patchMethod=cc,n.bindArguments=Qu,n.patchMacroTask=lc;var i=t.__symbol__("BLACK_LISTED_EVENTS"),o=t.__symbol__("UNPATCHED_EVENTS");e[o]&&(e[i]=e[o]),e[i]&&(t[i]=t[o]=e[i]),n.patchEventPrototype=Oc,n.patchEventTarget=wc,n.isIEOrEdge=hc,n.ObjectDefineProperty=xu,n.ObjectGetOwnPropertyDescriptor=Lu,n.ObjectCreate=Du,n.ArraySlice=ju,n.patchClass=uc,n.wrapWithCurrentZone=Vu,n.filterProperties=Cc,n.attachOriginToPatched=fc,n._redefineProperty=Object.defineProperty,n.patchCallbacks=kc,n.getGlobalObjects=function(){return{globalSources:_c,zoneSymbolEventNames:yc,eventNames:r,isBrowser:tc,isMix:nc,isNode:ec,TRUE_STR:Fu,FALSE_STR:zu,ZONE_SYMBOL_PREFIX:qu,ADD_EVENT_LISTENER_STR:Mu,REMOVE_EVENT_LISTENER_STR:Uu}}}));var Ic=Xu("zoneTask");function Lc(e,t,n,r){var i=null,o=null;n+=r;var a={};function s(t){var n=t.data;return n.args[0]=function(){return t.invoke.apply(this,arguments)},n.handleId=i.apply(e,n.args),t}function u(t){return o.call(e,t.data.handleId)}i=cc(e,t+=r,(function(n){return function(i,o){if("function"==typeof o[0]){var c={isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?o[1]||0:void 0,args:o},l=o[0];o[0]=function(){try{return l.apply(this,arguments)}finally{c.isPeriodic||("number"==typeof c.handleId?delete a[c.handleId]:c.handleId&&(c.handleId[Ic]=null))}};var f=Zu(t,o[0],c,s,u);if(!f)return f;var p=f.data.handleId;return"number"==typeof p?a[p]=f:p&&(p[Ic]=f),p&&p.ref&&p.unref&&"function"==typeof p.ref&&"function"==typeof p.unref&&(f.ref=p.ref.bind(p),f.unref=p.unref.bind(p)),"number"==typeof p||p?p:f}return n.apply(e,o)}})),o=cc(e,n,(function(t){return function(n,r){var i,o=r[0];"number"==typeof o?i=a[o]:(i=o&&o[Ic])||(i=o),i&&"string"==typeof i.type?"notScheduled"!==i.state&&(i.cancelFn&&i.data.isPeriodic||0===i.runCount)&&("number"==typeof o?delete a[o]:o&&(o[Ic]=null),i.zone.cancelTask(i)):t.apply(e,r)}}))}function xc(e,t){if(!Zone[t.symbol("patchEventTarget")]){for(var n=t.getGlobalObjects(),r=n.eventNames,i=n.zoneSymbolEventNames,o=n.TRUE_STR,a=n.FALSE_STR,s=n.ZONE_SYMBOL_PREFIX,u=0;u<r.length;u++){var c=r[u],l=s+(c+a),f=s+(c+o);i[c]={},i[c][a]=l,i[c][o]=f}var p=e.EventTarget;if(p&&p.prototype)return t.patchEventTarget(e,t,[p&&p.prototype]),!0}}Zone.__load_patch("legacy",(function(e){var t=e[Zone.__symbol__("legacyPatch")];t&&t()})),Zone.__load_patch("queueMicrotask",(function(e,t,n){n.patchMethod(e,"queueMicrotask",(function(e){return function(e,n){t.current.scheduleMicroTask("queueMicrotask",n[0])}}))})),Zone.__load_patch("timers",(function(e){var t="set",n="clear";Lc(e,t,n,"Timeout"),Lc(e,t,n,"Interval"),Lc(e,t,n,"Immediate")})),Zone.__load_patch("requestAnimationFrame",(function(e){Lc(e,"request","cancel","AnimationFrame"),Lc(e,"mozRequest","mozCancel","AnimationFrame"),Lc(e,"webkitRequest","webkitCancel","AnimationFrame")})),Zone.__load_patch("blocking",(function(e,t){for(var n=["alert","prompt","confirm"],r=0;r<n.length;r++){cc(e,n[r],(function(n,r,i){return function(r,o){return t.current.run(n,e,o,i)}}))}})),Zone.__load_patch("EventTarget",(function(e,t,n){!function(e,t){t.patchEventPrototype(e,t)}(e,n),xc(e,n);var r=e.XMLHttpRequestEventTarget;r&&r.prototype&&n.patchEventTarget(e,n,[r.prototype])})),Zone.__load_patch("MutationObserver",(function(e,t,n){uc("MutationObserver"),uc("WebKitMutationObserver")})),Zone.__load_patch("IntersectionObserver",(function(e,t,n){uc("IntersectionObserver")})),Zone.__load_patch("FileReader",(function(e,t,n){uc("FileReader")})),Zone.__load_patch("on_property",(function(e,t,n){Ac(n,e)})),Zone.__load_patch("customElements",(function(e,t,n){!function(e,t){var n=t.getGlobalObjects(),r=n.isBrowser,i=n.isMix;(r||i)&&e.customElements&&"customElements"in e&&t.patchCallbacks(t,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,n)})),Zone.__load_patch("XHR",(function(e,t){!function(e){var u=e.XMLHttpRequest;if(!u)return;var c=u.prototype;var l=c[Hu],f=c[Bu];if(!l){var p=e.XMLHttpRequestEventTarget;if(p){var d=p.prototype;l=d[Hu],f=d[Bu]}}var h="readystatechange",v="scheduled";function m(e){var r=e.data,a=r.target;a[o]=!1,a[s]=!1;var u=a[i];l||(l=a[Hu],f=a[Bu]),u&&f.call(a,h,u);var c=a[i]=function(){if(a.readyState===a.DONE)if(!r.aborted&&a[o]&&e.state===v){var n=a[t.__symbol__("loadfalse")];if(0!==a.status&&n&&n.length>0){var i=e.invoke;e.invoke=function(){for(var n=a[t.__symbol__("loadfalse")],o=0;o<n.length;o++)n[o]===e&&n.splice(o,1);r.aborted||e.state!==v||i.call(e)},n.push(e)}else e.invoke()}else r.aborted||!1!==a[o]||(a[s]=!0)};return l.call(a,h,c),a[n]||(a[n]=e),T.apply(a,r.args),a[o]=!0,e}function g(){}function y(e){var t=e.data;return t.aborted=!0,w.apply(t.target,t.args)}var _=cc(c,"open",(function(){return function(e,t){return e[r]=0==t[2],e[a]=t[1],_.apply(e,t)}})),b=Xu("fetchTaskAborting"),E=Xu("fetchTaskScheduling"),T=cc(c,"send",(function(){return function(e,n){if(!0===t.current[E])return T.apply(e,n);if(e[r])return T.apply(e,n);var i={target:e,url:e[a],isPeriodic:!1,args:n,aborted:!1},o=Zu("XMLHttpRequest.send",g,i,m,y);e&&!0===e[s]&&!i.aborted&&o.state===v&&o.invoke()}})),w=cc(c,"abort",(function(){return function(e,r){var i=e[n];if(i&&"string"==typeof i.type){if(null==i.cancelFn||i.data&&i.data.aborted)return;i.zone.cancelTask(i)}else if(!0===t.current[b])return w.apply(e,r)}}))}(e);var n=Xu("xhrTask"),r=Xu("xhrSync"),i=Xu("xhrListener"),o=Xu("xhrScheduled"),a=Xu("xhrURL"),s=Xu("xhrErrorBeforeScheduled")})),Zone.__load_patch("geolocation",(function(e){e.navigator&&e.navigator.geolocation&&function(e,t){for(var n=e.constructor.name,r=function(){var r=t[i],o=e[r];if(o){if(!Yu(Lu(e,r)))return 1;e[r]=function(e){var t=function(){return e.apply(this,Qu(arguments,n+"."+r))};return fc(t,e),t}(o)}},i=0;i<t.length;i++)r()}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])})),Zone.__load_patch("PromiseRejectionEvent",(function(e,t){function n(t){return function(n){Sc(e,t).forEach((function(r){var i=e.PromiseRejectionEvent;if(i){var o=new i(t,{promise:n.promise,reason:n.rejection});r.invoke(o)}}))}}e.PromiseRejectionEvent&&(t[Xu("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),t[Xu("rejectionHandledHandler")]=n("rejectionhandled"))}));var Nc=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};function Dc(e){return Object.keys(e).map((function(t){return jc(t,e[t])}))}function jc(e,t){return{key:e,value:Mc(t)}}function Mc(e){var t=_typeof(e);return"string"===t?{stringValue:e}:"number"===t?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:"boolean"===t?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(Mc)}}:"object"===t&&null!=e?{kvlistValue:{values:Object.entries(e).map((function(e){var t=Nc(e,2);return jc(t[0],t[1])}))}}:{}}function Uc(e,t){var n,r=e.spanContext(),i=e.status,o=t?e.parentSpanId:null!=e.parentSpanId?Ta(e.parentSpanId):void 0;return{traceId:t?r.traceId:Ta(r.traceId),spanId:t?r.spanId:Ta(r.spanId),parentSpanId:o,traceState:null===(n=r.traceState)||void 0===n?void 0:n.serialize(),name:e.name,kind:null==e.kind?0:e.kind+1,startTimeUnixNano:Ja(e.startTime),endTimeUnixNano:Ja(e.endTime),attributes:Dc(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(Hc),droppedEventsCount:e.droppedEventsCount,status:{code:i.code,message:i.message},links:e.links.map((function(e){return function(e,t){var n;return{attributes:e.attributes?Dc(e.attributes):[],spanId:t?e.context.spanId:Ta(e.context.spanId),traceId:t?e.context.traceId:Ta(e.context.traceId),traceState:null===(n=e.context.traceState)||void 0===n?void 0:n.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}(e,t)})),droppedLinksCount:e.droppedLinksCount}}function Hc(e){return{attributes:e.attributes?Dc(e.attributes):[],name:e.name,timeUnixNano:Ja(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}var Bc=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fc=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};function zc(e,t){for(var n=function(e){var t,n,r=new Map;try{for(var i=Bc(e),o=i.next();!o.done;o=i.next()){var a=o.value,s=r.get(a.resource);s||(s=new Map,r.set(a.resource,s));var u=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),c=s.get(u);c||(c=[],s.set(u,c)),c.push(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e),r=[],i=n.entries(),o=i.next();!o.done;){for(var a=Fc(o.value,2),s=a[0],u=[],c=a[1].values(),l=c.next();!l.done;){var f=l.value;if(f.length>0){var p=f[0].instrumentationLibrary,d=p.name,h=p.version,v=p.schemaUrl,m=f.map((function(e){return Uc(e,t)}));u.push({scope:{name:d,version:h},spans:m,schemaUrl:v})}l=c.next()}var g={resource:{attributes:Dc(s.attributes),droppedAttributesCount:0},scopeSpans:u,schemaUrl:void 0};r.push(g),o=i.next()}return r}var qc="http.url",Vc="http.status_code",Zc=Ma,Xc="otelsdk_metric_",Gc=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._finishedSpans=[],this.cacheSpans=[],this._jsErrorMap=new Map,this.method="POST",this._timer=null,this._teslalabPage=function(){var e,t,n=null===(e=Z())||void 0===e?void 0:e.split("?")[0],r=J(location.href),i=r.teslalab_auto_task_id,o=r.teslalab_task_url_id,a=D(r,["teslalab_auto_task_id","teslalab_task_url_id"]),s=N.sessionStorage.getItem("DUOTEL_TESLALAB_TASK_ID"),u=N.sessionStorage.getItem("DUOTEL_TESLALAB_TASK_URL_ID");return i&&o&&(sessionStorage.setItem("DUOTEL_TESLALAB_TASK_ID",i),sessionStorage.setItem("DUOTEL_TESLALAB_TASK_URL_ID",o)),{isTeslalab:Boolean(i&&o)||Boolean(s&&u),originUrl:"".concat(n,"?").concat((t=a,Object.entries(t).map((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(encodeURIComponent(r))})).join("&"))),query:{teslalab_auto_task_id:i||s,teslalab_task_url_id:o||u}}}();var i=Ea();this.client=t,this.SDKOptions=t.getOptions(),this.options=n,this._maxExportBatchSize=A.isNumber(n.maxExportBatchSize)?n.maxExportBatchSize:i.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=A.isNumber(null==n?void 0:n.maxQueueSize)?n.maxQueueSize:i.OTEL_BSP_MAX_QUEUE_SIZE,this._exportTimeoutMillis=i.OTEL_BSP_EXPORT_TIMEOUT,this._scheduledDelayMillis=A.isNumber(n.scheduledDelayMillis)?n.scheduledDelayMillis:i.OTEL_BSP_SCHEDULE_DELAY,this.method=n.method||"POST",this._useXHR=t.useXHR,X(N,"beforeunload",(function(){r._flushAll().catch((function(e){ne.log("beforeunload _flushAll error",e)}))})),this._init()}return _createClass(e,[{key:"_init",value:function(){var e;return j(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.client.settingConfig,t.t0){t.next=5;break}return t.next=4,this.client.settingConfigReqInst;case 4:t.t0=t.sent;case 5:n=t.t0,this._failRateIsInSample=x(null===(e=null==n?void 0:n.sendConfig)||void 0===e?void 0:e.failRateSample);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getAllSpans",value:function(){return this._finishedSpans}},{key:"_flushOneBatch",value:function(){var e=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(t,n){var r=e._maxExportBatchSize;e._batchSpansSend(e._finishedSpans.splice(0,r)).then((function(){t()})).catch((function(e){n(e)}))}))}},{key:"_maybeStartTimer",value:function(){var e=this;this._timer||(this._timer=setTimeout((function(){e._flushOneBatch().then((function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(){e._clearTimer()}))}),this._scheduledDelayMillis))}},{key:"_clearTimer",value:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)}},{key:"_getCustomRequestOption",value:function(e){var t=e.attributes.requestType;return{isRequest:t&&("xhr"===t||"fetch"===t),httpCode:e.attributes[Vc]}}},{key:"_handleRequestSpan",value:function(e){var t,n=e.resource.attributes[Zc],r=(null===(t=this.client)||void 0===t?void 0:t.settingConfig)||{},i=r.iworkWhiteList,o=void 0===i?[]:i,a=r.sendReqData,s=r.sendResData,u=e.attributes,c=u.responseHeader,l=u.data,f=u.params,p=u.requestHeader,d=u.response,h=D(u,["responseHeader","data","params","requestHeader","response"]),v=function(e,t){return!(!/^iwork-/.test(e)||t.includes(e))}(n,o);return v?(e.attributes=h,e):(e.attributes=Object.assign(Object.assign(Object.assign({},h),a&&Object.assign(Object.assign(Object.assign({},p&&{requestHeader:p}),l&&{data:l}),f&&{params:f})),s&&Object.assign(Object.assign({},d&&{response:d}),c&&{responseHeader:c})),e)}},{key:"_batchSpansSend",value:function(e){var t=this;return new Promise((function(n,r){for(var i,o=[],a=[],s=[],u=[],c=[],l=0;l<e.length;l++){if(["jsError","consoleError","assetsError"].includes(e[l].name)){var f=Date.now(),p=t._jsErrorMap.get(e[l].attributes.message);if(t._jsErrorMap.set(e[l].attributes.message,f),p&&f-p<=1e3*((null===(i=t.client.settingConfig)||void 0===i?void 0:i.errorFilterInterval)||10))continue;o.push(e[l])}else if(["exception"].includes(e[l].name))a.push(e[l]);else{t._getCustomRequestOption(e[l]).isRequest?s.push(t._handleRequestSpan(e[l])):s.push(e[l])}if(t._teslalabPage.isTeslalab){var d=t._getCustomRequestOption(e[l]),h=d.isRequest,v=d.httpCode;h&&200!==v&&u.push(e[l]),"performance"===e[l].name&&u.push(e[l])}}o.length>0&&(c.push(t._send(o,"log")),t._teslalabPage.isTeslalab&&c.push(t._send(o,"teslalab"))),a.length>0&&c.push(t._send(a,"log","exception")),s.length>0&&c.push(t._send(s,"trace")),u.length>0&&c.push(t._send(u,"teslalab")),Promise.all(c).then((function(){n()})).catch(r)}))}},{key:"shutdown",value:function(){return Promise.resolve()}},{key:"forceFlush",value:function(){return Promise.resolve()}},{key:"_flushAll",value:function(){var e=this;return new Promise((function(t,n){for(var r=[],i=0,o=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize);i<o;i++)r.push(e._flushOneBatch());Promise.all(r).then((function(){t()})).catch(n)}))}},{key:"_batchSpans",value:function(e){var t,n=(null===(t=this.client.settingConfig)||void 0===t?void 0:t.maxQueueSize)||this._maxQueueSize;this._finishedSpans.length>=n?this.client.send("".concat(Xc,"report_queue_limit")):(this._finishedSpans.push(e),this._maybeStartTimer())}},{key:"_sendSpans",value:function(e){"POST"===this.method&&this._batchSpans(e)}},{key:"_isBodyTooLarge",value:function(e){return!!$(e)&&(this.client.send("".concat(Xc,"report_body_too_large")),!0)}},{key:"_send",value:function(e,t,n){var r,i=this,o="exception"===n,a="teslalab"===t;if(!this.client.pageInNotSample||a||o){var s=function(e,t){return{resourceSpans:zc(e,t)}}(e,!0),u=a?Object.assign({url:this._teslalabPage.originUrl,data:s},this._teslalabPage.query):s,c=this.SDKOptions,l=c.area,f=c.onBeforeSend,p=null===(r=this.client.getActiveAppInfo())||void 0===r?void 0:r.env,d=a?"https://titan.shizhuang-inc.net/gw/testla-lab-service/api/teslalab/h5/data/upload":"log"===t?function(e,t){return"".concat(Vn(M(e,t)),"/api/logs")}(p,l):function(e,t){return"".concat(Vn(M(e,t)),"/api/traces")}(p,l),h=u;return f&&(h=f(u)),this._useXHR||a||this.client.isSendByXHR()||this._isBodyTooLarge(h)?an(d,Object.assign({body:h,method:"POST"},a?{headers:{Authorization:"4c1283af916d37e38d499a8967e02e0c"}}:{headers:{"Content-Type":"application/json"}})).then((function(){return i._failRateIsInSample&&i.client.send("".concat(Xc,"report_success_insample"),{type:"xhrRequest_success"}),Promise.resolve()})).catch((function(e){return i._failRateIsInSample&&i.client.send("".concat(Xc,"report_error_insample"),Object.assign(Object.assign({},e),{hostname:N.location.hostname,href:N.location.href})),i.client.send("".concat(Xc,"report_error"),Object.assign(Object.assign({},e),{hostname:N.location.hostname,href:N.location.href})),Promise.reject(e)})):sn(d,h,{type:"application/json"}).then((function(){return i._failRateIsInSample&&i.client.send("".concat(Xc,"report_success_insample"),{type:"sendBeacon_success"}),Promise.resolve()})).catch((function(e){var t=Object.assign(Object.assign({},e),{type:"sendBeacon_error",hostname:N.location.hostname,href:N.location.href});return i._failRateIsInSample?i.client.send("".concat(Xc,"report_error"),Object.assign(Object.assign({},t),{type:"sendBeacon_error_insample"})):i.client.send("".concat(Xc,"report_error")),an(d,{body:h,method:"POST",headers:{"Content-Type":"application/json"}}).then((function(){return i.client.send("".concat(Xc,"report_downgrade_xhr_success")),i._failRateIsInSample&&i.client.send("".concat(Xc,"report_downgrade_xhr_success_insample")),Promise.resolve()})).catch((function(e){return i.client.send("".concat(Xc,"report_downgrade_xhr_error")),i._failRateIsInSample&&i.client.send("".concat(Xc,"report_downgrade_xhr_error_insample")),Promise.reject(e)}))}))}}},{key:"isComplete",value:function(e){var t=e.resource.attributes,n=t.uuid,r=t.env;return Boolean(t[Zc]&&"unknown_service"!==t[Zc]&&n&&r)}},{key:"completeSpans",value:function(){var e=this.client.duOtelOpentelemetry.provider;if(this.isComplete(e)){var t=this.cacheSpans;if(t.length>0){for(var n=0;n<t.length;n++){var r=t[n],i=r.attributes[qc],o=this.SDKOptions.urlHelper;if((!["jsError","consoleError","exception","assetsError"].includes(r.name)||!Q(r.attributes.message,this.client.ignoreErrors))&&(!i||!this.isIgnoreUrl(i))){r.resource=e.resource;var a=new URL(r.attributes.href),s=a.hash?a.hash.split("?")[0]:"",u=location.pathname+s;r.attributes.href=a.origin+W(u,o),this._sendSpans(r)}}this.cacheSpans=[]}}}},{key:"cacheSpan",value:function(e){this.cacheSpans.push(e)}},{key:"isIgnoreUrl",value:function(e){return[].concat(d,_toConsumableArray(this.SDKOptions.ignoreUrls)).some((function(t){return t&&A.isString(t)&&e.includes(t)}))||(t=e.substring(0,50),l.test(t));var t}},{key:"onStart",value:function(e){var t=N.location.hash?N.location.hash.split("?")[0]:"",n=N.location.pathname+t;e.setAttribute("href",N.location.origin+W(n,this.SDKOptions.urlHelper)),e.setAttribute("originHref",Z()),e.setAttribute("pageId",this.client.pageId)}},{key:"onEnd",value:function(e){if(!this.client.isOutRange()&&"CORS Preflight"!==e.name){var t=e.attributes[qc];if(t){var n=e.resource.attributes[Zc];if(this.isIgnoreUrl(t)||0===e.attributes[Vc]&&h.includes(n))return;e.attributes.originUrl=t,e.attributes[qc]=W(t,this.SDKOptions.apiHelper)}this.isComplete(e)?this._sendSpans(e):this.client.isComplete?(this.cacheSpan(e),this.completeSpans()):this.cacheSpan(e)}}}]),e}(),Wc="0000000000000000",Jc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"generateTraceId",value:function(){return function(e){var t=Math.floor(Date.now()/1e3).toString(16),n=e(8),r=e(3);return"f5"+r+t+n}(Qc)}},{key:"generateSpanId",value:function(){return function(e){var t=e(8);if(t===Yi)return Wc;return t}(Qc)}}]),e}(),Kc=Array(32);function Qc(e){for(var t=0;t<2*e;t++)Kc[t]=Math.floor(16*Math.random())+48,Kc[t]>=58&&(Kc[t]+=39);return String.fromCharCode.apply(null,Kc.slice(0,2*e))}var Yc=function(){function e(t,n){_classCallCheck(this,e),this._requestInstrumentations=[],this.client=t,this.bindProvider(n)}return _createClass(e,[{key:"bindProvider",value:function(e){var t,n,r,i,o,a=e.userId,s=e.userName,u=e.appName,c=e.businessType,l=e.type,f=e.area,p=this.client,d=p.uuid,h=p.sessionId,v=new Su({idGenerator:new Jc,resource:new pu(Object.assign(Object.assign({},tn()),(t={uuid:d,sessionId:h,userId:a?String(a):void 0,userName:s},_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(t,Ma,null===(n=this.client.getActiveAppInfo())||void 0===n?void 0:n.appId),"appNameDesc",u),"appType",l||"C"),"businessType",c),"env",M(null===(r=this.client.getActiveAppInfo())||void 0===r?void 0:r.env,f)),"sdkVersion",Jn),E,f),"inApp",oe()),"timeOrigin",performance.timeOrigin),"release",null===(i=this.client.getActiveAppInfo())||void 0===i?void 0:i.release),_defineProperty(_defineProperty(t,"prefix",null===(o=this.client.getActiveAppInfo())||void 0===o?void 0:o.prefix),"traceLanguage","browser"))))});v.register({contextManager:new Iu});var m=new Gc(this.client,{maxExportBatchSize:10,maxQueueSize:300,scheduledDelayMillis:2e3,method:"POST"});v.addSpanProcessor(m),this.tracer=v.getTracer("@du/fe-log/DuOtel",Jn),this.provider=v,this.exporter=m}},{key:"mergeResource",value:function(e){var t,n,r,i,o,a=e.userId,s=e.userName,u=e.appId,c=e.appName,l=e.type,f=e.businessType,p=e.area,d=e.env,h=e.appVersion,v=e.email,m=e.departmentId,g=e.microApp;ne.log("mergeResource appId ->",null===(t=this.client.getActiveAppInfo())||void 0===t?void 0:t.appId),this.provider.resource=this.provider.resource.merge(new pu(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({userId:a?String(a):void 0,userName:s},Ma,null===(n=this.client.getActiveAppInfo())||void 0===n?void 0:n.appId),"appNameDesc",c),"appType",l),"businessType",f),"env",M(null===(r=this.client.getActiveAppInfo())||void 0===r?void 0:r.env,p)),E,p),h&&{appVersion:h}),v&&{email:v}),m&&{departmentId:m}),g&&{microApp:g}),{prefix:null===(i=this.client.getActiveAppInfo())||void 0===i?void 0:i.prefix,release:null===(o=this.client.getActiveAppInfo())||void 0===o?void 0:o.release})));var y,_=_createForOfIteratorHelper(this.provider._tracers.values());try{for(_.s();!(y=_.n()).done;){y.value.resource=this.provider.resource}}catch(e){_.e(e)}finally{_.f()}u&&d&&(this.client.isComplete=!0)}},{key:"startClickSpan",value:function(e){this.tracer.startSpan("click",{attributes:Object.assign({},e)}).end()}},{key:"startErrorSpan",value:function(e){var t,n=e.name,r=e.params,i=e.type,o=this.client.options.onCustomError,a=null===(t=this.client.getActiveAppInfo())||void 0===t?void 0:t.appId,s=this.tracer.startSpan(n,{attributes:Object.assign(Object.assign(Object.assign({},r),{errType:i}),o&&o(r,a))});return s.end(),s}},{key:"startRouteSpan",value:function(e){this.client.pageId=B(),this.tracer.startSpan("router",{attributes:Object.assign({},e)}).end()}},{key:"startMsgSpan",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";(t||n)&&this.tracer.startSpan(e,{attributes:{params:A.isString(t)?t:JSON.stringify(t),message:n}}).end()}},{key:"startNewPerformanceSpan",value:function(e,t){this.tracer.startSpan(e,{attributes:t}).end()}},{key:"startResourceSpan",value:function(e){this.tracer.startSpan("resource",{attributes:e}).end()}},{key:"startLongTaskSpan",value:function(e){this.tracer.startSpan("longtask",{attributes:Object.assign({},e)}).end()}}]),e}(),$c=null,el="clickPlugin",tl={name:el,isPluginEnable:function(){return this.options.functionList.includes("userClick")},isPluginRegist:function(){return!!$c},destroy:function(){$c&&G(N,"click",$c,!0)},monitor:function(e){if(N&&!$c){var t,n,r,i=(t=e,n=0,r=!0,function(){if(r){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];t.apply(this,i),r=!1,setTimeout((function(){r=!0}),n)}});X(N,"click",$c=function(e){var t=e.target?e.target:e.srcElement,n=t?t.outerHTML:"";n&&n.length>250&&(n=n.slice(0,250));var r={outerHTML:n,tagName:t&&t.tagName,id:t&&t.id,className:t&&t.className,name:t&&t.name,xPath:un(t),onLine:I()};i(el,r)},!0)}},dataTransform:function(e){return e},dataSend:function(e,t){this.currentClick=t,this.duOtelOpentelemetry.startClickSpan(t)}},nl="routePlugin",rl=null,il=null,ol=null,al=null,sl=null,ul={name:nl,isPluginEnable:function(){var e=this.options,t=e.functionList,n=e.enableSPA;return t.includes("router")||n},isPluginRegist:function(){return!!(rl&&il&&ol&&al)},destroy:function(){rl&&G(N,"hashchange",rl,!1),il&&G(N,"popstate",il,!1),ol&&G(N,"pushState",ol,!1),al&&G(N,"replaceState",al,!1),sl=null},monitor:function(e){var t=this;if(N&&!(rl&&il&&ol&&al)){var n=this,r=Z(),i=N.location.hash?N.location.hash.split("?")[0]:"",o=N.location.origin+N.location.pathname+i;setTimeout((function(){cl.call(t,r).then((function(){e(nl,{type:"load",preHref:r})}))}),20);var a,s,u=function(n){var i=N.location.hash?N.location.hash.split("?")[0]:"",a=N.location.origin+N.location.pathname+i;o!==a&&(o=a,cl.call(t,a).then((function(){e(nl,{type:n,prePage:r}),e("broadcast",{from:nl,isUpdate:!0,type:n,prePage:r}),r=Z()})))};rl=function(){u("hashchange")},a=N,s="onpopstate",Object.prototype.hasOwnProperty.call(a,s)||X(N,"hashchange",rl,!1),X(N,"popstate",il=function(e){u("popstate")},!1);var c=function(e){var t=history[e],n=new Event(e);return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=t.apply(this,r);return n.arguments=r,window.dispatchEvent(n),o}};N.history.pushState=c("pushState"),N.history.replaceState=c("replaceState"),ol=function(e){var t,r=(null===(t=n.settingConfig)||void 0===t?void 0:t.routerIgnores)||[];ll(r,(null==e?void 0:e.arguments)||[])||u("pushState")},X(N,"pushState",ol,!1),X(N,"replaceState",al=function(){u("replaceState")},!1)}},dataTransform:function(e){return e},dataSend:function(e,t){this.options.enableSPA&&this.duOtelOpentelemetry.startRouteSpan(t)}};function cl(e){return j(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i,o,a,s;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.options.sendRouteAppId){t.next=2;break}return t.abrupt("return");case 2:if(sl){t.next=8;break}return t.next=5,an("https://cdn-config.dewu.com/node-common/configCenter/duotel-trace/routers.json");case 5:n=t.sent,r=n.data,sl=rn(r);case 8:i="",o=0,a=Object.keys(sl);case 10:if(!(o<a.length)){t.next=18;break}if(s=a[o],!e.includes(s)){t.next=15;break}return i=sl[s],t.abrupt("break",18);case 15:o++,t.next=10;break;case 18:this.mergeConfig({routeAppId:i});case 19:case"end":return t.stop()}}),t,this)})))}var ll=function(e,t){return!(!(null==e?void 0:e.length)||!t)&&(!(!A.isArray(t)&&!A.isString(t))&&e.some((function(e){return t.includes(e)})))};function fl(e){void 0===e&&(e=[]);for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(Array.isArray(i)){var o=fl(i);t=t.concat(o.instrumentations)}else"function"==typeof i?t.push(new i):i.instrumentationName&&t.push(i)}return{instrumentations:t}}function pl(e){var t=fl(e.instrumentations).instrumentations,n=e.tracerProvider||zo.getTracerProvider(),r=e.meterProvider||Po.getMeterProvider();return function(e,t,n){for(var r=0,i=e.length;r<i;r++){var o=e[r];t&&o.setTracerProvider(t),n&&o.setMeterProvider(n),o.getConfig().enabled||o.enable()}}(t,n,r),function(){!function(e){e.forEach((function(e){return e.disable()}))}(t)}}function dl(e){return"function"==typeof e}var hl=console.error.bind(console);function vl(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function ml(e){e&&e.logger&&(dl(e.logger)?hl=e.logger:hl("new logger isn't a function, not replacing"))}function gl(e,t,n){if(e&&e[t]){if(!n)return hl("no wrapper function"),void hl((new Error).stack);if(dl(e[t])&&dl(n)){var r=e[t],i=n(r,t);return vl(i,"__original",r),vl(i,"__unwrap",(function(){e[t]===i&&vl(e,t,r)})),vl(i,"__wrapped",!0),vl(e,t,i),i}hl("original object and wrapper must be functions")}else hl("no original function "+t+" to wrap")}function yl(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void hl("no original to unwrap to -- has "+t+" already been unwrapped?"):(hl("no function to unwrap."),void hl((new Error).stack))}ml.wrap=gl,ml.massWrap=function(e,t,n){if(!e)return hl("must provide one or more modules to patch"),void hl((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){gl(e,t,n)}))})):hl("must provide one or more functions to wrap on modules")},ml.unwrap=yl,ml.massUnwrap=function(e,t){if(!e)return hl("must provide one or more modules to patch"),void hl((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){yl(e,t)}))})):hl("must provide one or more functions to unwrap on modules")};var _l=ml;pn(_l);var bl,El,Tl=function(){return Tl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Tl.apply(this,arguments)},wl=function(){function e(e,t,n){void 0===n&&(n={}),this.instrumentationName=e,this.instrumentationVersion=t,this._wrap=_l.wrap,this._unwrap=_l.unwrap,this._massWrap=_l.massWrap,this._massUnwrap=_l.massUnwrap,this._config=Tl({enabled:!0},n),this._diag=Oo.createComponentLogger({namespace:e}),this._tracer=zo.getTracer(e,t),this._meter=Po.getMeter(e,t),this._updateMetricInstruments()}return Object.defineProperty(e.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),e.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},e.prototype._updateMetricInstruments=function(){},e.prototype.getConfig=function(){return this._config},e.prototype.setConfig=function(e){void 0===e&&(e={}),this._config=Object.assign({},e)},e.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(e.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),e}(),Sl=(bl=function(e,t){return bl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},bl(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}bl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ol=function(e){function t(t,n,r){void 0===r&&(r={});var i=e.call(this,t,n,r)||this;return i._config.enabled&&i.enable(),i}return Sl(t,e),t}(wl);function kl(e,t,n){var r,i;try{i=e()}catch(e){r=e}finally{if(t(r,i),r&&!n)throw r;return i}}function Cl(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}!function(e){e.COMPONENT="component",e.HTTP_ERROR_NAME="http.error_name",e.HTTP_STATUS_TEXT="http.status_text"}(El||(El={}));var Rl,Pl,Al="0.39.1",Il=(Rl=function(e,t){return Rl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Rl(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Rl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ll=function(e){function t(t){var n=e.call(this,"@opentelemetry/instrumentation-fetch",Al,t)||this;return n.component="fetch",n.version=Al,n.moduleName=n.component,n._usedResources=new WeakSet,n._tasksCount=0,n}return Il(t,e),t.prototype.init=function(){},t.prototype._getConfig=function(){return this._config},t.prototype._addChildSpan=function(e,t){var n=this.tracer.startSpan("CORS Preflight",{startTime:t[gu.FETCH_START]},zo.setSpan(So.active(),e));this._getConfig().ignoreNetworkEvents||ku(n,t),n.end(t[gu.RESPONSE_END])},t.prototype._addFinalSpanAttributes=function(e,t){var n=Ru(t.url);e.setAttribute(La,t.status),null!=t.statusText&&e.setAttribute(El.HTTP_STATUS_TEXT,t.statusText),e.setAttribute(Aa,n.host),e.setAttribute(Ia,n.protocol.replace(":","")),e.setAttribute(xa,navigator.userAgent)},t.prototype._addHeaders=function(e,t){if(!Pu(t,this._getConfig().propagateTraceHeaderCorsUrls)){var n={};return Ho.inject(So.active(),n),void(Object.keys(n).length>0&&this._diag.debug("headers inject skipped due to CORS policy"))}if(e instanceof Request)Ho.inject(So.active(),e.headers,{set:function(e,t,n){return e.set(t,"string"==typeof n?n:String(n))}});else if(e.headers instanceof Headers)Ho.inject(So.active(),e.headers,{set:function(e,t,n){return e.set(t,"string"==typeof n?n:String(n))}});else{n={};Ho.inject(So.active(),n),e.headers=Object.assign({},n,e.headers||{})}},t.prototype._clearResources=function(){0===this._tasksCount&&this._getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},t.prototype._createSpan=function(e,t){var n;if(void 0===t&&(t={}),!xs(e,this._getConfig().ignoreUrls)){var r=(t.method||"GET").toUpperCase(),i="HTTP "+r;return this.tracer.startSpan(i,{kind:yo.CLIENT,attributes:(n={},n[El.COMPONENT]=this.moduleName,n[Ra]=r,n[Pa]=e,n)})}this._diag.debug("ignoring span as url matches ignored url")},t.prototype._findResourceAndAddNetworkEvents=function(e,t,n){var r=t.entries;if(!r.length){if(!performance.getEntriesByType)return;r=performance.getEntriesByType("resource")}var i=Cu(t.spanUrl,t.startTime,n,r,this._usedResources,"fetch");if(i.mainRequest){var o=i.mainRequest;this._markResourceAsUsed(o);var a=i.corsPreFlightRequest;a&&(this._addChildSpan(e,a),this._markResourceAsUsed(a)),this._getConfig().ignoreNetworkEvents||ku(e,o)}},t.prototype._markResourceAsUsed=function(e){this._usedResources.add(e)},t.prototype._endSpan=function(e,t,n){var r=this,i=Za(Date.now()),o=Ga();this._addFinalSpanAttributes(e,n),setTimeout((function(){var n;null===(n=t.observer)||void 0===n||n.disconnect(),r._findResourceAndAddNetworkEvents(e,t,o),r._tasksCount--,r._clearResources(),e.end(i)}),300)},t.prototype._patchConstructor=function(){var e=this;return function(t){var n=e;return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=this,o=Ru(e[0]instanceof Request?e[0].url:String(e[0])).href,a=e[0]instanceof Request?e[0]:e[1]||{},s=n._createSpan(o,a);if(!s)return t.apply(this,e);var u=n._prepareSpanData(o);function c(e,t){n._applyAttributesAfterFetch(e,a,t),n._endSpan(e,u,{status:t.status||0,statusText:t.message,url:o})}function l(e,t){n._applyAttributesAfterFetch(e,a,t),t.status>=200&&t.status<400?n._endSpan(e,u,t):n._endSpan(e,u,{status:t.status,statusText:t.statusText,url:o})}function f(e,t,n){try{var r=n.clone(),i=n.clone(),o=r.body;if(o){var a=o.getReader();!function t(){a.read().then((function(n){n.done?l(e,i):t()}),(function(t){c(e,t)}))}()}else l(e,n)}finally{t(n)}}function p(e,t,n){try{c(e,n)}finally{t(n)}}return new Promise((function(e,r){return So.with(zo.setSpan(So.active(),s),(function(){return n._addHeaders(a,o),n._tasksCount++,t.apply(i,a instanceof Request?[a]:[o,a]).then(f.bind(i,s,e),p.bind(i,s,r))}))}))}}},t.prototype._applyAttributesAfterFetch=function(e,t,n){var r=this,i=this._getConfig().applyCustomAttributesOnSpan;i&&kl((function(){return i(e,t,n)}),(function(e){e&&r._diag.error("applyCustomAttributesOnSpan",e)}),!0)},t.prototype._prepareSpanData=function(e){var t=Ga(),n=[];if("function"!=typeof PerformanceObserver)return{entries:n,startTime:t,spanUrl:e};var r=new PerformanceObserver((function(t){t.getEntries().forEach((function(t){"fetch"===t.initiatorType&&t.name===e&&n.push(t)}))}));return r.observe({entryTypes:["resource"]}),{entries:n,observer:r,startTime:t,spanUrl:e}},t.prototype.enable=function(){Cl(fetch)&&(this._unwrap(ia,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(ia,"fetch",this._patchConstructor())},t.prototype.disable=function(){this._unwrap(ia,"fetch"),this._usedResources=new WeakSet},t}(Ol);!function(e){e.METHOD_OPEN="open",e.METHOD_SEND="send",e.EVENT_ABORT="abort",e.EVENT_ERROR="error",e.EVENT_LOAD="loaded",e.EVENT_TIMEOUT="timeout"}(Pl||(Pl={}));var xl,Nl="0.39.1";!function(e){e.HTTP_STATUS_TEXT="http.status_text"}(xl||(xl={}));var Dl,jl=(Dl=function(e,t){return Dl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Dl(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Dl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ml=function(e){function t(t){var n=e.call(this,"@opentelemetry/instrumentation-xml-http-request",Nl,t)||this;return n.component="xml-http-request",n.version=Nl,n.moduleName=n.component,n._tasksCount=0,n._xhrMem=new WeakMap,n._usedResources=new WeakSet,n}return jl(t,e),t.prototype.init=function(){},t.prototype._getConfig=function(){return this._config},t.prototype._addHeaders=function(e,t){if(!Pu(Ru(t).href,this._getConfig().propagateTraceHeaderCorsUrls)){var n={};return Ho.inject(So.active(),n),void(Object.keys(n).length>0&&this._diag.debug("headers inject skipped due to CORS policy"))}var r={};Ho.inject(So.active(),r),Object.keys(r).forEach((function(t){e.setRequestHeader(t,String(r[t]))}))},t.prototype._addChildSpan=function(e,t){var n=this;So.with(zo.setSpan(So.active(),e),(function(){var e=n.tracer.startSpan("CORS Preflight",{startTime:t[gu.FETCH_START]});ku(e,t),e.end(t[gu.RESPONSE_END])}))},t.prototype._addFinalSpanAttributes=function(e,t,n){if("string"==typeof n){var r=Ru(n);void 0!==t.status&&e.setAttribute(La,t.status),void 0!==t.statusText&&e.setAttribute(xl.HTTP_STATUS_TEXT,t.statusText),e.setAttribute(Aa,r.host),e.setAttribute(Ia,r.protocol.replace(":","")),e.setAttribute(xa,navigator.userAgent)}},t.prototype._applyAttributesAfterXHR=function(e,t){var n=this,r=this._getConfig().applyCustomAttributesOnSpan;"function"==typeof r&&kl((function(){return r(e,t)}),(function(e){e&&n._diag.error("applyCustomAttributesOnSpan",e)}),!0)},t.prototype._addResourceObserver=function(e,t){var n=this._xhrMem.get(e);n&&"function"==typeof PerformanceObserver&&"function"==typeof PerformanceResourceTiming&&(n.createdResources={observer:new PerformanceObserver((function(e){var r=e.getEntries(),i=Ru(t);r.forEach((function(e){"xmlhttprequest"===e.initiatorType&&e.name===i.href&&n.createdResources&&n.createdResources.entries.push(e)}))})),entries:[]},n.createdResources.observer.observe({entryTypes:["resource"]}))},t.prototype._clearResources=function(){0===this._tasksCount&&this._getConfig().clearTimingResources&&(Sa.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)},t.prototype._findResourceAndAddNetworkEvents=function(e,t,n,r,i){if(n&&r&&i&&e.createdResources){var o=e.createdResources.entries;o&&o.length||(o=Sa.getEntriesByType("resource"));var a=Cu(Ru(n).href,r,i,o,this._usedResources);if(a.mainRequest){var s=a.mainRequest;this._markResourceAsUsed(s);var u=a.corsPreFlightRequest;u&&(this._addChildSpan(t,u),this._markResourceAsUsed(u)),ku(t,s)}}},t.prototype._cleanPreviousSpanInformation=function(e){var t=this._xhrMem.get(e);if(t){var n=t.callbackToRemoveEvents;n&&n(),this._xhrMem.delete(e)}},t.prototype._createSpan=function(e,t,n){var r;if(!xs(t,this._getConfig().ignoreUrls)){var i=n.toUpperCase(),o=this.tracer.startSpan(i,{kind:yo.CLIENT,attributes:(r={},r[Ra]=n,r[Pa]=Ru(t).toString(),r)});return o.addEvent(Pl.METHOD_OPEN),this._cleanPreviousSpanInformation(e),this._xhrMem.set(e,{span:o,spanUrl:t}),o}this._diag.debug("ignoring span as url matches ignored url")},t.prototype._markResourceAsUsed=function(e){this._usedResources.add(e)},t.prototype._patchOpen=function(){var e=this;return function(t){var n=e;return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e[0],o=e[1];return n._createSpan(this,o,i),t.apply(this,e)}}},t.prototype._patchSend=function(){var e=this;function t(t,n){var r=e._xhrMem.get(n);if(r){r.status=n.status,r.statusText=n.statusText,e._xhrMem.delete(n),r.span&&e._applyAttributesAfterXHR(r.span,n);var i=Ga(),o=Date.now();setTimeout((function(){!function(t,n,r,i){var o=n.callbackToRemoveEvents;"function"==typeof o&&o();var a=n.span,s=n.spanUrl,u=n.sendStartTime;a&&(e._findResourceAndAddNetworkEvents(n,a,s,u,r),a.addEvent(t,i),e._addFinalSpanAttributes(a,n,s),a.end(i),e._tasksCount--),e._clearResources()}(t,r,i,o)}),300)}}function n(){t(Pl.EVENT_ERROR,this)}function r(){t(Pl.EVENT_ABORT,this)}function i(){t(Pl.EVENT_TIMEOUT,this)}function o(){this.status<299?t(Pl.EVENT_LOAD,this):t(Pl.EVENT_ERROR,this)}return function(t){return function(){for(var a=this,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var c=e._xhrMem.get(this);if(!c)return t.apply(this,s);var l=c.span,f=c.spanUrl;return l&&f&&So.with(zo.setSpan(So.active(),l),(function(){e._tasksCount++,c.sendStartTime=Ga(),l.addEvent(Pl.METHOD_SEND),a.addEventListener("abort",r),a.addEventListener("error",n),a.addEventListener("load",o),a.addEventListener("timeout",i),c.callbackToRemoveEvents=function(){!function(t){t.removeEventListener("abort",r),t.removeEventListener("error",n),t.removeEventListener("load",o),t.removeEventListener("timeout",i);var a=e._xhrMem.get(t);a&&(a.callbackToRemoveEvents=void 0)}(a),c.createdResources&&c.createdResources.observer.disconnect()},e._addHeaders(a,f),e._addResourceObserver(a,f)})),t.apply(this,s)}}},t.prototype.enable=function(){this._diag.debug("applying patch to",this.moduleName,this.version),Cl(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),Cl(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())},t.prototype.disable=function(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet},t}(Ol),Ul="component",Hl="http.status_text",Bl="jsbRequestCost",Fl=["fetchStart","requestStart","responseStart","responseEnd"],zl=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),(e=_callSuper(this,t,["@du/oteltrace-jsbRequest",Jn,n])).component="jsbRequest",e.moduleName=e.component,e.client=n.client,e.init(),e}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e,t=this;null===(e=this.client)||void 0===e||e.on("jsbRequest",(function(e){t._handleData(e)}))}},{key:"_getConfig",value:function(){return this._config}},{key:"_createSpan",value:function(e){if(!xs(e.url,this._getConfig().ignoreUrls)){var t=(e.method||"GET").toUpperCase(),n="".concat(t);return this.client.duOtelOpentelemetry.tracer.startSpan(n,{kind:yo.PRODUCER,attributes:_defineProperty(_defineProperty(_defineProperty({},Ul,this.moduleName),Ra,t),Pa,e.url)})}}},{key:"_addFinalSpanAttributes",value:function(e,t,n,r){var i=(r||{}).jsbRequestCost,o=(n||{}).errorCode,a=Ru(t);e.setAttribute(Aa,a.host),e.setAttribute(xa,navigator.userAgent||""),e.setAttribute(Ia,a.protocol.replace(":","")),e.setAttribute(La,o),e.setAttribute(Hl,ln[o]||"网络请求错误"),e.setAttribute(Bl,1e3*i),Fl.forEach((function(t){e.addEvent(t,r[t]||0)}))}},{key:"_handleData",value:function(e){var t=this;ne.log("_handleData",e),e&&re((function(){var n=e.requestData,r=e.responseData,i=e.requestTiming,o=t._createSpan(n);if(o){var a=t._getConfig().applyCustomAttributesOnSpan;a&&a(o,n,r),t._addFinalSpanAttributes(o,n.url,r,i),o.end()}}),(function(e){}))}},{key:"enable",value:function(){}},{key:"disable",value:function(){var e;null===(e=this.client)||void 0===e||e.off("jsbRequest")}}]),t}(Ol);function ql(){var e,t,n,r=performance.getEntriesByType("navigation")[0],i=window.performance.getEntriesByType("paint"),o=i.find((function(e){return"first-paint"===e.name})),a=i.find((function(e){return"first-contentful-paint"===e.name})),s=performance.timing,u=r?function(e){var t=Fn(),n=Math.round(t+e.connectEnd),r=Math.round(t+e.connectStart),i=Math.round(t+e.domComplete),o=Math.round(t+e.domContentLoadedEventEnd),a=Math.round(t+e.domContentLoadedEventStart),s=Math.round(t+e.domInteractive),u=Math.round(t+e.domainLookupEnd),c=Math.round(t+e.domainLookupStart),l=Math.round(t+e.fetchStart),f=Math.round(t+e.loadEventEnd),p=Math.round(t+e.loadEventStart),d=Math.round(t+e.requestStart),h=Math.round(t+e.responseEnd),v=Math.round(t+e.responseStart),m=Dn(e.transferSize||0),g=Dn(e.redirectCount),y=Dn(e.redirectEnd||0),_=Dn(e.redirectStart||0);0!==g&&(y=Math.round(t+e.redirectEnd),_=Math.round(t+e.redirectStart));var b=0;return 0!==e.secureConnectionStart&&(b=Math.round(t+e.secureConnectionStart)),Object.assign(Object.assign({connectEnd:n,connectStart:r,domComplete:i,domContentLoadedEventEnd:o,domContentLoadedEventStart:a,domInteractive:s,domainLookupEnd:u,domainLookupStart:c,fetchStart:l,loadEventEnd:f,loadEventStart:p,requestStart:d,responseEnd:h,responseStart:v},b&&{secureConnectionStart:b}),{transferSize:m,redirectCount:g,redirectEnd:y,redirectStart:_,timeOrigin:t})}(r):(t=(e=s).secureConnectionStart,n=D(e,["secureConnectionStart"]),Object.assign(Object.assign({},t&&{secureConnectionStart:t}),n));return Object.assign(Object.assign({},u),{navigationStart:s?Dn(s.navigationStart):0,fp:o?Dn(o.startTime):0,fcp:a?Dn(a.startTime):0})}var Vl={"h5-ssr":"nvwa-ssr"};function Zl(e,t){if(!oe())return!1;var n=null==e?void 0:e.sendDataToAppCfg;if(n&&t){var r=n.whiteAppList;return(void 0===r?[]:r).includes(t)}return!1}function Xl(e){return A.isNumber(e)?e/1e3:e}function Gl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(["nvwa-ssr"].indexOf(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")>=0){for(var t=e.split("/"),n=e,r=0,i=t.length;r<i;r++){var o=t[r]||"";24===o.length&&(n=o)}return n}return e}var Wl=function(e){return"[object Object]"===Object.prototype.toString.call(e)};var Jl,Kl=function(e){!function(e){try{if(!Wl(e))return void ne.log("json must be a plaint object");var t=Object.keys(e).reduce((function(t,n){return"".concat(t,"&").concat(encodeURIComponent(n),"=").concat(Wl(e[n])?encodeURIComponent(JSON.stringify(e[n])):encodeURIComponent(e[n]))}),"https://dw-prd.cn-hangzhou.log.aliyuncs.com/logstores/h5-ssr-client/track?APIVersion=0.6.0");(new Image).src=t}catch(e){ne.error("track error: ",e)}}(e)};function Ql(e){var t=document.documentElement.scrollTop,n=document.documentElement.clientHeight,r=e.map((function(e,r){var i=e.getBoundingClientRect(),o=i.top,a=i.height,s=i.bottom,u=function(e){var t=e.scrollTop,n=e.domRect,r=e.screenHeight,i=n.height,o=t+n.top;return o>r?Jl.fullNot:o+i>r?Jl.half:Jl.fullIn}({screenHeight:n,domRect:i,scrollTop:t});return{top:o,bottom:s,height:a,index:r,cls:e.className,id:e.id,firstScreenState:u}}));return r.map((function(e,t){var n=r[t+1],i=r[t-1];return n&&i&&"number"==typeof n.top&&"number"==typeof i.top?Object.assign(Object.assign({},e),{height:n.top-i.bottom}):e})).filter((function(e){return e.firstScreenState!==Jl.fullNot}))}!function(e){e.fullNot="fullNot",e.fullIn="fullIn",e.half="half"}(Jl||(Jl={}));var Yl=function(){function e(t){var n=this;_classCallCheck(this,e),this.initLayoutInfo=[],this.shakeInit=function(){var e=(n.config||{}).shakeCls;if(e){var t=Ql(Array.from(document.querySelectorAll(e)));n.initLayoutInfo=t}},this.calcShakeValue=function(){var e,t,r=n.config.shakeCls;if(r){var i=Array.from(document.querySelectorAll(r)),o=_toConsumableArray(n.initLayoutInfo),a=[];return Ql(i).forEach((function(e){var t=e.height,n=e.cls,r=e.id,i=e.firstScreenState,s=o.find((function(e){return e.cls===n||e.id&&e.id===r}));if(s){o=o.filter((function(e){return e!==s}));var u=Math.floor(Math.abs(t-s.height));s.firstScreenState===Jl.half&&i===Jl.half&&(u=0),a.push({heightDiff:u,cls:n})}else i!==Jl.fullNot&&a.push({heightDiff:Math.floor(t),cls:n})})),o.forEach((function(e){a.push({heightDiff:Math.floor(e.height),cls:e.cls})})),(a=a.filter((function(e){return e.heightDiff>0}))).sort((function(e,t){return e.heightDiff-t.heightDiff>0?-1:1})),ne.log("dom shake: ",a),{shakeValue:(null===(e=a[0])||void 0===e?void 0:e.heightDiff)||0,shakeDomCls:(null===(t=a[0])||void 0===t?void 0:t.cls)||""}}return{shakeValue:0,shakeDomCls:""}},this.config=t,this.shakeInit()}return _createClass(e,[{key:"sendData",value:function(e,t){if(N.Jockey&&A.isObject(e)){var n=function(e,t,n){var r=Vl[t]||t,i=ql();return Object.assign({h5_section:r,url:window.location.href,title:document.title,uniqUrl:Gl(N.location.pathname,r),fmp:Xl(e.fmp),lcp:Xl(e.lcp),fcp:Xl(e.fcp),fp:Xl(e.fp),tti:Xl(e.tti),ttfb:Xl(e.ttfb),largestDomSelector:e.fmpDependDomXPath,dns_cost:Xl(e.dnsCost),doc_request_start:e.requestStart,doc_request_cost:e.responseStart-e.requestStart,doc_response_cost:e.responseEnd-e.responseStart,doc_transfer_size:e.transferSize,dom_complete:e.domComplete,dom_interactive:e.domInteractive,dom_ready:e.domReady,docNetCost:e.responseEnd-i.timeOrigin,connectEnd:e.connectEnd,connectStart:e.connectStart,requestStart:e.requestStart,responseEnd:e.responseEnd,ignoreDomCount:e.ignoreDomCount,lcpOuterHtml:e.lcpOuterHtml,version:"apm_".concat(Jn),ua:navigator.userAgent||"",deviceFps:e.deviceFps,logFlagImgTime:e.logFlagImgTime,isHtmlPefetchFlag:e.logFlagImgTime,env:U(),sign_degradation:"1"},n||{})}(e,t,this.calcShakeValue());ne.log("sendAppData: ",e,n),Kl(n),N.Jockey.send("h5-performance",n)}}}]),e}();function $l(e,t){var n=null==e?void 0:e.sendDataToAppCfg;if(n){var r=n.appConfig,i=null==r?void 0:r[t];if(i)return i}return{}}var ef=null,tf=["accessToken","token"],nf="requestPlugin",rf={name:nf,isPluginEnable:function(){return this.options.functionList.includes("fetch")},isPluginRegist:function(){return!!this.requestRegister},destroy:function(){this.duOtelOpentelemetry._requestInstrumentations.forEach((function(e){var t,n;t=e.moduleName,n={"xml-http-request":function(){return Reflect.has(XMLHttpRequest.prototype.open,"__wrapped")},fetch:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return Reflect.has(fetch,"__wrapped")})),jsbRequest:function(){return!0}},n[t]&&n[t]()&&e.disable()})),this.requestRegister=void 0},monitor:function(e){var t=this;if(N&&A.isUndefined(this.requestRegister)){var n=this.options,i=n.corsUrls,o=n.ignoreUrls,a=[].concat(r,_toConsumableArray(i)),s=[].concat(d,_toConsumableArray(o)),u=[];u.push(new Ml({ignoreUrls:s,propagateTraceHeaderCorsUrls:a,clearTimingResources:!0,applyCustomAttributesOnSpan:function(n,r){ne.log("xhr instrumentation",n,r),af(n,"xhr");var i=function(e){var t=e||{},n=t.body,r=t.responseHeader,i=t.url,o=t.requestHeader,a=rn(null==e?void 0:e.responseText)||{};200!==e.status||(null==a?void 0:a.length)||Object.keys(a).length||(a=_);return{body:n,responseHeader:r,url:i,requestHeader:o,responseData:a,responseType:e.responseType}}(r),o=i.responseData,a=i.responseType,s=t.options.sendResponse;cf(n,o),uf.call(t,n,i),""!==a&&"text"!==a||(200!==r.status||t.getUserDone||ff.call(t,null==r?void 0:r.responseURL,o),t.isInit()&&!s||n.setAttribute("response",pf(on(o),(null==o?void 0:o.traceId)||""))),lf(n,e)}}),new Ll({ignoreUrls:s,propagateTraceHeaderCorsUrls:a,clearTimingResources:!0,applyCustomAttributesOnSpan:function(n,r,i){return j(t,void 0,void 0,_regeneratorRuntime().mark((function t(){var o,a,s,u;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.log("fetch instrumentation",n,i,r),af(n,"fetch"),t.next=4,sf(r,i);case 4:if(o=t.sent,a=o.responseData,s=o.responseType,u=this.options.sendResponse,cf(n,a),uf.call(this,n,o),s&&(s.includes("json")||s.includes("x-www-form-urlencoded"))){t.next=11;break}return t.abrupt("return");case 11:this.isInit()&&!u&&this.getUserDone||(this.isInit()&&!u||n.setAttribute("response",pf(on(a),(null==a?void 0:a.traceId)||"")),200!==i.status||this.getUserDone||ff.call(this,null==i?void 0:i.url,rn(a))),lf(n,e);case 13:case"end":return t.stop()}}),t,this)})))}}),new zl({client:this,ignoreUrls:s,applyCustomAttributesOnSpan:function(e,n,r){ne.log("JsbRequestInstrumentation",e),af(e,"jsbRequest");var i=function(e,t){var n=e||{},r=n.url,i=n.params,o=n.headers,a=t||{},s=a.data;return{body:i,responseHeader:null,url:r,requestHeader:o,responseData:s}}(n,r),o=i.responseData,a=t.options.sendResponse;cf(e,o),uf.call(t,e,i),t.isInit()&&!a||e.setAttribute("response",pf(on(o)))}})),this.duOtelOpentelemetry._requestInstrumentations=u,this.requestRegister=pl({instrumentations:u})}},dataTransform:function(e){return e},dataSend:function(){}};function of(e){return"B"!==this.options.type&&this.isInit()?e:Object.keys(e).reduce((function(t,n){return tf.includes(n)||(t[n]=e[n]),t}),{})}function af(e,t){e.setAttribute("onLine",I()),e.setAttribute("requestType",t)}function sf(e,t){return j(this,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,i,o,a,s,u,c;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={},n.prev=1,n.next=4,t.text();case 4:r=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),r={};case 10:return i=rn(r)||{},200!==t.status||(null==i?void 0:i.length)||Object.keys(i).length||(i=_),o={},t.headers&&t.headers.forEach((function(e,t){o[t]=e})),a=o["content-type"],u=(s=e||{}).headers,c=s.body,n.abrupt("return",{body:c,responseHeader:o,url:null==t?void 0:t.url,requestHeader:u,responseData:i,responseType:a});case 17:case"end":return n.stop()}}),n,null,[[1,7]])})))}function uf(e,t){var n=this.options,r=n.sendReqHeader,i=n.sendParams,o=n.sendResHeader,a=t||{},s=a.body,u=a.responseHeader,c=a.url,l=a.requestHeader;l&&x(20)&&Kl({requestHeader:on(l),sign_degradation:"2",env:U(),apiUrl:c,url:window.location.href}),this.isInit()&&!r||!l||e.setAttribute("requestHeader",on(of.call(this,l))),this.isInit()&&!o||!u||e.setAttribute("responseHeader",on(u)),this.isInit()&&!i||(c&&e.setAttribute("params",on(J(c))),s&&e.setAttribute("data",pf(on(s))))}function cf(e,t){var n=t.code,r=t.msg||t.message;!A.isUndefined(n)&&e.setAttribute("rpc.result.code",Number(n)),!A.isUndefined(r)&&e.setAttribute("rpc.result.msg",r)}function lf(e,t){t("broadcast",{from:nf,data:e})}function ff(e,t){if(this.getUserDone)this.responseMap={};else if(this.isInit()){var n=this.options.userInfo,r=(null==n?void 0:n.userInfoAPI)&&(null==n?void 0:n.userID)?n:y,i=r.userInfoAPI,o=r.userID,a=r.userName;if(e.includes(i)){var s=Y(t,o),u=Y(t,a);if(s||u){var c={userId:s,userName:u};this.userResponse(c)}}else this.responseMap[e]=t}else this.responseMap[e]=t}var pf=function(e,t){return e&&e.length>16384?"The data size too large, exceeding the maximum 16384".concat(t?", request traceId: ".concat(t):""):e},df=function(){function e(){var t=this;_classCallCheck(this,e),this.dataBuffer=[],this.observerHandler=function(e){var n=e.getEntries();t.dataBuffer=t.dataBuffer.concat(n)},window.PerformanceObserver?this.observer=new PerformanceObserver(this.observerHandler):this.observer=null,this.dataBuffer=[]}return _createClass(e,[{key:"init",value:function(e){if(this.observer)try{this.observer.observe({type:e,buffered:!0})}catch(t){ne.log("performance ".concat(e," is not supported"))}}},{key:"reset",value:function(){var e;this.dataBuffer=[],null===(e=this.observer)||void 0===e||e.disconnect()}},{key:"getLatestEntry",value:function(){return this.dataBuffer[this.dataBuffer.length-1]||{}}},{key:"getEntries",value:function(){return this.dataBuffer}},{key:"getData",value:function(){var e=this.getLatestEntry();return this.reset(),e}}]),e}(),hf=function(e){function t(){var e;return _classCallCheck(this,t),(e=_callSuper(this,t)).onInit(),e}return _inherits(t,e),_createClass(t,[{key:"onInit",value:function(){this.reset(),this.init("largest-contentful-paint")}},{key:"getValue",value:function(){var e,t=this.getData();return{time:(null==t?void 0:t.renderTime)||(null==t?void 0:t.loadTime)||0,outerHtml:(null===(e=null==t?void 0:t.element)||void 0===e?void 0:e.outerHTML)?un(null==t?void 0:t.element,2):""}}}]),t}(df),vf=function(e){function t(){var e;return _classCallCheck(this,t),(e=_callSuper(this,t)).onInit(),e}return _inherits(t,e),_createClass(t,[{key:"onInit",value:function(){this.reset(),this.init("first-input")}},{key:"getValue",value:function(){var e=this.getData();return ne.log("FID",e),(null==e?void 0:e.processingStart)-(null==e?void 0:e.startTime)||0}}]),t}(df),mf=function(e){function t(){var e;return _classCallCheck(this,t),(e=_callSuper(this,t)).onInit(),e}return _inherits(t,e),_createClass(t,[{key:"onInit",value:function(){this.reset(),this.init("navigation")}},{key:"getValue",value:function(){var e=_slicedToArray(this.getEntries(),1)[0];return e&&e.responseStart?e.responseStart:0}}]),t}(df),gf=function(){function e(){var t=this;_classCallCheck(this,e),this.firstInput=0,this.handler=function(e){e.isTrusted&&(t.firstInput=0===t.firstInput?Bn()?performance.now():0:t.firstInput,document.removeEventListener("touchstart",t.handler,!1),document.removeEventListener("click",t.handler,!1),document.removeEventListener("scroll",t.handler,!1),document.removeEventListener("touch",t.handler,!1))},this.init()}return _createClass(e,[{key:"init",value:function(){document.addEventListener("touchstart",this.handler,!1),document.addEventListener("click",this.handler,!1),document.addEventListener("scroll",this.handler,!1),document.addEventListener("touch",this.handler,!1)}},{key:"getValue",value:function(){return this.firstInput}}]),e}(),yf=["meta","script","style","link","br","body","html","iframe","#app","#root","#__next"],_f=function(){function e(){var t=this;_classCallCheck(this,e),this.timer=null,this.details=[],this.observeDom=null,this.intervalTime=5e3,this.stopObserving=this.stopObserving.bind(this),this.isInFirstScreen=this.isInFirstScreen.bind(this),this.observeMutation=this.observeMutation.bind(this),this.onInit(),window.addEventListener("beforeunload",(function(){t.stopObserving()}))}return _createClass(e,[{key:"isIgnoreElem",value:function(e){var t=cn(e);return yf.includes(t)}},{key:"isInFirstScreen",value:function(e){if(!e||!e.getBoundingClientRect)return!1;var t=e.getBoundingClientRect(),n=window.innerHeight,r=window.innerWidth;return t.left>=0&&t.left<r&&t.top>=0&&t.top<n}},{key:"onInit",value:function(){var e=this;this.details=[],this.stopObserving(),this.observeMutation(),this.timer=setTimeout((function(){e.stopObserving()}),this.intervalTime)}},{key:"observeMutation",value:function(){var e=this;this.observeDom=new MutationObserver((function(t){t&&t.forEach&&t.forEach((function(t){var n;if(t&&(null===(n=null==t?void 0:t.addedNodes)||void 0===n?void 0:n.length)){var r=t.addedNodes[0];e.isIgnoreElem(r)||1===r.nodeType&&e.details.push(r)}}))})),this.observeDom.observe(document,{childList:!0,subtree:!0})}},{key:"stopObserving",value:function(){this.observeDom&&this.observeDom.disconnect(),this.timer&&clearTimeout(this.timer)}},{key:"getValue",value:function(){var e=this;ne.log("jitterRate details",this.details);var t=this.details.filter((function(t){return e.isInFirstScreen(t)})).map((function(e){return e.offsetTop}));if(ne.log("jitterRate hightest",t),null==t?void 0:t.length){var n=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return t}(t);return 100*Dn(n/window.screen.height)}return 0}}]),e}(),bf=function(){function e(t){_classCallCheck(this,e),this.config=void 0,this.referDoms=[],this.importantDOMs=[],this.highestWeightScore=0,this.value=0,this.p80Value=0,this.version=$t.Viewport,this.sortedTimings=[],this.ingoreCount=0,this.largestDomSelector="",this.fmpDependDom=null,this.resourceTime=0,this.ignoreDomCount=0,this.config=t}return _createClass(e,[{key:"selectMostImportantDOMs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if(e&&!function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,n=arguments.length>1?arguments[1]:void 0;if(t.clientWidth>=Tn&&t.clientHeight>=En&&window.getComputedStyle){var r=window.getComputedStyle(t),i=r.position,o=r.zIndex;if(["absolute","fixed","relative"].includes(i)&&Number(o)>1)return ne.warn("fmp warning: 全屏弹窗被忽略:",t),!0}if("function"==typeof(null==n?void 0:n.getFmpIgnoreConfig)){var a=n.getFmpIgnoreConfig();if(a){var s=a.clsList,u=void 0===s?[]:s,c=a.attr;if((null===(e=null==t?void 0:t.dataset)||void 0===e?void 0:e[c])&&Array.isArray(u)&&u.length>0&&u.some((function(e){return t.classList.contains(e)})))return ne.warn("fmp warning: 自定义DOM忽略:",t),!0}}return!1}(e,this.config)){var t=this.getWeightScore(e);t>Sn?-1===this.referDoms.indexOf(e)&&this.referDoms.push(e):t>=this.highestWeightScore&&-1===this.importantDOMs.indexOf(e)&&(this.importantDOMs.push(e),this.highestWeightScore=t);for(var n=(null==e?void 0:e.children)||[],r=0,i=n.length;r<i;r++)n[r]&&this.selectMostImportantDOMs(n[r])}else this.ignoreDomCount++}},{key:"getFmpDependDom",value:function(){return this.fmpDependDom}},{key:"getLoadingTime",value:function(e,t,n){if(!e)return 0;var r=An(e),i="",o=e.tagName&&e.tagName.toUpperCase?e.tagName.toUpperCase():"";On.indexOf(o)>=0&&(i=yn(e.src));var a=In(e);kn(a)&&(i=yn(a));var s=t[i],u=s?s.responseEnd:0;return Dn(Math.max(u,r-n))}},{key:"calcValue",value:function(e){var t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0!==this.importantDOMs.length||0!==this.referDoms.length){var r=this.referDoms.length>=3?this.referDoms:[].concat(_toConsumableArray(this.referDoms),_toConsumableArray(this.importantDOMs.slice(this.referDoms.length-3))),i=0,o=null,a=r.map((function(r){var a=t.getLoadingTime(r,e,n);return a>i&&(i=a,o=r),a}));this.version===$t.Viewport&&ne.log("".concat(this.version," fmp context:"),r,a);var s=_toConsumableArray(a).sort((function(e,t){return e-t}));this.sortedTimings=s;var u=function(e){return{value:e[e.length-1],p80Value:e[Math.floor(.8*(e.length-1))]}}(s);this.value=u.value,this.p80Value=u.p80Value,this.fmpDependDom=o}}},{key:"getRenderMetrics",value:function(e){for(var t=0,n=0,r=this.sortedTimings.length;n<r&&!(e<this.sortedTimings[n]);n++)t=n+1;return Dn(t/this.sortedTimings.length)}}]),e}(),Ef=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_callSuper(this,t,[e])).version=$t.Viewport,n}return _inherits(t,e),_createClass(t,[{key:"getScreenHeight",value:function(){return En}},{key:"getWeightScoreImpl",value:function(e,t,n){return(Math.min(t.left+t.width,Tn)-Math.max(0,t.left))*(Math.min(t.top+t.height,n)-Math.max(0,t.top))*function(e){var t=kn(In(e))?"IMG":e.tagName&&e.tagName.toUpperCase?e.tagName.toUpperCase():"";return wn[t]||1}(e)}},{key:"getWeightScore",value:function(e){if(!e||Cn(e))return 0;var t=Ln(e),n=this.getScreenHeight();return xn(t.top,t.left,t.width,t.height,n)?0:this.getWeightScoreImpl(e,t,n)}}]),t}(bf);function Tf(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,i=r.firstInput,o=r.getFmpIgnoreConfig,a=new Ef({getFmpIgnoreConfig:o}),s={},u=performance.getEntries()||[],c=performance.now();a.selectMostImportantDOMs(),ne.log("fmp costTime: ",performance.now()-c);for(var l=0,f=u.length;l<f;l++){var p=u[l],d=(e=p.name)?e.indexOf("http")<0?yn(location.protocol+e):yn(e):"";(!t||p.startTime>n)&&null==s[d]&&(s[d]=p)}a.calcValue(s,t,n);var h=a.p80Value,v=a.value,m=v,g=h;g=g>=0?g:0,m=Nn({fmp:m=m>=0?m:0,firstInput:i}),g=Nn({fmp:g,firstInput:i});var y=a.getFmpDependDom(),_=y?un(y):"";return ne.log("DUOTEL fmpDependDom",y),ne.log("DUOTEL fmp ".concat(t?"子页面":"首次",":"),n,_,m,v),{fmp:m,fmp_p80:g,ignoreDomCount:a.ignoreDomCount,fmpDependDomXPath:_}}var wf,Sf=(wf=!1,"undefined"!=typeof window&&(window.addEventListener("online",(function(){wf=!1})),window.addEventListener("offline",(function(){wf=!0}))),function(){return wf});function Of(){return j(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var t,n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return new Promise((function(e,t){setTimeout((function(){e(2001)}),2e3)}))},t=function(e){return j(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=performance.now(),t.next=3,fetch(e);case 3:return r=performance.now(),i=r-n,t.abrupt("return",Math.floor(i));case 6:case"end":return t.stop()}}),t)})))},e.next=4,Promise.race([t("https://cdn.dewu.com/node-common/c5365607-13e9-63ac-853b-18a8304edc41-102-102.png"),n()]);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))}function kf(){var e=localStorage.getItem("device_fps");return e?Number(e):null}function Cf(){var e;return j(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i,o;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Of();case 3:return n=t.sent,r=window.performance.getEntriesByType("navigation")[0],i=Sf(),o=null===(e=navigator)||void 0===e?void 0:e.connection,t.abrupt("return",{isHtmlPefetchFlag:r.responseEnd-r.requestStart<50,isWeakNetFlag:!(n<200),isOfflineFLag:i,logFlagImgTime:n,netWorkTypeFlag:(null==o?void 0:o.effectiveType)||void 0,deviceFps:kf()});case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",{});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))}var Rf=function(){function e(t,n){var r,i,o=this;_classCallCheck(this,e),this.mutationTimeQueue=[],this.mutationCount=0,this.timer=null,this.now=Date.now(),this.initTime=Fn(),this.initLoadDuration=this.now-this.initTime,this.appShowLoadDuration=(null===(r=this.client)||void 0===r?void 0:r.firstVisibleTime)?this.now-(null===(i=this.client)||void 0===i?void 0:i.firstVisibleTime):0,this.loadDuration=this.appShowLoadDuration-this.initLoadDuration,this.startSubTime=0,this.observer=new MutationObserver((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Date.now();o.handleChange(e,t)})),this.lcpInstance=new hf,this.fidInstance=new vf,this.ttfbInstance=new mf,this.jitterRateInstance=new _f,this.firstInputInstance=new gf,this.isDOMLoaded=!1,this.isFirst=!0,this.isClicked=!1,this.firstMarkTime=0,this.isReported=!1,this.notify=t,this.client=n,this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;if(ne.log("performance init initTime -> ".concat(this.initTime,", initLoadDuration -> ").concat(this.initLoadDuration,", appShowLoadDuration -> ").concat(this.appShowLoadDuration,", loadDuration -> ").concat(this.loadDuration)),Bn()){if(this.firstMarkTime=Dn(performance.now()),document.body)this.startObserver();else var t=setInterval((function(){document.body&&(clearInterval(t),e.startObserver())}),20);X(N,"DOMContentLoaded",(function(){e.isDOMLoaded=!0})),X(N,"click",(function(){e.isClicked=!0})),setTimeout((function(){e.isDOMLoaded=!0}),100),this.doSend()}}},{key:"startObserver",value:function(){document.body&&this.observer.observe(document.body,{childList:!0,subtree:!0}),this.handleChange([])}},{key:"handleChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();if(document.body){var n=this.mutationCount,r=t-(this.isFirst?this.initTime:this.startSubTime),i=n>0?r-this.mutationTimeQueue[n-1]:0;this.isClicked&&i>=1e3&&n>0?this.isReported||(this.timer&&(clearTimeout(this.timer),this.timer=null),this._send()):(!function(e){performance.mark("".concat(bn).concat(e))}(n),setTimeout((function(){Rn(document.body,n)}),0),this.mutationTimeQueue[this.mutationCount++]=r)}}},{key:"reset",value:function(){this.observer.disconnect(),this.mutationCount=0,this.mutationTimeQueue=[],performance.clearMarks(bn),this.isClicked=!1,Pn(),this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"startSubPage",value:function(){this.isReported=!1,this.startSubTime=Date.now(),this.startObserver(!1),this.lcpInstance&&this.lcpInstance.onInit(),this.fidInstance&&this.fidInstance.onInit(),this.ttfbInstance&&this.ttfbInstance.onInit(),this.jitterRateInstance&&this.jitterRateInstance.onInit(),this.doSend()}},{key:"doSend",value:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.isReported||e._send()}),5e3)}},{key:"_getReportData",value:function(){return j(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var t,n,r,i,o,a,s,u,c,l,f,p,d,h,v,m,g,y,_,b,E,T=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ql(),n=t.fp,r=t.fcp,i=D(t,["fp","fcp"]),o=this.lcpInstance.getValue(),a=o.time,s=o.outerHtml,u=this.fidInstance.getValue(),c=this.ttfbInstance.getValue(),l=this.jitterRateInstance.getValue(),f=Tf(!this.isFirst,this.isFirst?0:this.startSubTime-this.initTime,{firstInput:this.firstInputInstance.getValue(),getFmpIgnoreConfig:function(){var e,t;return null===(t=null===(e=T.client)||void 0===e?void 0:e.settingConfig)||void 0===t?void 0:t.fmpIgnoreConfig}}),p=f.fmp,d=void 0===p?0:p,h=f.ignoreDomCount,v=f.fmpDependDomXPath,m=d>0?Dn(d):0,this.loadDuration>0&&(m-=this.loadDuration),g=this.isFirst?Dn(a):0,y=0,!this.isFirst){e.next=15;break}return e.next=14,zn(r);case 14:y=e.sent;case 15:return _=Math.max(m,this.firstMarkTime),!h&&g>_&&(_=g),e.next=19,Cf();case 19:return b=e.sent,E=Object.assign(Object.assign({fmp:1e3*_,tti:1e3*Dn(y),ttfb:this.isFirst?1e3*Dn(c):0,lcp:1e3*g,lcpOuterHtml:s,ignoreDomCount:h,fmpDependDomXPath:v,fid:1e3*Dn(u),jitterRate:Dn(l),isFirst:this.isFirst,fp:1e3*n,fcp:1e3*r},b),i),e.abrupt("return",Promise.resolve(E));case 22:case"end":return e.stop()}}),e,this)})))}},{key:"_send",value:function(){var e,t,n,r,i,o=this;if(this.isDOMLoaded){if(this.isReported=!0,(null===(e=null==N?void 0:N.DuOtelPercollect)||void 0===e?void 0:e.pcPerformanceData)&&!(null===(t=this.client)||void 0===t?void 0:t.pcPerformanceReported)){var a=null===(n=null==N?void 0:N.DuOtelPercollect)||void 0===n?void 0:n.pcPerformanceData;return zn((null!==(r=null==a?void 0:a.fcp)&&void 0!==r?r:0)/1e3).then((function(e){var t=Object.assign(Object.assign({},a),{deviceFps:kf(),tti:1e3*Dn(e)});o.notify("performancePlugin",{type:"performance",data:t})})),this.client.pcPerformanceReported=!0,N.DuOtelPercollect.pcPerformanceData=null,this.isFirst=!1,void this.reset()}if((null===(i=this.client)||void 0===i?void 0:i.pcPerformanceReported)&&this.isFirst)return this.isFirst=!1,void this.reset();this._getReportData().then((function(e){ne.log("performance baseData",e),o.notify("performancePlugin",{type:"performance",data:e}),o.isFirst=!1,o.reset()}))}}},{key:"destroy",value:function(){this.reset(),this.startSubTime=0,this.isFirst=!1,this.isDOMLoaded=!1,this.isReported=!1}}]),e}(),Pf=function(){function e(t){var n=this;_classCallCheck(this,e),this.isPlaying=!1,this.isPageActive=!1,this.isClicked=!1,this.activeTimer=null,this.intervalTime=1e4,this.startTime=Date.now(),this.endTime=0,this.notify=t,X(N,"beforeunload",(function(){n.endTime=Date.now(),n._send(),n.clear()})),X(N,"mousemove",this.genActiveFn()),X(N,"mousedown",this.genActiveFn()),X(N,"wheel",this.genActiveFn()),X(N,"keydown",this.genActiveFn()),X(N,"touchstart",this.genActiveFn()),X(N,"play",(function(){return n.isPlaying=!0})),X(N,"playing",(function(){return n.isPlaying=!0})),X(N,"pause",(function(){return n.isPlaying=!0})),X(N,"click",(function(){return n.isPlaying=!0})),this.init()}return _createClass(e,[{key:"genActiveFn",value:function(){var e,t,n=this;return e=function(){n.isPageActive=!0,n.activeTimer&&N.clearTimeout(n.activeTimer),n.activeTimer=N.setTimeout((function(){n.isPageActive=!0}),n.intervalTime)},t=500,function(){var n=arguments;setTimeout((function(){e.apply(null,n)}),t)}}},{key:"init",value:function(){this.clear(),this.isPlaying=!1,this.startTime=Date.now()}},{key:"clear",value:function(){this.isPlaying=!1,this.isPageActive=!1,this.isClicked=!1}},{key:"destroy",value:function(){this.clear(),this.startTime=0,this.endTime=0,this.isPlaying=!1,this.isPageActive=!1,this.isClicked=!1}},{key:"_send",value:function(){(this.isPlaying||this.isPageActive)&&(ne.log("stayTime",this.startTime,this.endTime),this.notify("performancePlugin",{type:"stayTime",data:{isClicked:this.isClicked,startTime:this.startTime,endTime:this.endTime}}))}}]),e}(),Af=["html","body","#app","#root","#__next"],If=function(){function e(t){_classCallCheck(this,e),this._whiteScreenTimer=null,this._loopIntervalTime=2e3,this.notify=t,this._idleCallback=this._idleCallback.bind(this),this.init()}return _createClass(e,[{key:"init",value:function(){this.destroy(),"complete"===document.readyState?this._idleCallback():X(N,"load",this._idleCallback)}},{key:"_isContainer",value:function(e){var t=cn(e);return Af.includes(t)}},{key:"customElementsFromPoint",value:function(e,t){var n=[];if(e<0||t<0||e>window.innerWidth||t>window.innerHeight||!document.documentElement)return n;var r=document.elementFromPoint(e,t);if(!r)return n;for(;r;)n.includes(r)||n.push(r),r=r.parentElement;var i=document.documentElement;return n[n.length-1]!==i&&n.push(i),n}},{key:"elementsFromPoint",value:function(e,t){return"elementsFromPoint"in document?document.elementsFromPoint(e,t):"msElementsFromPoints"in document?document.msElementsFromPoint(e,t):this.customElementsFromPoint(e,t)}},{key:"sampling",value:function(){for(var e=0,t=1;t<=9;t++){var n=this.elementsFromPoint(window.innerWidth*t/10,window.innerHeight/2),r=this.elementsFromPoint(window.innerWidth/2,window.innerHeight*t/10);this._isContainer(n[0])&&e++,5!=t&&this._isContainer(r[0])&&e++}17!==e?this._whiteScreenTimer&&(clearTimeout(this._whiteScreenTimer),this._whiteScreenTimer=null):this._whiteScreenTimer||this.openWhiteLoop();var i=17===e;this.notify("performancePlugin",{type:"whiteScreen",data:{isWhiteScreen:i}})}},{key:"openWhiteLoop",value:function(){var e=this;this._whiteScreenTimer||(this._whiteScreenTimer=N.setInterval((function(){e._idleCallback()}),this._loopIntervalTime))}},{key:"destroy",value:function(){this._whiteScreenTimer&&N.clearInterval(this._whiteScreenTimer),this._whiteScreenTimer=null}},{key:"_idleCallback",value:function(){var e=this;"requestIdleCallback"in N?requestIdleCallback((function(t){t.timeRemaining()>0&&e.sampling()})):this.sampling()}}]),e}(),Lf=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.localPerformance=N.performance,this.hardwareDataBuffer={memory:[],frame:[]},this.remainedTime=e.RECORD_INTERVAL,this.lastFrameTimeStamp=Date.now(),this.frameCountInRecordingCycle=0,this.timer=null,this.monitorMemory=function(){r.localPerformance.memory&&r.hardwareDataBuffer.memory.push({jsHeapSizeLimit:r.localPerformance.memory.jsHeapSizeLimit,usedJSHeapSize:r.localPerformance.memory.usedJSHeapSize,totalJSHeapSize:r.localPerformance.memory.totalJSHeapSize})},this.notify=n,this.intervalTime=t.memoryTime,X(N,"beforeunload",(function(){r._send(),r.clear()})),this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;this.clear(),this.timer=N.setInterval((function(){e._send()}),this.intervalTime)}},{key:"getReportData",value:function(){this.localPerformance.memory&&this.monitorMemory();var e=this.hardwareDataBuffer.memory,t=void 0===e?[]:e,n=t[t.length-1]?t[t.length-1]:null;return Object.assign({},n&&n)}},{key:"clear",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"destroy",value:function(){this.clear()}},{key:"_send",value:function(){this.notify("performancePlugin",{type:"memory",data:this.getReportData()}),this.hardwareDataBuffer.frame=[],this.hardwareDataBuffer.memory=[]}}]),e}();Lf.RECORD_INTERVAL=250;var xf=function(e,t){var n=function(e){if(!oe())return!1;var t=null==e?void 0:e.preloadStaticCfg;if(t){var n=t.whiteList,r=t.blackList,i=t.isOpen,o=N.location.href,a=r.some((function(e){return!!(e&&e.length>0)&&0===o.indexOf(e)})),s=n.some((function(e){return!!(e&&e.length>0)&&0===o.indexOf(e)}));return!(!i&&!s||a)}return!1}(t);if(n&&(null==t?void 0:t.preloadStaticCfg)){var r=null==t?void 0:t.preloadStaticCfg,i=r.frameUrl,o=r.durationMs;if(i){var a=document.createElement("iframe");a.style.display="none",a.src=i,document.body.appendChild(a),setTimeout((function(){document.body.removeChild(a)}),o||3e3)}}},Nf=null,Df=null,jf=null,Mf="performancePlugin",Uf={name:Mf,isPluginEnable:function(){return this.options.sendPerformance},isPluginRegist:function(){return!!(Nf&&jf&&Df)},destroy:function(){Nf&&(Nf.destroy(),Nf=null),Df&&(Df.destroy(),Df=null),jf&&(jf.destroy(),jf=null)},monitor:function(e){var t,n,r,i,o=this;if((i=this).settingConfigReqInst.then((function(e){var t=i.options.appId;if(Zl(e,t)&&t){var n=$l(e,t);ef=new Yl(n)}})),N){if(null===(t=null==N?void 0:N.DuOtelPercollect)||void 0===t?void 0:t.pcPerformanceData){var a=null===(n=null==N?void 0:N.DuOtelPercollect)||void 0===n?void 0:n.pcPerformanceData;zn((null!==(r=null==a?void 0:a.fcp)&&void 0!==r?r:0)/1e3).then((function(t){var n=Object.assign(Object.assign({},a),{tti:1e3*Dn(t)});e(Mf,{type:"performance",data:n}),o.pcPerformanceReported=!0,N.DuOtelPercollect.pcPerformanceData=null}))}Nf&&jf&&Df||(Nf=new Pf(e),jf=new Rf(e,this),function(){try{return N.self!==N.top}catch(e){return!0}}()||(Df=new If(e)))}},receiveBroadcast:function(e,t){var n=_slicedToArray(t,1)[0],r=n.isUpdate;"routePlugin"===n.from&&r&&(Nf&&Nf.init(),Df&&Df.init(),jf&&jf.startSubPage())},dataTransform:function(e){return e},dataSend:function(e,t){var n=t.type,r=t.data;"performance"===n&&(this.performanceData=r,e("broadcast",{from:Mf,data:r}),xf(0,this.settingConfig),function(e,t,n){if(Zl(t,n)&&n){var r=$l(t,n);r&&(console.log("otel appCfg...",r),null==ef||ef.sendData(e,n))}}(r,this.settingConfig,this.options.appId)),this.duOtelOpentelemetry.startNewPerformanceSpan(n,Object.assign(Object.assign({},r),{type:n})),this.notify(n,r)}},Hf=null,Bf={name:"memoryPlugin",isPluginEnable:function(){return this.options.sendMemory},isPluginRegist:function(){return!!Hf},destroy:function(){Hf&&(Hf.destroy(),Hf=null)},monitor:function(e){if(N&&!Hf){var t=this.options.memoryTime;Hf=new Lf({memoryTime:t},e)}},receiveBroadcast:function(e,t){var n=_slicedToArray(t,1)[0],r=n.isUpdate;"routePlugin"===n.from&&r&&Hf&&Hf.init()},dataTransform:function(e){return e},dataSend:function(e,t){var n=t.type,r=t.data;this.duOtelOpentelemetry.startNewPerformanceSpan(n,Object.assign(Object.assign({},r),{type:n}))}},Ff=!1,zf="errorPlugin",qf={name:zf,isPluginEnable:function(){return this.options.functionList.includes("jsError")},isPluginRegist:function(){return Ff},destroy:function(){Xr&&G(N,"error",Xr,!1),Gr&&G(N,"unhandledrejection",Gr,!1),console.error=Wr,Ff=!1},monitor:function(e){if(N&&!Ff){if(N.DuOtelPercollect&&N.DuOtelPercollect.pcData){var t,n=_createForOfIteratorHelper(N.DuOtelPercollect.pcData);try{var r=function(){var n=t.value,r={};"error"===n.errorType?r=Vr(n.errorEvent):"unhandledrejection"===n.errorType&&(r=Zr(n.errorEvent)),setTimeout((function(){e(zf,r)}),16.8)};for(n.s();!(t=n.n()).done;)r()}catch(e){n.e(e)}finally{n.f()}}var i;i=function(t){t&&e(zf,t)},X(N,"error",Xr=function(e){var t=Vr(e);i(t)},!0),X(N,"unhandledrejection",Gr=function(e){var t=Zr(e);i(t)},!0),console.error=function(){for(var e,t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=[].concat(r).find((function(e){return kr(e)}));if(a){var s=null===(t=null===(e=zr({error:a,message:null==a?void 0:a.message}))||void 0===e?void 0:e.exception)||void 0===t?void 0:t.values[0],u=s.type,c=s.value,l=s.stacktrace,f=(null==l?void 0:l.frames)||[],p=(null==f?void 0:f.length)>0?f[f.length-1]:{},d=p.lineno,h=p.filename,v=p.colno,m={message:c,stack:null==a?void 0:a.stack,type:u,source:h,lineno:d,colno:v,frames:JSON.stringify(f),errorLevel:en.CONSOLE_ERROR_LEVEL};ne.log("ConsoleError",m),i({type:"ConsoleError",params:m,name:"consoleError"})}return Wr.call.apply(Wr,[console].concat(r))},Ff=!0}},dataTransform:function(e){return this.errorTransform(e)},dataSend:function(e,t){ne.log("debug errorPlugin collectedData",t),e("broadcast",{from:zf,data:t})}},Vf=null,Zf=null,Xf="recordPlugin",Gf={name:Xf,isPluginEnable:function(){var e;return j(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i,o,a,s,u,c;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.options,r=n.type,i=n.enableRecord,n.area,o=n.env,a=n.appId,!i||"B"!==r){t.next=13;break}if(Zf){t.next=10;break}return Zf={},s=["xdw","pre","prod"].includes(o)?"du-record-default":"du-record-test",t.next=7,an("https://cdn-config.dewu.com/node-common/configCenter/du-record/".concat(s,".json"));case 7:u=t.sent,c=u.data,Zf=rn(c)||{};case 10:if(null===(e=null==Zf?void 0:Zf.whiteList)||void 0===e?void 0:e.some((function(e){return e.appId===a}))){t.next=12;break}return t.abrupt("return",!1);case 12:return t.abrupt("return",!0);case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,this)})))},isPluginRegist:function(){return!!Vf},destroy:function(){Vf=null},monitor:function(){var e=this;if(N&&!Vf){var t=this.options,n=t.env,r=t.area,i=t.type,o=t.appId;Vf={},qn("https://cdn-jumper.dewu.com/sdk-linker/du-record.js").then((function(){var e;if(!(null===(e=null==N?void 0:N.DuRecord)||void 0===e?void 0:e.DuRecord))throw new Error("loadDuRecordError");(Vf=new N.DuRecord.DuRecord({recordMode:"fragment",env:n,area:r,appType:i,inApp:oe(),appId:o,whiteConfig:Zf})).start()})).catch((function(){e.send("loadDuRecordError")}))}},receiveBroadcast:function(e,t){var n,r=_slicedToArray(t,1)[0],i=r.data,o=r.from;if("errorPlugin"===o&&i&&e(Xf,i),"routePlugin"===o){var a=_slicedToArray(t,1)[0],s=a.type,u=a.prePage;null===(n=null==Vf?void 0:Vf.onRouterChange)||void 0===n||n.call(Vf,{type:s,prePage:u})}},dataTransform:function(e){return e},dataSend:function(e,t){var n,r=t.params,i=t.errorSpan,o=t.name;"assetsError"!==o&&(null===(n=null==Vf?void 0:Vf.actionUpload)||void 0===n||n.call(Vf,{traceId:i._spanContext.traceId,frames:(null==r?void 0:r.frames)||"",errorMsg:(null==r?void 0:r.message)||"",otelSessionId:this.sessionId||"",userId:this.options.userId||"",userName:this.options.userName||"",otelParams:Object.assign(Object.assign({},r||{}),{scope:o})}))}},Wf=!1,Jf=null,Kf="resourcePlugin",Qf=["https://sensors.dewu.com/sa.gif","hangzhou.log.aliyuncs.com","/api/traces","/api/logs","/api/metrics","/api/deviceInfo"],Yf={name:Kf,isPluginEnable:function(){return!0},isPluginRegist:function(){return Wf},destroy:function(){Jf&&(null==Jf||Jf.disconnect(),Jf=null)},monitor:function(e){var t=this;if(N){Wf=!0;try{var n=[].concat(d,_toConsumableArray(this.options.ignoreUrls));Jf=new PerformanceObserver((function(r){var i,o,a,s=(null===(o=null===(i=t.settingConfig)||void 0===i?void 0:i.resourceDisabled)||void 0===o?void 0:o[null===(a=t.getActiveAppInfo())||void 0===a?void 0:a.appId])||[],u=r.getEntries().filter((function(e){var t;return!s.includes(null===(t=e)||void 0===t?void 0:t.initiatorType)})).filter((function(e){var t;return!["beacon"].includes(null===(t=e)||void 0===t?void 0:t.initiatorType)})).filter((function(e){return!Qf.some((function(t){var n;return null===(n=e)||void 0===n?void 0:n.name.includes(t)}))})).filter((function(e){var t,r;return!["xmlhttprequest","fetch"].includes(null===(t=e)||void 0===t?void 0:t.initiatorType)||!xs(null===(r=e)||void 0===r?void 0:r.name,n)}));!u||u.length<=0||(e(Kf,u),e("broadcast",{from:Kf,entries:u}))})),Jf.observe({entryTypes:["resource"]})}catch(e){}}},dataTransform:function(e){return e},dataSend:function(e,t){var n=this;setTimeout((function(){n.notify("resource",t)}),150),t.forEach((function(e){try{var t=e.toJSON()||{},r=(t.serverTiming,t.workerTiming,t.decodedBodySize),i=t.encodedBodySize,o=D(t,["serverTiming","workerTiming","decodedBodySize","encodedBodySize"]),a=r&&i&&r===i;n.duOtelOpentelemetry.startResourceSpan(Object.assign(Object.assign({},o),{unCompressed:a}))}catch(e){}}))}},$f=!1,ep=null,tp="longtaskPlugin",np=[],rp={name:tp,isPluginEnable:function(){return!0},isPluginRegist:function(){return $f},destroy:function(){ep&&(null==ep||ep.disconnect(),ep=null)},monitor:function(e){var t=this;if(N){if(N.DUOTEL_LONG_TASK&&N.DUOTEL_LONG_TASK.entries){var n=N.DUOTEL_LONG_TASK.entries;setTimeout((function(){op.call(t,n,e)}),16.8)}try{ep=new PerformanceObserver((function(n){var r=n.getEntries();!r||r.length<=0||op.call(t,r,e)})),ep.observe({type:"longtask",buffered:!0})}catch(e){}$f=!0}},receiveBroadcast:function(e,t){var n=_slicedToArray(t,1)[0],r=n.from,i=n.data;"performancePlugin"===r&&(np.forEach((function(t){var n=Object.assign(Object.assign({},t),{isInfmp:ip(t,i.fmp)});e(tp,n)})),np=[])},dataTransform:function(e){return e},dataSend:function(e,t){this.duOtelOpentelemetry.startLongTaskSpan(t)}};function ip(e,t){return e.startTime+e.duration<=t/1e3}function op(e,t){var n=this,r=e.map((function(e){var t=null==e?void 0:e.attribution.map((function(e){return e.toJSON()})),n=e.toJSON();return Object.assign(Object.assign({},n),{attribution:t})})),i=function(e){var t,n=e[0].duration+1e3,r=e.filter((function(e){return e.startTime<=n})),i=0,o=_createForOfIteratorHelper(r);try{for(o.s();!(t=o.n()).done;)i+=t.value.duration}catch(e){o.e(e)}finally{o.f()}return{isLagging:i>=600,entries:r}}(r);i.isLagging&&t(tp,{isOneSecondLagging:i.isLagging,data:on(i.entries)}),r.forEach((function(e){var r=function(e){return e.duration>150}(e),i=Object.assign(Object.assign({},e),{attribution:on(e.attribution),isLagging:r,relatedClick:r&&n.currentClick?on(n.currentClick):""});n.performanceData?(i.isInfmp=ip(e,n.performanceData.fmp),t(tp,i)):np.push(i)}))}var ap=!1,sp={name:"fpsPlugin",isPluginEnable:function(){return this.options.sendPerformance},isPluginRegist:function(){return ap},destroy:function(){ap=!1,N.FPSPerformanceTest=null},monitor:function(){var e=this;N&&!ap&&((null==N?void 0:N.FPSPerformanceTest)||(ne.log("loadScript fps"),qn("https://cdn-jumper.dewu.com/sdk-linker/du-oteltrace-fps.js").then((function(){var e;if(!(null==N?void 0:N.FPSPerformanceTest))throw new Error("Load fps.js Failed");ap=!0,null===(e=null==N?void 0:N.FPSPerformanceTest)||void 0===e||e.run()})).catch((function(){e.send("Load fps.js Failed")}))))}},up=new Error("资源图片URL未设置尺寸处理参数"),cp=!1,lp={name:"largeImage",isPluginEnable:function(){return!0},isPluginRegist:function(){return cp},monitor:function(e){N&&(cp=!0)},receiveBroadcast:function(e,t){var n=_slicedToArray(t,1)[0],r=n.from,i=n.entries;if("resourcePlugin"===r){var o=i.filter((function(e){var t;return["img"].includes(null===(t=e)||void 0===t?void 0:t.initiatorType)})).filter((function(e){var t;return!(null===(t=e)||void 0===t?void 0:t.name.includes("hangzhou.log.aliyuncs.com"))}));if(!o||o.length<=0)return;e("largeImage",o)}},dataTransform:function(e){var t=this,n=x(this.options.largeImgSample);return"C"===this.options.type&&n?(e||[]).map((function(e){var n=e.name;return fp(n)&&!pp(n)?{appId:t.options.appId,url:n,size:e.transferSize}:null})).filter((function(e){return e})):[]},dataSend:function(e,t){var n=this;(null==t?void 0:t.length)&&t.forEach((function(e){n.exception(up,e)}))}},fp=function(e){try{if(!e)return!1;var t=new URL(e).pathname;if(!t||!u.test(t))return!1;var n=(r=t.match(a))&&r.length>=3?{width:+r[1],height:+r[2]}:null;return!!n&&(!(n.width<1500||n.height<1500)&&k.some((function(e){return t.includes(e)})))}catch(e){return!1}var r},pp=function(e){return s.some((function(t){return t.test(e)}))},dp=new Error("请求入参包含不合规数据"),hp=!1,vp={name:"compliance",isPluginEnable:function(){return!0},isPluginRegist:function(){return hp},monitor:function(){hp=!0},receiveBroadcast:function(e,t){var n=_slicedToArray(t,1)[0],r=n.from,i=n.data;"request"===r&&i&&e("compliance",i)},dataTransform:function(e){if("C"===this.options.type){var t=e.attributes.requestType;if(t&&("xhr"===t||"fetch"===t)){var n=x(this.options.compliantSample,1e4),r=ae(),i=!1;if(oe()?se(r,"5.10.0")>0&&n&&(i=!0):i=n,i){var o=e.attributes.requestHeader,a=e.attributes.originUrl,s=e.attributes.data,u=J(a),c=yp(o,u,s);return c?{appId:this.options.appId,url:a,msg:"".concat(c.msg,"中包含不合规数据字段").concat(c.fields)}:null}return null}}},dataSend:function(e,t){t&&this.exception(dp,t)}},mp=["uuid","oaid","idfa"],gp=function(e){return!!e&&mp.map((function(t){return e[t]?t:""})).filter((function(e){return e})).toString()},yp=function(e,t,n){return gp(e)?{msg:"Request Header",fields:gp(e)}:gp(t)?{msg:"Url Query",fields:gp(t)}:gp(n)?{msg:"Request Body",fields:gp(n)}:null},_p=new Error("URL Query中包含关键字（undefined）"),bp=!1,Ep={name:"undefinedInQuery",isPluginEnable:function(){return!0},isPluginRegist:function(){return bp},monitor:function(e){if(N){bp=!0;var t=x(this.options.hasUndefInQuerySample);if(this.options.appId&&t){var n=Tp();n.length&&e("undefinedInQuery",n)}}},dataTransform:function(e){return{appId:this.options.appId,utl:Z(),keys:e.toString()}},dataSend:function(e,t){this.exception(_p,t)}},Tp=function(){var e=J(Z());return Object.keys(e).filter((function(t){return"undefined"===e[t]}))},wp=function(t){function n(e){var t;return _classCallCheck(this,n),(t=_callSuper(this,n,[e])).configCenterUserInfo=null,t.pcPerformanceReported=!1,t.microApp={},t.settingConfig=null,t.pageInNotSample=!1,t.ignoreErrors=oe()?[].concat(g,m):[].concat(g),t.currentClick=null,t.firstVisibleTime=0,t.clearPercollect(),t.getSettingConfig(),t.options=new Jr(Object.assign(e||{},N.DU_OTEL_CONFIG||{})),t.duOtelOpentelemetry=new Yc(_assertThisInitialized(t),e),t.init(),t.setConfig=t.setConfig.bind(_assertThisInitialized(t)),t.setPage=t.setPage.bind(_assertThisInitialized(t)),t.exception=t.exception.bind(_assertThisInitialized(t)),t.send=t.send.bind(_assertThisInitialized(t)),t.info=t.info.bind(_assertThisInitialized(t)),t.warning=t.warning.bind(_assertThisInitialized(t)),t.setMicroApp=t.setMicroApp.bind(_assertThisInitialized(t)),t.setActiveApp=t.setActiveApp.bind(_assertThisInitialized(t)),t.on=t.on.bind(_assertThisInitialized(t)),t.off=t.off.bind(_assertThisInitialized(t)),t.reportJsbRequest=t.reportJsbRequest.bind(_assertThisInitialized(t)),t}return _inherits(n,t),_createClass(n,[{key:"clearPercollect",value:function(){"removeEventListener"in N&&(N.DuOtelPercollect&&N.DuOtelPercollect.pcErr&&N.removeEventListener("error",N.DuOtelPercollect.pcErr,!0),N.DuOtelPercollect&&N.DuOtelPercollect.pcRej&&N.removeEventListener("unhandledrejection",N.DuOtelPercollect.pcRej,!0)),N.DUOTEL_LONG_TASK&&N.DUOTEL_LONG_TASK.observer&&N.DUOTEL_LONG_TASK.observer.disconnect()}},{key:"mergeConfig",value:function(e){this.options.mergeOptions(e);var t=this.options,n=t.appId,r=t.env,i=t.area,o=t.userId,a=t.userName,s=t.email,u=t.departmentId;this.initMetrics({appId:n,env:r,globalTags:Object.assign(Object.assign(_defineProperty({userid:o?String(o):void 0,username:a},E,i),s&&{email:s}),u&&{departmentId:u})}),this.duOtelOpentelemetry.mergeResource(this.options)}},{key:"registPlugins",value:function(){this.use([sp,rp,rf,Yf,ul,tl,qf,Uf,Bf,lp,vp,Ep,Gf])}},{key:"getSettingConfig",value:function(){return j(this,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.settingConfig||this.settingConfigReqInst){e.next=6;break}return this.settingConfigReqInst=an("https://cdn-config.dewu.com/node-common/configCenter/duotel-trace/setting.json").then((function(e){var t=e.data;return rn(t)})),e.next=4,this.settingConfigReqInst;case 4:this.settingConfig=e.sent,this.pkgIgnoreError();case 6:this.isPageNotInSample();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"isPageNotInSample",value:function(){var e,t,n;if(!this.settingConfig)return!1;for(var r=Z(),i=(null!==(e=this.settingConfig)&&void 0!==e?e:{}).pageConfig,o=void 0===i?{}:i,a=!1,s=0,u=Object.keys(o);s<u.length;s++){var c=u[s];if(r.includes(c)&&!x(null===(t=o[c])||void 0===t?void 0:t.sample,null===(n=o[c])||void 0===n?void 0:n.percentage)){a=!0;break}}this.pageInNotSample=a}},{key:"isSendByXHR",value:function(){var e,t=(null===(e=this.settingConfig)||void 0===e?void 0:e.sendConfig)||{},n=t.whiteList,r=t.xhrList,i=t.sample,o=t.percentage,a=this.options.appId;return!!(r&&r.includes(a)&&x(i,o))||(n&&n.includes(a),!1)}},{key:"init",value:function(){var e;return j(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i,o,a,s,u,c,l,f,p=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.registPlugins(),n=this.options,r=n.appId,i=n.env,o=n.area,a=n.userId,s=n.userName,u=n.appVersion,c=n.type,r&&this.initMetrics({appId:r,env:i,globalTags:_defineProperty({userid:a?String(a):void 0,username:s},E,o)}),this.pkgIgnoreError(),this.duOtelOpentelemetry.exporter.completeSpans(),this.getConfigCenter(),a){t.next=11;break}return t.next=9,le();case 9:l=t.sent,this.mergeConfig({userName:"C"===c?l:s});case 11:if(u){t.next=19;break}return t.next=14,ce();case 14:if(t.t0=t.sent,t.t0){t.next=17;break}t.t0=null===(e=this.getActiveAppInfo())||void 0===e?void 0:e.release;case 17:f=t.t0,this.mergeConfig({appVersion:f});case 19:return t.next=21,new Promise((function(e){oe()&&N.Jockey?N.Jockey.on("didBecomeActiveNotification",(function(t){e((null==t?void 0:t.firstVisibleTime)||0)})):e(0)}));case 21:this.firstVisibleTime=t.sent,N.setTimeout((function(){p.configCenterUserInfo||(p.getUserDone=!0,p.responseMap={})}),5e3);case 23:case"end":return t.stop()}}),t,this)})))}},{key:"initMetrics",value:function(e){var t,n,r,i,o,a,s=e.env,u=e.globalTags;if(this.metricsInstance){var c=null===(t=this.metricsInstance)||void 0===t?void 0:t.options,l=c.globalTags,f=c.appName,p=c.env;null===(n=this.metricsInstance)||void 0===n||n.merge({appName:(null===(r=this.getActiveAppInfo())||void 0===r?void 0:r.appId)||f,env:M(null===(i=this.getActiveAppInfo())||void 0===i?void 0:i.env,this.options.area)||p,globalTags:Object.assign(Object.assign({},l),u)})}else this.metricsInstance=new $n(this,{appName:null===(o=this.getActiveAppInfo())||void 0===o?void 0:o.appId,env:M(null===(a=this.getActiveAppInfo())||void 0===a?void 0:a.env,this.options.area)||s,globalTags:u});this._handleMetricCache()}},{key:"_handleMetricCache",value:function(){if(N.DUOTEL_METRIC_CACHE){for(var e=0,t=Object.entries(N.DUOTEL_METRIC_CACHE);e<t.length;e++){var n=_slicedToArray(t[e],2),r=n[0],i=n[1];this.send(r,i)}N.DUOTEL_METRIC_CACHE=null}}},{key:"pkgIgnoreError",value:function(){var e,t=this.options,n=t.ignoreErrors,r=t.appId;this.ignoreErrors=K([].concat(_toConsumableArray(this.ignoreErrors),_toConsumableArray(n),_toConsumableArray((null===(e=this.settingConfig)||void 0===e?void 0:e.ignoreErrors)||[]))),h.includes(r)&&(this.ignoreErrors=K([].concat(_toConsumableArray(this.ignoreErrors),v))),ne.log("要忽略的错误",this.ignoreErrors)}},{key:"getConfigCenter",value:function(){var t=this;N.setTimeout((function(){return j(t,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i,o,a,s,u,c,l,f,p,d,h,v,m,g,_,b,E,T,w=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ne.log("isInit",this.isInit(),this.options,this.settingConfig),!this.isInit()||this.options.dynamic){t.next=3;break}return t.abrupt("return");case 3:if(this.SERVICE_NAME){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,Xn(this.SERVICE_NAME);case 8:if(o=t.sent,a=o.debug,s=o.appVersion,u=o.userInfo,c=o.appId,ne.bindOptions(a),l=(null===(n=null==o?void 0:o.ignoreErrors)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.message})))||[],f=(null===(r=null==o?void 0:o.ignoreUrls)||void 0===r?void 0:r.map((function(e){return null==e?void 0:e.url})))||[],t.t1=s,t.t1){t.next=18;break}return t.next=17,ce();case 17:t.t1=t.sent;case 18:if(t.t0=t.t1,t.t0){t.next=21;break}t.t0=null===(i=this.getActiveAppInfo())||void 0===i?void 0:i.release;case 21:p=t.t0,this.mergeConfig(Object.assign(Object.assign({},o),{appId:c.trim(),ignoreErrors:[].concat(_toConsumableArray(this.ignoreErrors),_toConsumableArray(l)),ignoreUrls:[].concat(_toConsumableArray(this.options.ignoreUrls),_toConsumableArray(f)),appVersion:p})),d=u.userInfoAPI,h=u.userID,v=d&&h?u:y,this.getUserByUrl(v,(function(e){ne.log("getConfigCenter getUserByUrl success:",e,w)})),this.registPlugins(),this.pkgIgnoreError(),this.duOtelOpentelemetry.exporter.completeSpans(),t.next=38;break;case 31:t.prev=31,t.t2=t.catch(5),m=this.options,g=m.appId,_=m.env,b=m.area,E=g||this.SERVICE_NAME.replace(e,""),T=_||U(),this.mergeConfig({appId:E,env:M(T,b)}),this.getUserByUrl(y,(function(e){ne.log("getConfigCenter getUserByUrl error:",e,w)}));case 38:case"end":return t.stop()}}),t,this,[[5,31]])})))}),2e3)}},{key:"getUserByUrl",value:function(e,t){var n=e||{},r=n.userInfoAPI,i=n.userID,o=n.userName;for(var a in ne.log("getUserByUrl:",e,this.responseMap),this.responseMap){var s=this.responseMap[a];if(a.includes(r)&&s){var u=Y(s,i),c=Y(s,o);if(ne.log("getUserByUrl userInfo: userId -> ".concat(u,", userName -> ").concat(c)),u||c){var l={userId:u,userName:c};this.userResponse(l,t);break}}}}},{key:"userResponse",value:function(e,t){ne.log("userResponse:",e),t&&t(e),this.mergeConfig(e),localStorage.setItem("DUOTELCACHE",JSON.stringify(e)),this.getUserDone=!0,this.responseMap={}}},{key:"setConfig",value:function(e){var t;return j(this,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,i,o,a,s,u,c;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(ne.bindOptions(e.debug),ne.log("setConfig",e,this.settingConfig),r=e.userId,i=e.appId,o=e.type,a=e.userName,s=e.appVersion,n.t1=s,n.t1){n.next=8;break}return n.next=7,ce();case 7:n.t1=n.sent;case 8:if(n.t0=n.t1,n.t0){n.next=11;break}n.t0=null===(t=this.getActiveAppInfo())||void 0===t?void 0:t.release;case 11:if(u=n.t0,!r){n.next=16;break}n.t2=String(r),n.next=19;break;case 16:return n.next=18,le();case 18:n.t2=n.sent;case 19:c=n.t2,i&&(this.SERVICE_NAME=i),this.mergeConfig(Object.assign(Object.assign({},e),{appVersion:u,userName:"C"===o?c:a})),this.registPlugins(),this.pkgIgnoreError(),this.duOtelOpentelemetry.exporter.completeSpans();case 25:case"end":return n.stop()}}),n,this)})))}},{key:"errorTransform",value:function(e){var t=e.type,n=e.params,r=t;ne.log("debug errType",r);var a=this.options,s=a.consoleError,u=a.transformConsoleError2Error,c=a.onError;if("customError"!==t&&(i.test(n.frames)||o.test(n.frames)))return null;if("ConsoleError"===t&&!s)return null;if(A.isString(n.message)&&Q(n.message,this.ignoreErrors))return null;if(c&&c(n.message,n))return null;u&&"ConsoleError"===t&&(r="error");var l=Object.assign(Object.assign({},e),{type:r}),f=this.duOtelOpentelemetry.startErrorSpan(l);return Object.assign(Object.assign({},l),{errorSpan:f})}},{key:"exception",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ne.log("exception",n),function(e,t,n){var r,i,o=null===(i=null===(r=zr({error:e,message:null==e?void 0:e.message,filename:null==t?void 0:t.filename,lineno:null==t?void 0:t.lineno,colno:null==t?void 0:t.colno}))||void 0===r?void 0:r.exception)||void 0===i?void 0:i.values[0],a=o.type,s=o.value,u=o.stacktrace,c=(null==u?void 0:u.frames)||[],l=(null==c?void 0:c.length)>0?c[c.length-1]:{},f=l.lineno,p=l.filename,d=l.colno;if("waring"!==a){var h={extra:JSON.stringify(kr(t)?{name:t.name,message:t.message,stack:t.stack}:t),message:s,stack:null==e?void 0:e.stack,type:a,source:p,lineno:f,colno:d,frames:JSON.stringify(c),errorLevel:en.CUSTOM_ERROR_LEVEL};ne.log("customError",h),n({type:"customError",params:h,name:"exception"})}}(e,n,(function(e){t.errorTransform(e)}))}},{key:"setPage",value:function(e){this.duOtelOpentelemetry.startRouteSpan({type:"setPage",prePage:e})}},{key:"send",value:function(e,t,n){ne.log("自定义埋点 send:",e,t,n),this.metricsInstance&&this.metricsInstance.send(e,t,n)}},{key:"info",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.duOtelOpentelemetry.startMsgSpan("info",t,e)}},{key:"warning",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.duOtelOpentelemetry.startMsgSpan("warning",t,e)}},{key:"setMicroApp",value:function(e){var t=e.name,n=e.release,r=e.prefix,i=e.combo,o=e.env,a=D(e,["name","release","prefix","combo","env"]);ne.log("setMicroApp:",e),this.microApp[t]=Object.assign(Object.assign(Object.assign({},this.microApp[t]),{release:n,prefix:r,combo:i,env:o}),a),this.mergeMicroApp()}},{key:"setActiveApp",value:function(e){ne.log("setActiveApp:",e),e&&e!==this.options.appId&&(this.microApp[e]=Object.assign(Object.assign({},this.microApp[e]),{active:!0}));for(var t=0,n=Object.entries(this.microApp);t<n.length;t++){var r=_slicedToArray(n[t],2),i=r[0],o=r[1];this.microApp[i]=Object.assign(Object.assign({},o),{active:e===i})}this.mergeMicroApp()}},{key:"mergeMicroApp",value:function(){this.options.mergeOptions({microApp:JSON.stringify(this.microApp,(function(e,t){return t instanceof RegExp?t.toString():t}))}),this.duOtelOpentelemetry.mergeResource(this.options)}},{key:"getActiveAppInfo",value:function(){var e,t,n,r=this.options,i=r.appId,o=r.env,a=r.release,s=r.routeAppId,u=r.prefix,c=i,l=o,f=a,p=u;if(s)c=s,this.microApp[s]&&(l=(null===(e=this.microApp[s])||void 0===e?void 0:e.env)||o,f=(null===(t=this.microApp[s])||void 0===t?void 0:t.release)||a,p=(null===(n=this.microApp[s])||void 0===n?void 0:n.prefix)||u);else if(Object.keys(this.microApp).length)for(var d=0,h=Object.entries(this.microApp);d<h.length;d++){var v=_slicedToArray(h[d],2),m=v[0],g=v[1];if(g.active){c=m,l=(null==g?void 0:g.env)||o,f=(null==g?void 0:g.release)||a,p=(null==g?void 0:g.prefix)||u;break}}return{appId:c,env:l,release:f,prefix:p}}},{key:"on",value:function(e,t){this.subscribe.watch(e,t)}},{key:"off",value:function(e){this.subscribe.offWatch(e)}},{key:"notify",value:function(e,t){this.subscribe.notify(e,t)}},{key:"reportJsbRequest",value:function(e){oe()?this.notify("jsbRequest",e):ne.warn("该方法仅作用于端内应用")}}]),n}(Kn);"undefined"!=typeof window&&"undefined"!=typeof document&&(N.DUOTEL=N.DUOTEL||new wp({}))}();
